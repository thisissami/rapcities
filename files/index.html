<html>
  <head>
    <title>RapCities</title>
    <script type="text/javascript" src="processing-1.3.6.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	    <script type="text/javascript" src="soundmanager2.js"></script>
    <script type="text/javascript" src="http://xe-widgets.googlecode.com/svn-history/r10/trunk/widgets/xe_banner/skins/bannerSlider/js/slides.jquery.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
	<link rel="stylesheet" type="text/css" href="jquery-ui-1.8.18.custom.css" />
    <link rel='stylesheet' src="http://slidesjs.com/examples/images-with-captions/css/global.css">
    <style type="text/css">
      body {
        background-color: black;
        color: white;
		margin:0px;overflow:hidden;
      }
      h2 {
        font-size: 16px;
      }
      #canvas {
        /*width: 1158px;
        height: 635px;*/
        position: absolute;
        z-index: 0;
		/*left: 50%;
		margin-left:-479px;*/
		/*margin: auto;*/
      }
      #artist-info {
        position: absolute;
        z-index: -1;
        background-color: black;
        font: 15px Verdana, sans-serif;
		left: 50%;
		margin-left:-479px;
      }
      #top  {
        width: 700px;
        margin: 0 auto;
      }
      #top li {
        display: inline;
      }
      #center {
        float: left;
      }
      #popup {
        z-index: 2;
        float: left;
        display: none;
      }
      #popup a{
        color: white;
      }
      #popup-nav {
        height: 50px;
      }
      #popup-close {
        float: left;
      }
      #popup-url {
        float: right;
      }
      #center div {
        display: none;
      }
      #center div div {
        display: block;
      }
      td.square-td {
        width: 33%;
      }
      div.square {
        height: 166px;
        margin: 10px;
        text-overflow: ellipsis;
        overflow: hidden;
        padding: 12px;
      }
      div.square-hover {
        border: 2px solid white;
        padding: 10px;
      }
      .square a {
        text-decoration: underline;
        color: white;
      }
      .square p {
        font-size: 14px;
      }
      .type {
        float: left;
        width: 100px;
        height: 36px;
        padding-top: 16px;
        text-align: center;
        border: 2px solid white;
      }
      #close {
        font-weight: bold;
      }
      .selected-type {
        background-color: white;
        color: black;
      }
      .hover-type {
        background-color: white;
        color: black;
      }
      .never-hover-square {
        padding: 12px !important;
        border: none !important;
      }
      .square h2 {
        font-size: 16px;
        font-weight: bold;
      }
      .video {
        text-align: center;
      }
      .clear {
        clear: both;
      }
      iframe.popup {
        z-index: 2;
      }
      .video-thumbnail {
        width: 120px;
      }



      /* slides */
      .slides_container {
        width:570px;
        overflow:hidden;
        position:relative;
        display:none;
      }

      .slides_container div.slide {
        width:570px;
        display:block;
      }
    </style>
	<script type="text/javascript">
		$(document).ready(function() {
			$("div#dialogWindow").dialog({
				autoOpen: false,
				resizable: false,
				height: 360,
				width: 385
			});

			function onYouTubePlayerReady(playerId){
				startAutoplay();
			}
		});
	</script>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(an){var k=(function(){function bd(){var bf=this;function bh(){an.extendClassChain(bf)}bf.x=0;bf.y=0;bf.hw=0;bf.hh=0;bf.invert=false;bf.pressedHere=false;function bk(){return an.mouseX>bf.x-bf.hw&&an.mouseX<bf.x+bf.hw&&an.mouseY>bf.y-bf.hh&&an.mouseY<bf.y+bf.hh}an.addMethod(bf,"pressed",bk);function bl(bn,bo){bf.x=bn;bf.y=bo}an.addMethod(bf,"newPos",bl);function bj(){}an.addMethod(bf,"mousePressed",bj);function bg(){}an.addMethod(bf,"mouseReleased",bg);function bi(){}an.addMethod(bf,"draw",bi);function bm(bo,bq,bn,bp){bh();bf.x=bo;bf.y=bq;bf.hw=bn;bf.hh=bp}function be(){if(arguments.length===4){bm.apply(bf,arguments)}else{bh()}}be.apply(null,arguments)}return bd})();an.Button=k;var E=(function(){function bd(){var bi=this;function bh(){an.extendClassChain(bi)}bi.rapper=null;bi.rapcircle=null;bi.NYC=null;bi.miniNYC=null;bi.eventIcon=null;bi.NYCx=1000;bi.NYCy=711;bi.xdif=(aw-bb)/2;bi.ydif=(av-ba)/2;bi.curNYCx=bb+bi.xdif;bi.curNYCy=ba+bi.ydif;bi.ox=0;bi.oy=0;bi.ocx=0;bi.ocy=0;bi.allX=0;bi.allY=0;bi.widths=null;bi.heights=null;bi.ominx=0;bi.ominy=0;bi.miniMidX=0;bi.miniMidY=0;bi.midX=0;bi.midY=0;bi.minix=0;bi.miniy=0;bi.maxix=0;bi.maxiy=0;bi.opressed=false;bi.miniPressed=false;bi.once=false;function bg(){bi.$self.drawMap();bi.$self.drawArtists();bi.$self.drawEvents();an.fill(0);an.noStroke();an.rectMode(an.CORNERS);an.rect(0,0,bb,aV);an.rect(0,0,an.width,ba);an.rect(an.width,an.height,0,av);an.rect(an.width,an.height,aw,0);an.noFill();an.stroke(255);an.rect(bb,ba,aw,av);bi.$self.drawMini()}an.addMethod(bi,"draw",bg);function be(){an.imageMode(an.CENTER);var bx=0;var bA=0;var bz=0;for(bz=0;bz<8;bz++){bx+=bi.widths[bz];if(bx>bi.midX){break}}var by=0;for(by=0;by<8;by++){bA+=bi.heights[by];if(bA>bi.midY){break}}bi.$self.grimage(by,bz,bb+au/2-(bi.widths[bz]/2-(bx-bi.midX)),ba+af/2-(bi.heights[by]/2-(bA-bi.midY)));if(by>0){bi.$self.grimage(by-1,bz,bb+au/2-(bi.widths[bz]/2-(bx-bi.midX)),ba+af/2-bi.heights[by]-(bi.heights[by-1]/2-(bA-bi.midY))+1)}if(bz>0){bi.$self.grimage(by,bz-1,bb+au/2-bi.widths[bz]-(bi.widths[bz-1]/2-(bx-bi.midX))+1,ba+af/2-(bi.heights[by]/2-(bA-bi.midY)))}if(by<7){bi.$self.grimage(by+1,bz,bb+au/2-(bi.widths[bz]/2-(bx-bi.midX)),ba+af/2+bi.heights[by+1]/2+(bA-bi.midY)-1)}if(bz<7){bi.$self.grimage(by,bz+1,bb+au/2+bi.widths[bz+1]/2+(bx-bi.midX)-1,ba+af/2-(bi.heights[by]/2-(bA-bi.midY)))}if(by>0&&bz>0){bi.$self.grimage(by-1,bz-1,bb+au/2-bi.widths[bz]-(bi.widths[bz-1]/2-(bx-bi.midX))+1,ba+af/2-bi.heights[by]-(bi.heights[by-1]/2-(bA-bi.midY))+1)}if(by>0&&bz<7){bi.$self.grimage(by-1,bz+1,bb+au/2+bi.widths[bz+1]/2+(bx-bi.midX)-1,ba+af/2-bi.heights[by]-(bi.heights[by-1]/2-(bA-bi.midY))+1)}if(by<7&&bz<7){bi.$self.grimage(by+1,bz+1,bb+au/2+bi.widths[bz+1]/2+(bx-bi.midX)-1,ba+af/2+bi.heights[by+1]/2+(bA-bi.midY)-1)}if(by<7&&bz>0){bi.$self.grimage(by+1,bz-1,bb+au/2-bi.widths[bz]-(bi.widths[bz-1]/2-(bx-bi.midX))+1,ba+af/2+bi.heights[by+1]/2+(bA-bi.midY)-1)}}an.addMethod(bi,"drawMap",be);function bl(by,bA,bz,bx){if(aj[by][bA]){an.image(aj[by][bA],bz,bx)}else{if(!ab[by][bA]){aR(by,bA);an.rectMode(an.CENTER);an.fill(150);an.noStroke();an.rect(bz,bx,1000,1000)}}}an.addMethod(bi,"grimage",bl);function bt(){an.imageMode(an.CORNERS);an.image(bi.miniNYC,al,u,v,av);an.rectMode(an.CENTER);an.noFill();an.strokeWeight(1);an.stroke(aH[0]);an.rect(al+bi.miniMidX,u+bi.miniMidY,aK,aJ)}an.addMethod(bi,"drawMini",bt);function bn(){au=(aw-bb);af=(av-ba);aK=an.map(au,0,a6,0,284);aJ=an.map(af,0,aF,0,270);bi.midX=a6/2;bi.midY=aF/2;bi.miniMidX=an.map(bi.midX,0,a6,0,284);bi.miniMidY=an.map(bi.midY,0,aF,0,270);bi.widths=new Array(1018,1027,1017,1028,1017,1028,1017,1037);bi.heights=new Array(950,970,970,969,979,970,970,979);bi.allX=9207;bi.allY=8707;bi.$self.setMins()}an.addMethod(bi,"prep",bn);function bk(){if(an.mouseX>al&&an.mouseY>u&&an.mouseX<v&&an.mouseY<av){bi.miniPressed=true;bi.miniMidX=an.min(an.max(aK/2,an.mouseX-al),284-aK/2);bi.miniMidY=an.min(an.max(aJ/2,an.mouseY-u),270-aJ/2);bi.midX=an.map(bi.miniMidX,0,284,0,a6);bi.midY=an.map(bi.miniMidY,0,270,0,aF);bi.$self.setMins()}}an.addMethod(bi,"miniMousePressed",bk);function bm(){if(bi.miniPressed){bi.miniMidX=an.min(an.max(aK/2,an.mouseX-al),284-aK/2);bi.miniMidY=an.min(an.max(aJ/2,an.mouseY-u),270-aJ/2);bi.midX=an.map(bi.miniMidX,0,284,0,a6);bi.midY=an.map(bi.miniMidY,0,270,0,aF);bi.$self.setMins()}}an.addMethod(bi,"miniMouseDragged",bm);function bu(){bi.miniPressed=false}an.addMethod(bi,"miniMouseReleased",bu);function bp(){an.shapeMode(an.CENTER);aB=-1;for(var by=0;by<N.size();by++){var bz=N.get(by);if(bz.x<aX+10&&bz.x>C-10&&bz.y<aW+15&&bz.y>B-15){var bx=an.map(bz.x,C,aX,bb,aw);var bA=an.map(bz.y,B,aW,ba,av);if(an.mouseX<bx+15&&an.mouseX>bx-15&&an.mouseY<bA+15&&an.mouseY>bA-15){an.shape(bi.rapcircle,bx,bA,30,30);aB=by}else{an.shape(bi.rapper,bx,bA,20,30)}}}}an.addMethod(bi,"drawArtists",bp);function br(){an.imageMode(an.CENTER);curehover=-1;for(var by=0;by<G.size();by++){var bz=G.get(by);if(bz.x<aX+15&&bz.x>C-15&&bz.y<aW+24&&bz.y>B-24){var bx=an.map(bz.x,C,aX,bb,aw);var bA=an.map(bz.y,B,aW,ba,av);if(an.mouseX<bx+15&&an.mouseX>bx-15&&an.mouseY<bA+24&&an.mouseY>bA-24){curehover=by}an.image(bi.eventIcon,bx,bA)}}}an.addMethod(bi,"drawEvents",br);function bo(){bi.ox=an.mouseX;bi.oy=an.mouseY;bi.ocx=bi.midX;bi.ocy=bi.midY;bi.ominx=C;bi.ominy=B;bi.opressed=true}an.addMethod(bi,"mousePressed",bo);function bv(){if(bi.opressed){bi.midX=bi.ocx-(an.mouseX-bi.ox);bi.midY=bi.ocy-(an.mouseY-bi.oy);if(bi.midX>a6-au/2){bi.midX=a6-au/2}if(bi.midX<au/2){bi.midX=au/2}if(bi.midY<af/2){bi.midY=af/2}if(bi.midY>aF-af/2){bi.midY=aF-af/2}bi.miniMidX=an.map(bi.midX,0,a6,0,284);bi.miniMidY=an.map(bi.midY,0,aF,0,270);bi.$self.setMins()}}an.addMethod(bi,"mouseDragged",bv);function bf(){C=an.map(bi.midX-au/2,0,a6,531.749,531.749+853);aX=an.map(bi.midX+au/2,0,a6,531.749,531.749+853);B=an.map(bi.midY-af/2,0,aF,231.083,231.083+810);aW=an.map(bi.midY+af/2,0,aF,231.083,231.083+810)}an.addMethod(bi,"setMins",bf);function bw(){bi.opressed=false}an.addMethod(bi,"mouseReleased",bw);function bq(){bi.opressed=false}an.addMethod(bi,"mouseOut",bq);function bj(){bh();bi.NYC=an.loadImage("NYC.gif");bi.miniNYC=an.loadImage("miniNYC.png");bi.eventIcon=an.loadImage("eventicon.png");bi.ox=bi.oy=-1;aY();n();bi.rapper=an.loadShape("rapper.svg");bi.rapcircle=an.loadShape("bot.svg");bi.$self.prep()}function bs(){if(arguments.length===0){bj.apply(bi,arguments)}else{bh()}}bs.apply(null,arguments)}return bd})();an.Map=E;var L=(function(){function bd(){var bh=this;var bk={$upcast:bh};function bj(){k.apply(bk,arguments);if(!("$self" in bk)){an.extendClassChain(bk)}}bh.play=false;function bf(){return bh.play}an.addMethod(bh,"paused",bf);function bn(){if(bk.pressed()){bh.invert=true;bh.pressedHere=true}}an.addMethod(bh,"mousePressed",bn);function bl(){if(bk.pressed()&&bh.pressedHere){bh.invert=true}else{bh.invert=false}}an.addMethod(bh,"mouseDragged",bl);function bi(){if(bh.invert&&bh.pressedHere){if(az){o.togglePause()}bh.invert=false}bh.pressedHere=false}an.addMethod(bh,"mouseReleased",bi);function be(){if(az){if(o!=null&&o.playState==1){if(o.paused){if(!P){bh.play=true}}else{bh.play=false}}else{bh.play=true}}}an.addMethod(bh,"update",be);function bm(){if(bh.invert){an.fill(255);an.noStroke()}else{an.noFill();if(bk.pressed()){an.stroke(255)}else{an.noStroke()}}an.rect(bh.x-bh.hw,bh.y-bh.hh,bh.x+bh.hw,bh.y+bh.hh);if(bh.invert){an.fill(0);an.stroke(255)}else{an.fill(255);an.noStroke()}if(bh.play){an.triangle(bh.x-bh.hw/3,bh.y-bh.hh/2,bh.x-bh.hw/3,bh.y+bh.hh/2,bh.x+bh.hw/2,bh.y)}else{an.rect(bh.x-bh.hw/3,bh.y-bh.hh/2,bh.x-1,bh.y+bh.hh/2);an.rect(bh.x+bh.hw/3,bh.y-bh.hh/2,bh.x+1,bh.y+bh.hh/2)}}an.addMethod(bh,"draw",bm);function bo(bq,bs,bp,br){bj(bq,bs,bp,br);bh.play=true}function bg(){if(arguments.length===4){bo.apply(bh,arguments)}else{bj()}}bg.apply(null,arguments)}an.extendStaticMembers(bd,k);bd.$base=k;return bd})();an.Play=L;var T=(function(){function bd(){var bf=this;var bi={$upcast:bf};function bh(){k.apply(bi,arguments);if(!("$self" in bi)){an.extendClassChain(bi)}}bf.invert=false;bf.pressed=false;function bl(){if(bi.pressed()){bf.invert=true;bf.pressedHere=true}}an.addMethod(bf,"mousePressed",bl);function bj(){if(bi.pressed()&&bf.pressedHere){bf.invert=true}else{bf.invert=false}}an.addMethod(bf,"mouseDragged",bj);function bg(){if(bf.invert&&bf.pressedHere){a4();bf.invert=false}bf.pressedHere=false}an.addMethod(bf,"mouseReleased",bg);function bk(){if(bf.invert){an.fill(255);an.noStroke()}else{an.noFill();if(bi.pressed()){an.stroke(255)}else{an.noStroke()}}an.rect(bf.x-bf.hw,bf.y-bf.hh,bf.x+bf.hw,bf.y+bf.hh);if(bf.invert){an.fill(0);an.stroke(255)}else{an.fill(255);an.noStroke()}an.rect(bf.x-3,bf.y-bf.hh/2,bf.x-8,bf.y+bf.hh/2);an.triangle(bf.x,bf.y-bf.hh/2,bf.x,bf.y+bf.hh/2,bf.x+bf.hw/2,bf.y)}an.addMethod(bf,"draw",bk);function bm(bo,bq,bn,bp){bh(bo,bq,bn,bp);bf.invert=false}function be(){if(arguments.length===4){bm.apply(bf,arguments)}else{bh()}}be.apply(null,arguments)}an.extendStaticMembers(bd,k);bd.$base=k;return bd})();an.Forward=T;var x=(function(){function bd(){var bj=this;function bl(){an.extendClassChain(bj)}bj.panel=a5;bj.margin=10;bj.slant=2;bj.num=0;bj.mouseMainPaneControl=-1;bj.mouseSort=-1;bj.mouseFilter=0;bj.genreFilter=0;bj.mouseOnTitle=0;bj.mouseGenre=-1;bj.colorIcon=null;bj.sortIcon=null;bj.names=[" Current Info"," Color Mode","Sorting"];bj.currentColor=0;function bm(){if(!j){bj.$self.printNoSong()}else{bj.$self.printTopSongs()}bj.$self.drawControl()}an.addMethod(bj,"draw",bm);function bn(){if(bj.mouseMainPaneControl>=0){bj.panel=bj.mouseMainPaneControl}else{if(bj.mouseSort>=0){bc=bj.mouseSort;aQ()}else{if(bj.mouseFilter){aO=++aO%2;if(!H){aQ()}}else{if(bj.genreFilter){H=!H;if(H){a7=d}else{a7=Q}if(az){o.stopSong();az=false}aQ()}else{if(bj.mouseGenre>=0){aT=bj.mouseGenre;if(H){aQ()}}}}}}}an.addMethod(bj,"mousePressed",bn);function bk(){}an.addMethod(bj,"mouseReleased",bk);function bo(){an.strokeWeight(2);an.stroke(255);an.textSize(15);an.line(al,ak,v,ak);an.line(al,aN,v,aN);an.line(al,ak,al,u-1);an.line(v+1,ak,v+1,u-1);an.rectMode(an.CORNERS);an.noFill();an.rect(al,av,v+1,u);for(var bp=0;bp<5;bp++){an.line(al+J*(bp+1),ak,al+J*(bp+1),aN-1)}an.imageMode(an.CORNERS);an.image(s,al,ak,al+J,aN);an.image(t,al+J*2,ak,al+J*3,aN);an.image(a2,al+J,ak,al+J*2,aN);an.image(ap,al+J*3,ak,al+J*4,aN);an.image(ae,al+J*4,ak,al+J*5,aN);an.ellipseMode(an.CENTER_RADIUS);an.noStroke();bj.mouseMainPaneControl=-1;an.stroke(255);an.noFill();if(an.mouseX>al&&an.mouseY>ak&&an.mouseY<aN&&an.mouseX<al+J*5){for(var bp=0;bp<5;bp++){if(an.mouseX<al+J*(bp+1)){an.rect(al+J*bp+2,ak+1,al+J*(bp+1)-2,aN-2);an.textAlign(an.LEFT,an.BASELINE);an.textSize(16);an.fill(255);curMenu=bp;bj.$self.title(al,ak-7);bj.mouseMainPaneControl=bp;break}}}else{curMenu=-1}}an.addMethod(bj,"drawControl",bo);function bg(bp,bq){switch(curMenu){case 0:an.text("Artist Info",bp,bq);break;case 1:an.text("Heart Artist",bp,bq);break;case 2:an.text("Artist's Facebook Page",bp,bq);break;case 3:an.text("View Current Song Video",bp,bq);break;case 4:an.text("Tweet About Song",bp,bq);break}}an.addMethod(bj,"title",bg);function bf(){an.textAlign(an.LEFT,an.TOP);an.textSize(22);an.fill(aH[2]);i(j.name,al+10,aN+10,200,0,22);an.fill(255);an.textSize(16);var bq=j.topTracks.length;V=-1;for(var bp=0;bp<bq;bp++){if(bp==at){an.fill(aH[2]);i(j.topTracks[bp].title,al+20,aN+35+bp*22,250,aH[2],30);an.fill(255)}else{if(an.mouseX>al+20&&an.mouseY<aN+35+(bp+1)*22&&an.mouseY>aN+35+bp*22){an.fill(aH[2]);i(j.topTracks[bp].title,al+20,aN+35+bp*22,250,aH[2],30);V=bp;an.fill(255)}else{i(j.topTracks[bp].title,al+20,aN+35+bp*22,250,an.color(255),30)}}}}an.addMethod(bj,"printTopSongs",bf);function bi(){an.textAlign(an.LEFT);an.fill(255);an.textSize(16);an.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",al+20,aN+35,v-al-40,aV-aN)}an.addMethod(bj,"printNoSong",bi);function be(bq,bp){bl();al=bq;aN=bp;J=57;ak=aN-J;v=S-aD;u=av-270;bj.num=bj.names.length;an.textSize(16)}function bh(){if(arguments.length===2){be.apply(bj,arguments)}else{bl()}}bh.apply(null,arguments)}return bd})();an.SidePane=x;var p=(function(){function bd(){var bj=this;function bh(){an.extendClassChain(bj)}bj.play=null;bj.ffwd=null;bj.pressedInSeekBar=false;bj.onVol=false;bj.onVolGen=false;bj.volDragged=false;bj.songPausedToBeginWith=false;bj.stillWithinSeekBar=false;bj.totTime=null;bj.total=0;function bg(){if(az){an.rectMode(an.CORNERS);bj.play.update();bj.play.draw();bj.ffwd.draw();bj.$self.drawSeekBar();bj.$self.drawSongInfo();bj.$self.drawVolume();if(bj.onVolGen){bj.$self.drawVolumeSetter()}an.rectMode(an.CENTER);an.ellipseMode(an.CENTER_RADIUS)}}an.addMethod(bj,"draw",bg);function bf(){an.textAlign(an.LEFT,an.TOP);an.textSize(20);var bz=aH[2];an.fill(bz);var bA=0,bB=0;if(an.textWidth(j.topTracks[at].title+" by "+j.name)<=(ar-50-bb)){bA=bB=S}else{if(an.textWidth(j.topTracks[at].title)>(ar-50-bb)/2-16&&an.textWidth(j.name)>(ar-50-bb)/2-16){bA=bB=(ar-50-bb)/2-16}else{if(an.textWidth(j.topTracks[at].title)>an.textWidth(j.name)){bB=S;bA=ar-50-bb-an.textWidth(o.artist+" by ")}else{bA=S;bB=ar-50-bb-an.textWidth(j.topTracks[at].title+" by ")}}}i(j.topTracks[at].title,bb,h+37,bA,bz,24);i(j.name,bb+an.textWidth(" by ")+an.min(bA,an.textWidth(j.topTracks[at].title)),h+37,bB,bz,24);an.fill(255);an.text(" by ",bb+an.min(bA,an.textWidth(j.topTracks[at].title)),h+37)}an.addMethod(bj,"drawSongInfo",bf);function bm(){bj.play.mousePressed();bj.ffwd.mousePressed();bj.$self.checkSeekBar();bj.$self.checkVol()}an.addMethod(bj,"mousePressed",bm);function bv(){bj.play.mouseDragged();bj.ffwd.mouseDragged();bj.$self.dragSeekBar();bj.$self.dragVol()}an.addMethod(bj,"mouseDragged",bv);function bw(){bj.play.mouseReleased();bj.ffwd.mouseReleased();bj.$self.releaseSeekBar();bj.$self.releaseVol()}an.addMethod(bj,"mouseReleased",bw);function bn(){if(an.mouseX>ar-10&&an.mouseX<ar+2&&an.mouseY>h+44&&an.mouseY<h+56){return true}return false}an.addMethod(bj,"onVolume",bn);function bx(){if(an.mouseX>ar-45&&an.mouseX<ar+20&&an.mouseY>h+15&&an.mouseY<h+85){return true}return false}an.addMethod(bj,"onVolumeSetter",bx);function be(){if(bj.$self.onVolume()){bj.onVol=true;an.stroke(255)}else{an.noStroke();bj.onVol=false}an.fill(255);an.triangle(ar-10,h+50,ar,h+43,ar,h+57);an.rect(ar-10,h+53,ar-3,h+47);an.stroke(255);an.strokeWeight(2);an.noFill();if(!a8){if(X>80){an.arc(ar+6,h+50,12,12,-(an.PI/3),an.PI/3)}if(X>60){an.arc(ar+5,h+50,9,9,-(an.PI/3),an.PI/3)}if(X>40){an.arc(ar+4,h+50,6,6,-(an.PI/3),an.PI/3)}if(X>20){an.arc(ar+3,h+50,3,3,-(an.PI/3),an.PI/3)}}else{an.stroke(aH[0]);an.line(ar-9,h+42,ar+2,h+57)}if(bj.$self.onVolumeSetter()){bj.onVolGen=true}else{if(!bj.volDragged){bj.onVolGen=false}}}an.addMethod(bj,"drawVolume",be);function br(){if(bj.onVol){bj.$self.toggleMute()}else{if(bj.onVolGen&&an.mouseX>ar-40&&an.mouseX<ar-20&&an.mouseY>h+20&&an.mouseY<h+80){bj.volDragged=true;X=(h+80-an.mouseY)/0.6;o.setVolume(X)}}}an.addMethod(bj,"checkVol",br);function by(){if(bj.volDragged){if(an.mouseY>h+80){X=0}else{if(an.mouseY<h+20){X=100}else{X=(h+80-an.mouseY)/0.6}}o.setVolume(X)}}an.addMethod(bj,"dragVol",by);function bq(){if(bj.volDragged){bj.volDragged=false}}an.addMethod(bj,"releaseVol",bq);function bl(){an.stroke(255);an.strokeWeight(2);an.fill(0);an.rect(ar-35,h+20,ar-25,h+80);if(X>0){an.fill(aH[2]);an.noStroke();an.rect(ar-34,h+79,ar-26,h+81-X*0.6)}}an.addMethod(bj,"drawVolumeSetter",bl);function bi(){o.toggleMute();a8=!a8}an.addMethod(bj,"toggleMute",bi);function bs(){if(az){if(an.mouseX>a3&&an.mouseX<aw-10-ai&&an.mouseY>h+40&&an.mouseY<h+60){P=true;bj.stillWithinSeekBar=true;if(o.paused){bj.songPausedToBeginWith=true}else{bj.songPausedToBeginWith=false}o.pause()}}}an.addMethod(bj,"checkSeekBar",bs);function bu(){if(az){if(P){if(an.mouseX>a3&&an.mouseX<aw-10-ai&&an.mouseY>h+40&&an.mouseY<h+60){var bA=0;if(o!=null&&o.readyState==1){bA=o.durationEstimate}else{if(o!=null&&o.readyState==3){bA=o.duration}}var bz=an.__int_cast(an.map(an.mouseX,a3,aw-10-ai,0,bA));if(!bj.songPausedToBeginWith){o.resume()}o.setPosition(bz)}P=false;bj.stillWithinSeekBar=false;if(!bj.songPausedToBeginWith){o.resume()}}}}an.addMethod(bj,"releaseSeekBar",bu);function bo(){if(az){if(P){if(an.mouseX>a3&&an.mouseX<aw-10-ai&&an.mouseY>h+40&&an.mouseY<h+60){bj.stillWithinSeekBar=true}else{bj.stillWithinSeekBar=false}}}}an.addMethod(bj,"dragSeekBar",bo);function bp(){an.stroke(255);an.strokeWeight(3);if(o!=null&&o.readyState==1){an.strokeWeight(1);an.line(a3,h+50,aw-10-ai,h+50);an.strokeWeight(3);var bz=an.map(o.bytesLoaded,0,o.bytesTotal,a3,aw-10-ai);if(bz>=0){an.line(a3,h+50,bz,h+50)}}else{an.line(a3,h+50,aw-10-ai,h+50)}if(o!=null&&o.readyState==1||o.readyState==3){var bA=null;if(!P||!bj.stillWithinSeekBar){if(o.readyState==1){bj.total=o.durationEstimate;bj.totTime=aS(bj.total/1000)}else{if(o.readyState==3){bj.total=o.duration;bj.totTime=aS(bj.total/1000)}}bA=aS(o.position/1000);var bz=an.map(o.position,0,bj.total,a3,aw-10-ai);if(bz>=0){an.line(bz,h+40,bz,h+60)}}else{an.line(an.mouseX,h+40,an.mouseX,h+60);bA=aS(an.map(an.mouseX,a3,aw-10-ai,0,bj.total)/1000)}an.fill(255);an.textSize(15);an.textAlign(an.LEFT,an.CENTER);an.text(bA+"/"+bj.totTime,aw-ai,h+50)}an.strokeWeight(1)}an.addMethod(bj,"drawSeekBar",bp);function bk(){bh();ai=an.textWidth("0:00/0:00");a3=aw-10-ai-S/e*150;bj.play=new L(a3-100,h+50,20,10);bj.ffwd=new T(a3-50,h+50,20,10);ar=a3-150;an.textSize(15)}function bt(){if(arguments.length===0){bk.apply(bj,arguments)}else{bh()}}bt.apply(null,arguments)}return bd})();an.Current=p;var am=(function(){function bd(){var bj=this;function bl(){an.extendClassChain(bj)}function bi(br){$("#popup-content").attr("src",br);$("#popup-url").attr("href",br);$("#center").hide();$("#popup").show()}function bo(bs){var br="<table><tr>";$.each(bs,function(bt,bu){br+="<td class='square-td'><div class='square' data-url='"+bu.url+"'><h2>"+bu.site+"</h2><p>"+bn(bu.text)+"</p></div></td>";if(bt==8){br+="</tr>";return false}else{if((bt+1)%3==0){br+="</tr><tr>"}}});$("#biographies").html(br)}function bn(br){return br.substr(0,250)+"..."}function bh(bs){var br="<table><tr>";$.each(bs,function(bt,bu){br+="<td class='square-td'><div class='square' data-url='"+bu.url+"'><h2>"+bu.name+"</h2><p>"+bn(bu.summary)+"</p></div></td>";if(bt==8){br+="</tr>";return false}else{if((bt+1)%3==0){br+="</tr><tr>"}}});$("#blogs").html(br)}function bq(br){}function bp(bs){var br="<table><tr>";$.each(bs,function(bt,bu){br+="<td class='square-td'><div class='square' data-url='"+bu.url+"'><h2>"+bu.name+"</h2><p>"+bn(bu.summary)+"</p></div></td>";if(bt==8){br+="</tr>";return false}else{if((bt+1)%3==0){br+="</tr><tr>"}}});$("#news").html(br)}function bm(bs){var br="<table><tr>";$.each(bs,function(bt,bu){br+="<td class='square-td'><div class='square video' data-url='"+bu.url+"'><h2>"+bu.title+"</h2><img class='video-thumbnail' src='"+bu.image_url+"'></div></td>";if(bt==8){br+="</tr>";return false}else{if((bt+1)%3==0){br+="</tr><tr>"}}});$("#videos").html(br)}function bg(br){$("#center").children().css("display","none");$("#"+br).css("display","block")}bj.canvas=document.getElementById("canvas");bj.selectDiv=document.getElementById("artist-info");bj.selectDivHeight=635;bj.selectDivWidth=1158;bj.selectDivX=9;bj.selectDivY=9;function bk(br){bj.selectDiv.style.width=bj.selectDivWidth;bj.selectDiv.style.height=bj.selectDivHeight;bj.selectDiv.style.top=bj.selectDivY+"px";bj.selectDiv.style.zIndex=1;$("#center, #popup, #popup-nav, #popup-content").css("width",bj.selectDivWidth+"px");$("#popup-content").css("height",bj.selectDivHeight+"px");$.getJSON("http://rapcities.com/getArtistInfo?id="+br,function(bs){bo(bs.biographies);bh(bs.blogs);bq(bs.images);bp(bs.news);bm(bs.videos);$(".square").hover(function(){$(this).addClass("square-hover")},function(){$(this).removeClass("square-hover")}).click(function(){bi($(this).data("url"))});$("#close").click(function(){$("#artist-info").css("z-index","-1")})});$(".type").click(function(){bg($(this).data("type"));$(".type").removeClass("selected-type");$(this).addClass("selected-type");$("#popup").hide();$("#center").show()}).hover(function(){$(this).addClass("hover-type")},function(){$(this).removeClass("hover-type")});$("#popup-close").click(function(){$("#popup").hide();$("#center").show()})}an.addMethod(bj,"showArtistInfo",bk);function be(){bl()}function bf(){if(arguments.length===0){be.apply(bj,arguments)}else{bl()}}bf.apply(null,arguments)}return bd})();an.ArtistInfo=am;var az=false;var aE=null;var aH=null;var m=null;var M=null;var A=null;var Z=null;var l=null;var W=null;var aL=null;var w=0;var ax=1;var f=2;var I=0;var d=1;var Q=2;var bc=w;var K=false;var a7=Q;var aO=0;var o=null;var aj=null,ab=null;var bb=0,ba=0,av=0,aw=0;var ay=0;var z=1;var S=0,aV=0,h=0,F=0;var a6=0,aF=0;var Y=null;var aD=0,aC=0,e=0,a1=0;function aI(){S=an.max(1300,$(window).width());aV=an.max(800,$(window).height());if(S==1024||aV==800){$("body").css("overflow","visible")}e=1920;a1=1000;aD=S/e*300;aC=aV/a1*300;bb=aD;ba=aC;aw=S-aD-294;av=aV-30;h=ba-100;F=bb-10;aF=7757;a6=8189;ag=new an.ArrayList();Y=an.loadImage("banner.png");an.size(S,aV);an.frameRate(30);an.smooth();an.rectMode(an.CORNERS);an.ellipseMode(an.CENTER_RADIUS);az=false;aE=an.createFont("Arial",13);an.textFont(aE);aq();songs=new an.ArrayList();A=new an.HashMap();l=new x(aw+10,ba);Z=new p();W=new E();aj=new Array(8);ab=new Array(8);for(var be=0;be<8;be++){aj[be]=new Array(8);ab[be]=new Array(8);for(var bd=0;bd<8;bd++){ab[be][bd]=false}}aR(4,4);aL=new am();t=an.loadImage("facebook");ap=an.loadImage("youtube");s=an.loadImage("info");a2=an.loadImage("heart");ae=an.loadImage("twitter")}an.setup=aI;function b(be,bd){if(be!=S||bd!=aV){S=be;aV=bd;aD=S/e*300;aC=aV/a1*300;bb=aD;ba=aC;aw=S-aD-294;av=aV-30;h=ba-100;F=bb-10;an.size(S,aV);au=(aw-bb);af=(av-ba);al=aw+10;aN=ba;ak=aN-J;v=S-aD;u=av-270;aK=an.map(au,0,a6,0,284);aJ=an.map(af,0,aF,0,270);W.setMins();a3=aw-10-ai-S/e*150;Z.play.newPos(a3-100,h+50);Z.ffwd.newPos(a3-50,h+50);ar=a3-150}}an.setUpSize=b;var t=null,ap=null,a0=null,s=null,a2=null,aa=null,ae=null;function aq(){an.colorMode(an.RGB);aH=an.createJavaArray("$p.color",[10]);m=an.createJavaArray("$p.color",[10]);aH[0]=an.color(255,0,0);aH[1]=an.color(255,103,0);aH[2]=an.color(255,182,0);aH[3]=an.color(231,255,0);aH[4]=an.color(0,255,18);aH[5]=an.color(0,255,212);aH[6]=an.color(0,104,155);aH[7]=an.color(149,0,255);aH[8]=an.color(248,0,255);aH[9]=an.color(255,3,141);m[0]=an.color(0,153,153);m[1]=an.color(100,168,209);m[2]=an.color(133,133,232);m[3]=an.color(230,113,255);m[4]=an.color(255,128,157);m[5]=an.color(255,176,128);m[6]=an.color(255,195,100);m[7]=an.color(249,243,140);m[8]=an.color(222,244,130);m[9]=an.color(204,255,123)}an.setUpColors=aq;function aA(){W.draw();an.imageMode(an.CORNER);an.image(Y,0,0,S,aV);Z.draw();l.draw();if(aB>-1){a9(aB)}if(curehover>-1){aP(curehover)}}an.draw=aA;var N=new an.ArrayList();var G=new an.ArrayList();var j=null;function aY(){N.clear();var bd="http://rapcities.com/getArtists";if(bc){bd+="&sort="+bc}if(H){bd+="&genre="+aT}$.getJSON(bd,function(bf){if(bf!=null){var bg=bf.length;for(var be=0;be<bg;be++){bf[be].X=an.map(bf[be].x,725.056,935.131,1,2000);bf[be].Y=an.map(bf[be].y,701.865,850.945,1,1422);N.add(bf[be])}}})}an.setUpArtists=aY;function n(){G.clear();var be=an.__split(window.location.pathname,(new an.Character("/")));var bd=null;if(be.length>0){if(be.length<3){bd=be[1]}else{bd=be[3]}$.getJSON("http://rapcities.com/getEvents?sponsor="+bd,function(bg){if(bg!=null){var bh=bg.length;for(var bf=0;bf<bh;bf++){bg[bf].X=an.map(bg[bf].x,725.056,935.131,1,2000);bg[bf].Y=an.map(bg[bf].y,701.865,850.945,1,1422);G.add(bg[bf])}}})}}an.setUpEvents=n;var C=0,B=0,aX=0,aW=0;var au=0,af=0,aK=0,aJ=0;var aB=-1;function aR(be,bd){var bf=null;if((be==0)||(be==1&&bd<1)){bf="0";bf+=String(be*8+bd+1)+".grid"}else{bf=String(be*8+bd+1)+".grid"}ab[be][bd]=true;aj[be][bd]=an.loadImage(bf)}an.loadMapPiece=aR;function a9(be){var bd=N.get(be).name;an.textSize(18);var bf=an.textWidth(bd);an.stroke(aH[2]);an.fill(0);an.rectMode(an.CORNERS);an.rect(an.mouseX,an.mouseY-33,an.mouseX+bf+12,an.mouseY-7,10);an.fill(aH[2]);an.textAlign(an.LEFT,an.TOP);an.text(bd,an.mouseX+6,an.mouseY-30)}an.drawHoverInfo=a9;function aP(be){var bd=G.get(be).title;an.textSize(18);var bf=an.textWidth(bd);an.stroke(aH[6]);an.fill(0);an.rectMode(an.CORNERS);an.rect(an.mouseX,an.mouseY-33,an.mouseX+bf+12,an.mouseY-7,10);an.fill(aH[6]);an.textAlign(an.LEFT,an.TOP);an.text(bd,an.mouseX+6,an.mouseY-30)}an.drawEventInfo=aP;function y(){if(aB>=0){j=N.get(aB);aU(j.topTracks[0].id);at=0}else{if(curehover>=0){ao();O();o.pause()}else{if(curMenu>=0){switch(curMenu){case 0:aL.showArtistInfo(j.echoID);return;case 1:case 4:case 2:an.link(j.facebook,"_new");return;case 3:ao();q();o.pause();return}}else{if(V>=0){at=V;aU(j.topTracks[V].id)}}}}}an.mouseClicked=y;function aU(bd){$.getJSON("http://rapcities.com/getTrack?id="+bd,function(be){if(az){ah()}aZ(be.url)})}an.getSong=aU;function aZ(bd){o=soundManager.createSound({id:bd,url:bd,autoLoad:true,autoPlay:true,volume:X,onfinish:function(){ad()}});az=true;if(a8){o.mute()}}an.startSong=aZ;function ah(){az=false;o.stop();o.unload();o.destruct()}an.stopSong=ah;function aM(){if(an.mouseY<h+145-70){Z.mousePressed()}else{if(an.mouseX>aw){if(an.mouseY<u){l.mousePressed()}else{W.miniMousePressed()}}else{if(an.mouseX>bb&&an.mouseY>ba&&an.mouseY<av){W.mousePressed()}}}}an.mousePressed=aM;function aG(){Z.mouseDragged();W.mouseDragged();W.miniMouseDragged()}an.mouseDragged=aG;function D(){W.mouseOut()}an.mouseOut=D;function a(){Z.mouseReleased();W.mouseReleased();W.miniMouseReleased()}an.mouseReleased=a;var g=-1;var ac=1;var c=0;var R=true;function aQ(){for(var bd=songs.size()-1;bd>-1;bd--){if(bd==V&&az){songs.get(bd).stopSong()}songs.remove(bd)}V=-1;o=null}an.resetSongs=aQ;function ad(){ah();if(at<j.topTracks.length-1){at++;aU(j.topTracks[at].id)}else{a4()}}an.createNext=ad;var ag=null;function a4(){var bf=false;for(var bd=0;bd<ag.size();bd++){if(ag.get(bd)==j.name){bf=true;break}}if(!bf){ag.add(j.name)}for(var bd=0;bd<N.size();bd++){var be=N.get(bd);if(be.x>C&&be.x<aX&&be.y>B&&be.y<aW){if(!an.__contains(ag,be.name)){j=be;aU(j.topTracks[0].id);at=0}}}}an.nextArtist=a4;function U(be,bd){this.length=be;this.index=bd}function i(bg,bk,bi,bj,bd,bn){if(an.textWidth(bg)>bj){var bl=A.get(bg+an.textWidth(bg));if(bl==null){bl=new U(0,0);A.put(bg+an.textWidth(bg),bl)}var bf=bl.index;var bh=bg.length;if(bl.length>=an.textWidth(bg.charAt(bf))){if(bf<bh-1){bl.index++;bf++;bl.length=0}else{bl.index=bf=0;bl.length=-40}}var bm=an.textWidth(bg.charAt(bf))-bl.length;bf++;while(bm<bj&&bf<bh){bm+=an.textWidth(bg.charAt(bf));bf++}an.text(bg.substring(bl.index,bf),bk-bl.length,bi);if(bf==bh){bm+=40;var be=0;while(bm<bj){bm+=an.textWidth(bg.charAt(be));be++}an.text(bg.substring(0,be),bk+an.textWidth(bg.substring(bl.index,bf))-bl.length+40,bi)}an.noStroke();an.fill(0);an.rectMode(an.CORNERS);an.rect(bk-an.textWidth((new an.Character("W"))),bi+bn,bk,bi);an.rect(bk+bj,bi,bk+bj+an.textWidth((new an.Character("W"))),bi+bn);an.fill(bd);bl.length++;A.put(bg+an.textWidth(bg),bl)}else{an.text(bg,bk,bi)}}an.checkText=i;var a5=0;var r=1;var H=false;var aT=0;var ak=0,al=0,u=0,v=0,J=0,aN=0;var V=-1;var at=-1;var P=false;var X=50;var a8=false;var ai=0,a3=0,ar=0;function aS(bf){var be=an.__int_cast((bf%60));var bd=an.__int_cast(((bf%3600)/60));var bg=null;if(be==0){bg="00"}else{if(be<10){bg="0"+be}else{bg=be}}return(bd+":"+bg)}an.makeTime=aS;function ao(){if($("div#dialogWindow").dialog("isOpen")){$("div#dialogWindow").dialog("close")}else{$("div#dialogWindow").dialog("open")}}an.togglePlayer=ao;function O(){$("#ytplayer").html('<script type="text/javascript">var params={allowScriptAccess:"always"};var atts={id:"ytplayer"};var url="http://www.youtube.com/v/'+G.get(curehover).link+'?enablejsapi=1&playerapiid=ytplayer&version=3&autoplay=1&controls=1";swfobject.embedSWF(url,"ytplayer","350","300","8",null,null,params,atts);<\/script>')}an.loadEventVideo=O;function q(){$.ajax({type:"GET",dataType:"jsonp",url:"http://gdata.youtube.com/feeds/api/videos?q="+an.__replace(j.topTracks[at].title,/ /g,(new an.Character("+")))+"+"+an.__replace(j.name,/ /g,(new an.Character("+")))+"&v=2&alt=jsonc&max-results=1&format=5",success:function(be){if(be.data.items.length>0){var bd=be.data.items[0].id;$("#ytplayer").html('<script type="text/javascript">var params={allowScriptAccess:"always"};var atts={id:"ytplayer"};var url="http://www.youtube.com/v/'+bd+'?enablejsapi=1&playerapiid=ytplayer&version=3&autoplay=1&controls=1";swfobject.embedSWF(url,"ytplayer","350","300","8",null,null,params,atts);<\/script>')}else{$("#ytplayer").html("<p>Couldn't find this song on YouTube</p>")}}})}an.loadVideo=q})       
      );
});
</script>
<script type="text/javascript">
$(window).resize(function(){
	if($(window).width() < 1300 || $(window).height() < 800){
		var p = Processing.getInstanceById('canvas');
		p.setUpSize(Math.max($(window).width(),1300),Math.max(800,$(window).height()));
		$("body").css("overflow","visible");
	}
	else{
		var p = Processing.getInstanceById('canvas');
		p.setUpSize($(window).width(),$(window).height());
		$("body").css("overflow","hidden");
	}
});
</script>
  </head>
  <body bgcolor="Black">
    <div id="parent">
      <canvas id="canvas">
        <font size="10" color="white">Your browser doesn't support HTML5! Please
          and use the latest version of Mozilla Firefox or Google Chrome.</font>
      </canvas>
	<div id="dialogWindow" title="YouTube Player">
		<div id="ytplayer">
			<p>Oops! Seems like you don't have Flash Player 8+ and/or JavaScript enabled!</p>

		</div>
	</div>
      <div id='artist-info'>
        <div id="top">
          <div class='type' data-type='biographies'>Biographies</div>
          <div class='type' data-type='blogs'>Blogs</div>
          <div class='type' data-type='images'>Images</div>
          <div class='type' data-type='news'>News</div>
          <div class='type' data-type='videos'>Videos</div>
          <div class='type' id='close'>Close</div>
          <div class='clear'></div>
        </div>
        <div id="center">
          <div id="biographies"></div>
          <div id="blogs"></div>
          <div id="images"></div>
          <div id="news"></div>
          <div id="videos"></div>
        </div>
        <div id="popup">
          <div id="popup-nav">
            <a id="popup-close" href="#">Close</a>
            <a id="popup-url" href="#">Go to site</a>
          </div>
          <iframe id="popup-content" src="">
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </body>
</html>
