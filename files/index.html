<html>
  <head>
    <title>RapCities</title>
    <script type="text/javascript" src="processing-1.3.6.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	    <script type="text/javascript" src="soundmanager2.js"></script>
    <script type="text/javascript" src="http://xe-widgets.googlecode.com/svn-history/r10/trunk/widgets/xe_banner/skins/bannerSlider/js/slides.jquery.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
	<link rel="stylesheet" type="text/css" href="jquery-ui-1.8.18.custom.css" />
    <link rel='stylesheet' src="http://slidesjs.com/examples/images-with-captions/css/global.css">
    <style type="text/css">
      body {
        background-color: black;
        color: white;
		margin:0px;overflow:hidden;
      }
      h2 {
        font-size: 16px;
      }
      #canvas {
        /*width: 1158px;
        height: 635px;*/
        position: absolute;
        z-index: 0;
		/*left: 50%;
		margin-left:-479px;*/
		/*margin: auto;*/
      }
      #artist-info {
        position: absolute;
        z-index: -1;
        background-color: black;
        font: 15px Verdana, sans-serif;
		left: 50%;
		margin-left:-479px;
      }
      #top  {
        width: 700px;
        margin: 0 auto;
      }
      #top li {
        display: inline;
      }
      #center {
        float: left;
      }
      #popup {
        z-index: 2;
        float: left;
        display: none;
      }
      #popup a{
        color: white;
      }
      #popup-nav {
        height: 50px;
      }
      #popup-close {
        float: left;
      }
      #popup-url {
        float: right;
      }
      #center div {
        display: none;
      }
      #center div div {
        display: block;
      }
      td.square-td {
        width: 33%;
      }
      div.square {
        height: 166px;
        margin: 10px;
        text-overflow: ellipsis;
        overflow: hidden;
        padding: 12px;
      }
      div.square-hover {
        border: 2px solid white;
        padding: 10px;
      }
      .square a {
        text-decoration: underline;
        color: white;
      }
      .square p {
        font-size: 14px;
      }
      .type {
        float: left;
        width: 100px;
        height: 36px;
        padding-top: 16px;
        text-align: center;
        border: 2px solid white;
      }
      #close {
        font-weight: bold;
      }
      .selected-type {
        background-color: white;
        color: black;
      }
      .hover-type {
        background-color: white;
        color: black;
      }
      .never-hover-square {
        padding: 12px !important;
        border: none !important;
      }
      .square h2 {
        font-size: 16px;
        font-weight: bold;
      }
      .video {
        text-align: center;
      }
      .clear {
        clear: both;
      }
      iframe.popup {
        z-index: 2;
      }
      .video-thumbnail {
        width: 120px;
      }



      /* slides */
      .slides_container {
        width:570px;
        overflow:hidden;
        position:relative;
        display:none;
      }

      .slides_container div.slide {
        width:570px;
        display:block;
      }
	#dialogWindow{
		z-index:1;
		position:absolute;
		right:20px;
		top:350px;
	}
	#YouTubeP{
		z-index:1;
	}
	#parent{
		position:relative;
	}
    </style>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(ar){var k=(function(){function bl(){var bn=this;function bp(){ar.extendClassChain(bn)}bn.x=0;bn.y=0;bn.hw=0;bn.hh=0;bn.invert=false;bn.pressedHere=false;function bs(){return ar.mouseX>bn.x-bn.hw&&ar.mouseX<bn.x+bn.hw&&ar.mouseY>bn.y-bn.hh&&ar.mouseY<bn.y+bn.hh}ar.addMethod(bn,"pressed",bs);function bt(bv,bw){bn.x=bv;bn.y=bw}ar.addMethod(bn,"newPos",bt);function br(){}ar.addMethod(bn,"mousePressed",br);function bo(){}ar.addMethod(bn,"mouseReleased",bo);function bq(){}ar.addMethod(bn,"draw",bq);function bu(bw,by,bv,bx){bp();bn.x=bw;bn.y=by;bn.hw=bv;bn.hh=bx}function bm(){if(arguments.length===4){bu.apply(bn,arguments)}else{bp()}}bm.apply(null,arguments)}return bl})();ar.Button=k;var I=(function(){function bl(){var br=this;function bq(){ar.extendClassChain(br)}br.rapper=null;br.rapcircle=null;br.NYC=null;br.miniNYC=null;br.eventIcon=null;br.NYCx=1000;br.NYCy=711;br.ox=0;br.oy=0;br.ocx=0;br.ocy=0;br.allX=0;br.allY=0;br.widths=null;br.heights=null;br.ominx=0;br.ominy=0;br.miniMidX=0;br.miniMidY=0;br.midX=0;br.midY=0;br.minix=0;br.miniy=0;br.maxix=0;br.maxiy=0;br.opressed=false;br.miniPressed=false;br.once=false;function bp(){br.$self.drawMap();br.$self.drawArtists();br.$self.drawEvents();ar.fill(0);ar.noStroke();ar.rectMode(ar.CORNERS);br.$self.drawMini()}ar.addMethod(br,"draw",bp);function bn(){ar.imageMode(ar.CENTER);var bH=0;var bK=0;var bJ=0;for(bJ=0;bJ<8;bJ++){bH+=br.widths[bJ];if(bH>br.midX){break}}var bI=0;for(bI=0;bI<8;bI++){bK+=br.heights[bI];if(bK>br.midY){break}}br.$self.grimage(bI,bJ,0+aA/2-(br.widths[bJ]/2-(bH-br.midX)),0+aj/2-(br.heights[bI]/2-(bK-br.midY)));if(bI>0){br.$self.grimage(bI-1,bJ,0+aA/2-(br.widths[bJ]/2-(bH-br.midX)),0+aj/2-br.heights[bI]-(br.heights[bI-1]/2-(bK-br.midY))+1)}if(bJ>0){br.$self.grimage(bI,bJ-1,0+aA/2-br.widths[bJ]-(br.widths[bJ-1]/2-(bH-br.midX))+1,0+aj/2-(br.heights[bI]/2-(bK-br.midY)))}if(bI<7){br.$self.grimage(bI+1,bJ,0+aA/2-(br.widths[bJ]/2-(bH-br.midX)),0+aj/2+br.heights[bI+1]/2+(bK-br.midY)-1)}if(bJ<7){br.$self.grimage(bI,bJ+1,0+aA/2+br.widths[bJ+1]/2+(bH-br.midX)-1,0+aj/2-(br.heights[bI]/2-(bK-br.midY)))}if(bI>0&&bJ>0){br.$self.grimage(bI-1,bJ-1,0+aA/2-br.widths[bJ]-(br.widths[bJ-1]/2-(bH-br.midX))+1,0+aj/2-br.heights[bI]-(br.heights[bI-1]/2-(bK-br.midY))+1)}if(bI>0&&bJ<7){br.$self.grimage(bI-1,bJ+1,0+aA/2+br.widths[bJ+1]/2+(bH-br.midX)-1,0+aj/2-br.heights[bI]-(br.heights[bI-1]/2-(bK-br.midY))+1)}if(bI<7&&bJ<7){br.$self.grimage(bI+1,bJ+1,0+aA/2+br.widths[bJ+1]/2+(bH-br.midX)-1,0+aj/2+br.heights[bI+1]/2+(bK-br.midY)-1)}if(bI<7&&bJ>0){br.$self.grimage(bI+1,bJ-1,0+aA/2-br.widths[bJ]-(br.widths[bJ-1]/2-(bH-br.midX))+1,0+aj/2+br.heights[bI+1]/2+(bK-br.midY)-1)}}ar.addMethod(br,"drawMap",bn);function bu(bI,bK,bJ,bH){if(an[bI][bK]){ar.image(an[bI][bK],bJ,bH)}else{if(!af[bI][bK]){aY(bI,bK);ar.rectMode(ar.CENTER);ar.fill(150);ar.noStroke();ar.rect(bJ,bH,1000,1000)}}}ar.addMethod(br,"grimage",bu);function bC(){ar.imageMode(ar.CORNERS);ar.image(br.miniNYC,ap,w,x,av);ar.rectMode(ar.CENTER);ar.noFill();ar.strokeWeight(1);ar.stroke(aO[0]);ar.rect(ap+br.miniMidX,w+br.miniMidY,aR,aQ);ar.ellipseMode(ar.CENTER);ar.fill(aO[2]);ar.stroke(aO[2]);for(var bH=0;bH<R.size();bH++){var bI=R.get(bH);if(bI==j){ar.ellipse(ar.map(bI.x,531.749,531.749+853,ap,x),ar.map(bI.y,231.083,231.083+810,w,av),5,5)}else{ar.ellipse(ar.map(bI.x,531.749,531.749+853,ap,x),ar.map(bI.y,231.083,231.083+810,w,av),3,3)}}}ar.addMethod(br,"drawMini",bC);function bw(){aA=X;aj=a2;aR=ar.map(aA,0,bf,0,284);aQ=ar.map(aj,0,aL,0,270);br.midX=3095.5;br.midY=5033.5;br.miniMidX=ar.map(br.midX,0,bf,0,284);br.miniMidY=ar.map(br.midY,0,aL,0,270);br.widths=new Array(1018,1027,1017,1028,1017,1028,1017,1037);br.heights=new Array(950,970,970,969,979,970,970,979);br.allX=9207;br.allY=8707;br.$self.setMins()}ar.addMethod(br,"prep",bw);function bt(){if(ar.mouseX>ap&&ar.mouseY>w&&ar.mouseX<x&&ar.mouseY<av){br.miniPressed=true;br.miniMidX=ar.min(ar.max(aR/2,ar.mouseX-ap),284-aR/2);br.miniMidY=ar.min(ar.max(aQ/2,ar.mouseY-w),270-aQ/2);br.$self.miniToMaxi()}}ar.addMethod(br,"miniMousePressed",bt);function bv(){if(br.miniPressed){br.miniMidX=ar.min(ar.max(aR/2,ar.mouseX-ap),284-aR/2);br.miniMidY=ar.min(ar.max(aQ/2,ar.mouseY-w),270-aQ/2);br.$self.miniToMaxi()}}ar.addMethod(br,"miniMouseDragged",bv);function bm(){br.midX=ar.map(br.miniMidX,0,284,0,bf);br.midY=ar.map(br.miniMidY,0,270,0,aL);br.$self.setMins()}ar.addMethod(br,"miniToMaxi",bm);function bD(){br.miniPressed=false}ar.addMethod(br,"miniMouseReleased",bD);function bE(){if(ar.key==ar.CODED){switch(ar.keyCode){case (ar.UP):br.miniMidY=ar.max(br.miniMidY-1,aQ/2);br.$self.miniToMaxi();break;case (ar.DOWN):br.miniMidY=ar.min(br.miniMidY+1,270-aQ/2);br.$self.miniToMaxi();break;case (ar.LEFT):br.miniMidX=ar.max(br.miniMidX-1,aR/2);br.$self.miniToMaxi();break;case (ar.RIGHT):br.miniMidX=ar.min(br.miniMidX+1,284-aR/2);br.$self.miniToMaxi();break}}}ar.addMethod(br,"keyPressed",bE);function by(){ar.shapeMode(ar.CENTER);aH=-1;for(var bI=0;bI<R.size();bI++){var bK=R.get(bI);if(bK.x<a5+10&&bK.x>F-10&&bK.y<a3+15&&bK.y>D-15){var bH=ar.map(bK.x,F,a5,0,X);var bL=ar.map(bK.y,D,a3,0,a2);if(ar.mouseX<bH+15&&ar.mouseX>bH-15&&ar.mouseY<bL+15&&ar.mouseY>bL-15&&(ar.mouseX<ap||ar.mouseX>x||ar.mouseY<ao||ar.mouseY>av)){ar.shape(br.rapcircle,bH,bL,30,30);aH=bI}else{if(bK==j){ar.shape(br.rapcircle,bH,bL,30,30);ar.textSize(18);var bJ=ar.textWidth(j.name);ar.stroke(aO[2]);ar.fill(0);ar.rectMode(ar.CENTER);ar.rect(bH,bL-40,bJ+12,26,10);ar.fill(aO[2]);ar.textAlign(ar.LEFT,ar.TOP);ar.text(j.name,bH-bJ/2,bL-50)}else{ar.shape(br.rapper,bH,bL,20,30)}}}}}ar.addMethod(br,"drawArtists",by);function bA(){ar.imageMode(ar.CENTER);curehover=-1;for(var bI=0;bI<K.size();bI++){var bJ=K.get(bI);if(bJ.x<a5+15&&bJ.x>F-15&&bJ.y<a3+24&&bJ.y>D-24){var bH=ar.map(bJ.x,F,a5,0,X);var bK=ar.map(bJ.y,D,a3,0,a2);if(ar.mouseX<bH+15&&ar.mouseX>bH-15&&ar.mouseY<bK+24&&ar.mouseY>bK-24){curehover=bI}ar.image(br.eventIcon,bH,bK)}}}ar.addMethod(br,"drawEvents",bA);function bx(){br.ox=ar.mouseX;br.oy=ar.mouseY;br.ocx=br.midX;br.ocy=br.midY;br.ominx=F;br.ominy=D;br.opressed=true}ar.addMethod(br,"mousePressed",bx);function bG(){if(br.opressed){br.midX=br.ocx-(ar.mouseX-br.ox);br.midY=br.ocy-(ar.mouseY-br.oy);if(br.midX>bf-aA/2){br.midX=bf-aA/2}if(br.midX<aA/2){br.midX=aA/2}if(br.midY<aj/2){br.midY=aj/2}if(br.midY>aL-aj/2){br.midY=aL-aj/2}br.miniMidX=ar.map(br.midX,0,bf,0,284);br.miniMidY=ar.map(br.midY,0,aL,0,270);br.$self.setMins()}}ar.addMethod(br,"mouseDragged",bG);function bo(){F=ar.map(br.midX-aA/2,0,bf,531.749,531.749+853);a5=ar.map(br.midX+aA/2,0,bf,531.749,531.749+853);D=ar.map(br.midY-aj/2,0,aL,231.083,231.083+810);a3=ar.map(br.midY+aj/2,0,aL,231.083,231.083+810)}ar.addMethod(br,"setMins",bo);function bF(){br.opressed=false}ar.addMethod(br,"mouseReleased",bF);function bz(){br.opressed=false}ar.addMethod(br,"mouseOut",bz);function bs(){bq();br.NYC=ar.loadImage("NYC.gif");br.miniNYC=ar.loadImage("miniNYC.png");br.eventIcon=ar.loadImage("eventicon.png");br.ox=br.oy=-1;a6();o();br.rapper=ar.loadShape("rapper.svg");br.rapcircle=ar.loadShape("bot.svg");br.$self.prep()}function bB(){if(arguments.length===0){bs.apply(br,arguments)}else{bq()}}bB.apply(null,arguments)}return bl})();ar.Map=I;var P=(function(){function bl(){var bp=this;var bs={$upcast:bp};function br(){k.apply(bs,arguments);if(!("$self" in bs)){ar.extendClassChain(bs)}}bp.play=false;function bn(){return bp.play}ar.addMethod(bp,"paused",bn);function bv(){if(bs.pressed()){bp.invert=true;bp.pressedHere=true}}ar.addMethod(bp,"mousePressed",bv);function bt(){if(bs.pressed()&&bp.pressedHere){bp.invert=true}else{bp.invert=false}}ar.addMethod(bp,"mouseDragged",bt);function bq(){if(bp.invert&&bp.pressedHere){if(aF&&r==at){p.togglePause()}else{if(r==bh){if(a4.getPlayerState()==2){a4.playVideo()}else{a4.pauseVideo()}}}bp.invert=false}bp.pressedHere=false}ar.addMethod(bp,"mouseReleased",bq);function bm(){if(r==at&&aF){if(p!=null&&p.playState==1){if(p.paused){if(!T){bp.play=true}}else{bp.play=false}}else{bp.play=true}}else{if(r==bh){if(a4.getPlayerState()==2||a4.getPlayerState()==-1){if(!T){bp.play=true}}else{bp.play=false}}}}ar.addMethod(bp,"update",bm);function bu(){if(bp.invert){ar.fill(255);ar.noStroke()}else{ar.noFill();if(bs.pressed()){ar.stroke(255)}else{ar.noStroke()}}ar.rect(bp.x-bp.hw,bp.y-bp.hh,bp.x+bp.hw,bp.y+bp.hh);if(bp.invert){ar.fill(0);ar.noStroke()}else{ar.fill(255);ar.noStroke()}if(bp.play){ar.triangle(bp.x-bp.hw/2,bp.y-bp.hh/2,bp.x-bp.hw/2,bp.y+bp.hh/2,bp.x+bp.hw/2,bp.y)}else{ar.rect(bp.x-bp.hw/2,bp.y-bp.hh/2,bp.x-1,bp.y+bp.hh/2);ar.rect(bp.x+bp.hw/2,bp.y-bp.hh/2,bp.x+1,bp.y+bp.hh/2)}}ar.addMethod(bp,"draw",bu);function bw(by,bA,bx,bz){br(by,bA,bx,bz);bp.play=true}function bo(){if(arguments.length===4){bw.apply(bp,arguments)}else{br()}}bo.apply(null,arguments)}ar.extendStaticMembers(bl,k);bl.$base=k;return bl})();ar.Play=P;var Y=(function(){function bl(){var bn=this;var bq={$upcast:bn};function bp(){k.apply(bq,arguments);if(!("$self" in bq)){ar.extendClassChain(bq)}}bn.invert=false;bn.pressed=false;function bt(){if(bq.pressed()){bn.invert=true;bn.pressedHere=true}}ar.addMethod(bn,"mousePressed",bt);function br(){if(bq.pressed()&&bn.pressedHere){bn.invert=true}else{bn.invert=false}}ar.addMethod(bn,"mouseDragged",br);function bo(){if(bn.invert&&bn.pressedHere){bd();bn.invert=false}bn.pressedHere=false}ar.addMethod(bn,"mouseReleased",bo);function bs(){if(bn.invert){ar.fill(255);ar.noStroke()}else{if(bq.pressed()){ar.textSize(14);var bv=ar.textWidth("Next Artist");ar.fill(0);ar.stroke(255);ar.rect(bn.x-bv/2-3,bn.y+15,bn.x+bv/2+3,bn.y+35);ar.textAlign(ar.CENTER,ar.TOP);ar.fill(255);ar.text("Next Artist",bn.x,bn.y+17);ar.noFill()}else{ar.noStroke();ar.noFill()}}ar.rect(bn.x-bn.hw,bn.y-bn.hh,bn.x+bn.hw,bn.y+bn.hh);if(bn.invert){ar.fill(0);ar.noStroke()}else{ar.fill(255);ar.noStroke()}ar.rect(bn.x-3,bn.y-bn.hh/2,bn.x-6,bn.y+bn.hh/2);ar.triangle(bn.x,bn.y-bn.hh/2,bn.x,bn.y+bn.hh/2,bn.x+bn.hw/2+1,bn.y)}ar.addMethod(bn,"draw",bs);function bu(bw,by,bv,bx){bp(bw,by,bv,bx);bn.invert=false}function bm(){if(arguments.length===4){bu.apply(bn,arguments)}else{bp()}}bm.apply(null,arguments)}ar.extendStaticMembers(bl,k);bl.$base=k;return bl})();ar.Forward=Y;var z=(function(){function bl(){var br=this;function bt(){ar.extendClassChain(br)}br.panel=be;br.margin=10;br.slant=2;br.num=0;br.mouseMainPaneControl=-1;br.mouseSort=-1;br.mouseFilter=0;br.genreFilter=0;br.mouseOnTitle=0;br.mouseGenre=-1;br.colorIcon=null;br.sortIcon=null;br.names=[" Current Info"," Color Mode","Sorting"];br.currentColor=0;function bu(){br.$self.drawControl();if(!j){br.$self.printNoSong()}else{br.$self.printTopSongs()}}ar.addMethod(br,"draw",bu);function bv(){}ar.addMethod(br,"mousePressed",bv);function bs(){}ar.addMethod(br,"mouseReleased",bs);function bw(){ar.fill(0);ar.noStroke();ar.rectMode(ar.CORNERS);ar.rect(ap,ao,x,w);ar.strokeWeight(2);ar.stroke(255);ar.textSize(15);ar.line(ap,ao,x,ao);ar.line(ap,aU,x,aU);ar.line(ap,ao,ap,w-1);ar.line(x+1,ao,x+1,w-1);ar.rectMode(ar.CORNERS);ar.noFill();ar.rect(ap,av,x+1,w);for(var bx=0;bx<5;bx++){ar.line(ap+N*(bx+1),ao,ap+N*(bx+1),aU-1)}ar.imageMode(ar.CORNERS);ar.image(u,ap,ao,ap+N,aU);ar.image(v,ap+N*2,ao,ap+N*3,aU);ar.image(bb,ap+N,ao,ap+N*2,aU);ar.image(aw,ap+N*3,ao,ap+N*4,aU);ar.image(ai,ap+N*4,ao,ap+N*5,aU);ar.ellipseMode(ar.CENTER_RADIUS);ar.noStroke();br.mouseMainPaneControl=-1;ar.stroke(255);ar.noFill();if(ar.mouseX>ap&&ar.mouseY>ao&&ar.mouseY<aU&&ar.mouseX<ap+N*5){for(var bx=0;bx<5;bx++){if(ar.mouseX<ap+N*(bx+1)){ar.rect(ap+N*bx+2,ao+1,ap+N*(bx+1)-2,aU-2);ar.textAlign(ar.LEFT,ar.BASELINE);ar.textSize(16);ar.fill(255);curMenu=bx;br.$self.title(ap,ao-7);br.mouseMainPaneControl=bx;break}}}else{curMenu=-1}}ar.addMethod(br,"drawControl",bw);function bo(bx,by){switch(curMenu){case 0:ar.text("Artist Info",bx,by);break;case 1:ar.text("Heart Artist",bx,by);break;case 2:ar.text("Artist's Facebook Page",bx,by);break;case 3:ar.text("View Current Song Video",bx,by);break;case 4:ar.text("Tweet About Song",bx,by);break}}ar.addMethod(br,"title",bo);function bn(){ar.textAlign(ar.LEFT,ar.TOP);ar.textSize(22);ar.fill(aO[2]);i(j.name,ap+10,aU+10,200,0,22);ar.fill(255);ar.textSize(16);var by=j.topTracks.length;aa=-1;for(var bx=0;bx<by;bx++){if(bx==az){ar.fill(aO[2]);i(j.topTracks[bx].title,ap+20,aU+35+bx*22,250,aO[2],30);ar.fill(255)}else{if(ar.mouseX>ap+20&&ar.mouseY<aU+35+(bx+1)*22&&ar.mouseY>aU+35+bx*22){ar.fill(aO[2]);i(j.topTracks[bx].title,ap+20,aU+35+bx*22,250,aO[2],30);aa=bx;ar.fill(255)}else{i(j.topTracks[bx].title,ap+20,aU+35+bx*22,250,ar.color(255),30)}}}}ar.addMethod(br,"printTopSongs",bn);function bq(){ar.textAlign(ar.LEFT);ar.fill(255);ar.textSize(16);ar.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",ap+20,aU+35,x-ap-40,a2-aU)}ar.addMethod(br,"printNoSong",bq);function bm(by,bx){bt();ap=by;ao=bx;N=57;aU=ao+N;x=X-aJ;w=ao+555;av=w+270;br.num=br.names.length;ar.textSize(16)}function bp(){if(arguments.length===2){bm.apply(br,arguments)}else{bt()}}bp.apply(null,arguments)}return bl})();ar.SidePane=z;var q=(function(){function bl(){var br=this;function bp(){ar.extendClassChain(br)}br.play=null;br.ffwd=null;br.pressedInSeekBar=false;br.onVol=false;br.onVolGen=false;br.volDragged=false;br.songPausedToBeginWith=false;br.stillWithinSeekBar=false;br.totTime=null;br.total=0;function bo(){if(r==bh||(r==at&&aF)){ar.rectMode(ar.CORNERS);br.play.update();br.play.draw();br.ffwd.draw();br.$self.drawSeekBar();br.$self.drawVolume();if(br.onVolGen){br.$self.drawVolumeSetter()}ar.rectMode(ar.CENTER);ar.ellipseMode(ar.CENTER_RADIUS)}}ar.addMethod(br,"draw",bo);function bn(){ar.textAlign(ar.LEFT,ar.TOP);ar.textSize(20);var bH=aO[2];ar.fill(bH);var bI=0,bJ=0;if(ar.textWidth(j.topTracks[az].title+" by "+j.name)<=(ay-50-aM+20)){bI=bJ=X}else{if(ar.textWidth(j.topTracks[az].title)>(ay-50-aM+20)/2-16&&ar.textWidth(j.name)>(ay-50-aM+20)/2-16){bI=bJ=(ay-50-aM+20)/2-16}else{if(ar.textWidth(j.topTracks[az].title)>ar.textWidth(j.name)){bJ=X;bI=ay-50-aM+20-ar.textWidth(p.artist+" by ")}else{bI=X;bJ=ay-50-aM+20-ar.textWidth(j.topTracks[az].title+" by ")}}}i(j.topTracks[az].title,aM+20,h+37,bI,bH,24);i(j.name,aM+20+ar.textWidth(" by ")+ar.min(bI,ar.textWidth(j.topTracks[az].title)),h+37,bJ,bH,24);ar.fill(255);ar.text(" by ",aM+20+ar.min(bI,ar.textWidth(j.topTracks[az].title)),h+37)}ar.addMethod(br,"drawSongInfo",bn);function bu(){br.play.mousePressed();br.ffwd.mousePressed();br.$self.checkSeekBar();br.$self.checkVol()}ar.addMethod(br,"mousePressed",bu);function bD(){br.play.mouseDragged();br.ffwd.mouseDragged();br.$self.dragSeekBar();br.$self.dragVol()}ar.addMethod(br,"mouseDragged",bD);function bE(){br.play.mouseReleased();br.ffwd.mouseReleased();br.$self.releaseSeekBar();br.$self.releaseVol()}ar.addMethod(br,"mouseReleased",bE);function bv(){if(ar.mouseX>ay-10&&ar.mouseX<ay+2&&ar.mouseY>E-6&&ar.mouseY<E+6){return true}return false}ar.addMethod(br,"onVolume",bv);function bF(){if(ar.mouseX>ay-volS-10&&ar.mouseX<ay+20&&ar.mouseY>E-volY&&ar.mouseY<E+volY){return true}return false}ar.addMethod(br,"onVolumeSetter",bF);function bm(){if(br.$self.onVolume()){br.onVol=true;ar.stroke(255)}else{ar.noStroke();br.onVol=false}ar.fill(255);ar.triangle(ay-10,E,ay,E-7,ay,E+7);ar.rect(ay-10,E+3,ay-3,E-3);ar.stroke(255);ar.strokeWeight(2);ar.noFill();if(!bi){if(ac>80){ar.arc(ay+6,E,12,12,-(ar.PI/3),ar.PI/3)}if(ac>60){ar.arc(ay+5,E,9,9,-(ar.PI/3),ar.PI/3)}if(ac>40){ar.arc(ay+4,E,6,6,-(ar.PI/3),ar.PI/3)}if(ac>20){ar.arc(ay+3,E,3,3,-(ar.PI/3),ar.PI/3)}}else{ar.stroke(aO[0]);ar.line(ay-9,E-8,ay+2,E+7)}if(br.$self.onVolumeSetter()){br.onVolGen=true}else{if(!br.volDragged){br.onVolGen=false}}}ar.addMethod(br,"drawVolume",bm);function bz(){if(br.onVol){br.$self.toggleMute()}else{if(br.onVolGen&&ar.mouseX>ay-volS-5&&ar.mouseX<ay-volS+5&&ar.mouseY>E-volY&&ar.mouseY<E+volY){br.volDragged=true;ac=(E+volY-ar.mouseY)/volD;if(r==at){p.setVolume(ac)}else{if(r==bh){a4.setVolume(ac)}}}}}ar.addMethod(br,"checkVol",bz);function bG(){if(br.volDragged){if(ar.mouseY>E+volY){ac=0}else{if(ar.mouseY<E-volY){ac=100}else{ac=(E+volY-ar.mouseY)/volD}}if(r==at){p.setVolume(ac)}else{if(r==bh){a4.setVolume(ac)}}}}ar.addMethod(br,"dragVol",bG);function by(){if(br.volDragged){br.volDragged=false}}ar.addMethod(br,"releaseVol",by);function bt(){ar.stroke(255);ar.strokeWeight(2);ar.fill(0);ar.rect(ay-volS-5,E-volY,ay-volS+5,E+volY);if(ac>0){ar.fill(aO[2]);ar.noStroke();ar.rect(ay-volS-4,E+volY-1,ay-volS+4,E+volY+1-ac*volD)}}ar.addMethod(br,"drawVolumeSetter",bt);function bq(){if(r==at&&aF){p.toggleMute()}else{if(r==bh){if(a4.isMuted()){a4.unMute()}else{a4.mute()}}}bi=!bi}ar.addMethod(br,"toggleMute",bq);function bA(){if((r==at&&aF)||r==bh){if(ar.mouseX>bc&&ar.mouseX<seekRight&&ar.mouseY>E-10&&ar.mouseY<E+10){T=true;br.stillWithinSeekBar=true;if((r==at&&p.paused)||(r==bh&&a4.getPlayerState()==2)){br.songPausedToBeginWith=true}else{br.songPausedToBeginWith=false}if(r==at){p.pause()}else{a4.pauseVideo()}}}}ar.addMethod(br,"checkSeekBar",bA);function bC(){if(r==bh||(r==at&&aF)){if(T){if(ar.mouseX>bc&&ar.mouseX<seekRight&&ar.mouseY>E-10&&ar.mouseY<E+10){var bI=0;if(r==at){if(p!=null&&p.readyState==1){bI=p.durationEstimate}else{if(p!=null&&p.readyState==3){bI=p.duration}}var bH=ar.__int_cast(ar.map(ar.mouseX,bc,seekRight,0,bI));if(!br.songPausedToBeginWith){p.resume()}p.setPosition(bH)}else{var bH=ar.__int_cast(ar.map(ar.mouseX,bc,seekRight,0,a4.getDuration()));a4.seekTo(bH,true);if(!br.songPausedToBeginWith){a4.playVideo()}}}T=false;br.stillWithinSeekBar=false;if(!br.songPausedToBeginWith){if(r==at){p.resume()}else{a4.playVideo()}}}}}ar.addMethod(br,"releaseSeekBar",bC);function bw(){if(r==bh||(r==at&&aF)){if(T){if(ar.mouseX>bc&&ar.mouseX<seekRight&&ar.mouseY>E-10&&ar.mouseY<E+10){br.stillWithinSeekBar=true}else{br.stillWithinSeekBar=false}}}}ar.addMethod(br,"dragSeekBar",bw);function bx(){ar.stroke(255);ar.strokeWeight(3);if(r==bh&&a4.getPlayerState()==-1){ar.fill(255);ar.textSize(19);ar.textAlign(ar.LEFT,ar.CENTER);ar.text("-:--/-:--",aC-28-am,E)}if((r==at&&p!=null&&p.readyState==1)||r==bh&&a4.getPlayerState()==3){ar.strokeWeight(1);ar.line(bc,E,seekRight,E);ar.strokeWeight(3);var bH=0;if(r==at){bH=ar.map(p.bytesLoaded,0,p.bytesTotal,bc,seekRight)}else{bH=ar.map(a4.getVideoBytesLoaded(),0,a4.getVideoBytesTotal(),bc,seekRight)}if(bH>=0){ar.line(bc,E,bH,E)}}else{ar.line(bc,E,seekRight,E)}if((r==at&&p!=null&&(p.readyState==1||p.readyState==3))||(r==bh&&a4.getPlayerState()>0)){var bI=null;if(!T||!br.stillWithinSeekBar){var bH=0;if(r==at){if(p.readyState==1){br.total=p.durationEstimate;br.totTime=aZ(br.total/1000)}else{if(p.readyState==3){br.total=p.duration;br.totTime=aZ(br.total/1000)}}bI=aZ(p.position/1000);bH=ar.map(p.position,0,br.total,bc,seekRight)}else{if(r==bh){br.total=a4.getDuration();br.totTime=aZ(br.total);bI=aZ(a4.getCurrentTime());bH=ar.map(a4.getCurrentTime(),0,br.total,bc,seekRight)}}if(bH>=0){ar.line(bH,E-10,bH,E+10)}}else{ar.line(ar.mouseX,E-10,ar.mouseX,E+10);var bJ=ar.map(ar.mouseX,bc,seekRight,0,br.total);if(r==at){bJ/=1000}bI=aZ(bJ)}ar.fill(255);ar.textSize(15);ar.textAlign(ar.LEFT,ar.CENTER);ar.text(bI+"/"+br.totTime,aC-30-am,E)}ar.strokeWeight(1)}ar.addMethod(br,"drawSeekBar",bx);function bs(){bp();aM=ap;aC=x;n=w-230;a7=w;am=ar.textWidth("0:00/0:00");bc=ap+95;E=w-18;br.play=new P(ap+72,E,10,10);br.ffwd=new Y(x-20,E,10,10);ay=ap+40;volY=15;volD=0.3;volS=20;seekRight=x-40-am;ar.textSize(15)}function bB(){if(arguments.length===0){bs.apply(br,arguments)}else{bp()}}bB.apply(null,arguments)}return bl})();ar.Current=q;var aq=(function(){function bl(){var br=this;function bt(){ar.extendClassChain(br)}function bq(bz){$("#popup-content").attr("src",bz);$("#popup-url").attr("href",bz);$("#center").hide();$("#popup").show()}function bw(bA){var bz="<table><tr>";$.each(bA,function(bB,bC){bz+="<td class='square-td'><div class='square' data-url='"+bC.url+"'><h2>"+bC.site+"</h2><p>"+bv(bC.text)+"</p></div></td>";if(bB==8){bz+="</tr>";return false}else{if((bB+1)%3==0){bz+="</tr><tr>"}}});$("#biographies").html(bz)}function bv(bz){return bz.substr(0,250)+"..."}function bp(bA){var bz="<table><tr>";$.each(bA,function(bB,bC){bz+="<td class='square-td'><div class='square' data-url='"+bC.url+"'><h2>"+bC.name+"</h2><p>"+bv(bC.summary)+"</p></div></td>";if(bB==8){bz+="</tr>";return false}else{if((bB+1)%3==0){bz+="</tr><tr>"}}});$("#blogs").html(bz)}function by(bz){}function bx(bA){var bz="<table><tr>";$.each(bA,function(bB,bC){bz+="<td class='square-td'><div class='square' data-url='"+bC.url+"'><h2>"+bC.name+"</h2><p>"+bv(bC.summary)+"</p></div></td>";if(bB==8){bz+="</tr>";return false}else{if((bB+1)%3==0){bz+="</tr><tr>"}}});$("#news").html(bz)}function bu(bA){var bz="<table><tr>";$.each(bA,function(bB,bC){bz+="<td class='square-td'><div class='square video' data-url='"+bC.url+"'><h2>"+bC.title+"</h2><img class='video-thumbnail' src='"+bC.image_url+"'></div></td>";if(bB==8){bz+="</tr>";return false}else{if((bB+1)%3==0){bz+="</tr><tr>"}}});$("#videos").html(bz)}function bo(bz){$("#center").children().css("display","none");$("#"+bz).css("display","block")}br.canvas=document.getElementById("canvas");br.selectDiv=document.getElementById("artist-info");br.selectDivHeight=635;br.selectDivWidth=1158;br.selectDivX=9;br.selectDivY=9;function bs(bz){br.selectDiv.style.width=br.selectDivWidth;br.selectDiv.style.height=br.selectDivHeight;br.selectDiv.style.top=br.selectDivY+"px";br.selectDiv.style.zIndex=1;$("#center, #popup, #popup-nav, #popup-content").css("width",br.selectDivWidth+"px");$("#popup-content").css("height",br.selectDivHeight+"px");$.getJSON("http://rapcities.com/getArtistInfo?id="+bz,function(bA){bw(bA.biographies);bp(bA.blogs);by(bA.images);bx(bA.news);bu(bA.videos);$(".square").hover(function(){$(this).addClass("square-hover")},function(){$(this).removeClass("square-hover")}).click(function(){bq($(this).data("url"))});$("#close").click(function(){$("#artist-info").css("z-index","-1")})});$(".type").click(function(){bo($(this).data("type"));$(".type").removeClass("selected-type");$(this).addClass("selected-type");$("#popup").hide();$("#center").show()}).hover(function(){$(this).addClass("hover-type")},function(){$(this).removeClass("hover-type")});$("#popup-close").click(function(){$("#popup").hide();$("#center").show()})}ar.addMethod(br,"showArtistInfo",bs);function bm(){bt()}function bn(){if(arguments.length===0){bm.apply(br,arguments)}else{bt()}}bn.apply(null,arguments)}return bl})();ar.ArtistInfo=aq;var aF=false;var aK=null;var aO=null;var m=null;var Q=null;var C=null;var ad=null;var l=null;var ab=null;var aS=null;var y=0;var aB=1;var f=2;var M=0;var d=1;var U=2;var bk=y;var O=false;var bg=U;var aV=0;var p=null;var an=null,af=null;var aD=0;var B=1;var X=0,a2=0,h=0,J=0;var bf=0,aL=0;var aJ=0,aI=0,e=0,ba=0;var av=0;function aP(){X=ar.max(700,$(window).width());a2=ar.max(870,$(window).height());logo=ar.loadImage("logo");$("#parent").css("width",X).css("height",a2);if(X==700||a2==870){$("body").css("overflow","visible")}e=1920;ba=1000;aJ=20;aI=30;h=30;J=0;aL=7757;bf=8189;au();ak=new ar.ArrayList();ar.size(X,a2);ar.frameRate(30);ar.smooth();ar.rectMode(ar.CORNERS);ar.ellipseMode(ar.CENTER_RADIUS);aF=false;aK=ar.createFont("Arial",13);ar.textFont(aK);ax();songs=new ar.ArrayList();C=new ar.HashMap();l=new z(X-aJ-284,aI);ad=new q();ab=new I();an=new Array(8);af=new Array(8);for(var bm=0;bm<8;bm++){an[bm]=new Array(8);af[bm]=new Array(8);for(var bl=0;bl<8;bl++){af[bm][bl]=false}}aS=new aq();v=ar.loadImage("facebook");aw=ar.loadImage("youtube");u=ar.loadImage("info");bb=ar.loadImage("heart");ai=ar.loadImage("twitter")}ar.setup=aP;function b(bm,bl){if(bm!=X||bl!=a2){X=bm;a2=bl;$("#parent").css("width",bm).css("height",bl);h=30;J=0;ar.size(X,a2);aA=X;aj=a2;ap=X-aJ-284;x=X-aJ;aR=ar.map(aA,0,bf,0,284);aQ=ar.map(aj,0,aL,0,270);ab.setMins();ay=ap+40;ad.play.newPos(ap+72,E);ad.ffwd.newPos(x-20,E);bc=ap+95;ay=ap+40;seekRight=x-40-am;aM=ap;aC=x}}ar.setUpSize=b;var v=null,aw=null,a9=null,u=null,bb=null,ae=null,ai=null;function ax(){ar.colorMode(ar.RGB);aO=ar.createJavaArray("$p.color",[10]);m=ar.createJavaArray("$p.color",[10]);aO[0]=ar.color(255,0,0);aO[1]=ar.color(255,103,0);aO[2]=ar.color(255,182,0);aO[3]=ar.color(231,255,0);aO[4]=ar.color(0,255,18);aO[5]=ar.color(0,255,212);aO[6]=ar.color(0,104,155);aO[7]=ar.color(149,0,255);aO[8]=ar.color(248,0,255);aO[9]=ar.color(255,3,141);m[0]=ar.color(0,153,153);m[1]=ar.color(100,168,209);m[2]=ar.color(133,133,232);m[3]=ar.color(230,113,255);m[4]=ar.color(255,128,157);m[5]=ar.color(255,176,128);m[6]=ar.color(255,195,100);m[7]=ar.color(249,243,140);m[8]=ar.color(222,244,130);m[9]=ar.color(204,255,123)}ar.setUpColors=ax;function aG(){ab.draw();ar.imageMode(ar.CORNER);ar.image(logo,0,0);l.draw();ad.draw();if(aH>-1){bj(aH)}if(curehover>-1){aW(curehover)}}ar.draw=aG;var R=new ar.ArrayList();var K=new ar.ArrayList();var j=null;function a6(){R.clear();var bl="http://rapcities.com/getArtists";if(bk){bl+="&sort="+bk}$.getJSON(bl,function(bn){if(bn!=null){var bo=bn.length;for(var bm=0;bm<bo;bm++){bn[bm].X=ar.map(bn[bm].x,725.056,935.131,1,2000);bn[bm].Y=ar.map(bn[bm].y,701.865,850.945,1,1422);R.add(bn[bm])}}})}ar.setUpArtists=a6;function o(){K.clear();var bm=ar.__split(window.location.pathname,(new ar.Character("/")));var bl=null;if(bm.length>0){if(bm.length<3){bl=bm[1]}else{bl=bm[3]}$.getJSON("http://rapcities.com/getEvents?sponsor="+bl,function(bo){if(bo!=null){var bp=bo.length;for(var bn=0;bn<bp;bn++){bo[bn].X=ar.map(bo[bn].x,725.056,935.131,1,2000);bo[bn].Y=ar.map(bo[bn].y,701.865,850.945,1,1422);K.add(bo[bn])}}})}}ar.setUpEvents=o;var F=0,D=0,a5=0,a3=0;var aA=0,aj=0,aR=0,aQ=0;var aH=-1;function aY(bm,bl){var bn=null;if((bm==0)||(bm==1&&bl<1)){bn="0";bn+=String(bm*8+bl+1)+".grid"}else{bn=String(bm*8+bl+1)+".grid"}af[bm][bl]=true;an[bm][bl]=ar.loadImage(bn)}ar.loadMapPiece=aY;function L(){ab.keyPressed()}ar.keyPressed=L;function bj(bm){var bl=R.get(bm).name;ar.textSize(18);var bn=ar.textWidth(bl);ar.stroke(aO[2]);ar.fill(0);ar.rectMode(ar.CORNERS);ar.rect(ar.mouseX,ar.mouseY-33,ar.mouseX+bn+12,ar.mouseY-7,10);ar.fill(aO[2]);ar.textAlign(ar.LEFT,ar.TOP);ar.text(bl,ar.mouseX+6,ar.mouseY-30)}ar.drawHoverInfo=bj;function aW(bm){var bl=K.get(bm).title;ar.textSize(18);var bn=ar.textWidth(bl);ar.stroke(aO[6]);ar.fill(0);ar.rectMode(ar.CORNERS);ar.rect(ar.mouseX,ar.mouseY-33,ar.mouseX+bn+12,ar.mouseY-7,10);ar.fill(aO[6]);ar.textAlign(ar.LEFT,ar.TOP);ar.text(bl,ar.mouseX+6,ar.mouseY-30)}ar.drawEventInfo=aW;function A(){if(aH>=0){j=R.get(aH);az=0;s()}else{if(curehover>=0){S()}else{if(curMenu>=0){switch(curMenu){case 0:aS.showArtistInfo(j.echoID);return;case 1:case 4:case 2:ar.link(j.facebook,"_new");return;case 3:return}}else{if(aa>=0){az=aa;s()}}}}}ar.mouseClicked=A;function a1(bl){$.getJSON("http://rapcities.com/getTrack?id="+bl,function(bm){if(aF){al()}a8(bm.url)})}ar.getSong=a1;function a8(bl){p=soundManager.createSound({id:bl,url:bl,autoLoad:true,autoPlay:true,volume:ac,onfinish:function(){ah()}});aF=true;if(bi){p.mute()}}ar.startSong=a8;function al(){aF=false;p.stop();p.unload();p.destruct()}ar.stopSong=al;function aT(){if(ar.mouseY<a7&&ar.mouseY>n&&ar.mouseX<aC&&ar.mouseX>aM){ad.mousePressed()}else{if(ar.mouseX>ap&&ar.mouseX<x&&ar.mouseY>ao&&ar.mouseY<av){if(ar.mouseY<w){l.mousePressed()}else{ab.miniMousePressed()}}else{ab.mousePressed()}}}ar.mousePressed=aT;function aN(){ad.mouseDragged();ab.mouseDragged();ab.miniMouseDragged()}ar.mouseDragged=aN;function H(){ab.mouseOut();ad.mouseReleased()}ar.mouseOut=H;function a(){ad.mouseReleased();ab.mouseReleased();ab.miniMouseReleased()}ar.mouseReleased=a;var g=-1;var ag=1;var c=0;var W=true;function aX(){for(var bl=songs.size()-1;bl>-1;bl--){if(bl==aa&&aF){songs.get(bl).stopSong()}songs.remove(bl)}aa=-1;p=null}ar.resetSongs=aX;function ah(){al();if(az<j.topTracks.length-1){az++;s()}else{bd()}}ar.createNext=ah;var ak=null;function bd(){var bn=false;for(var bl=0;bl<ak.size();bl++){if(ak.get(bl)==j.name){bn=true;break}}if(!bn){ak.add(j.name)}for(var bl=0;bl<R.size();bl++){var bm=R.get(bl);if(bm.x>F&&bm.x<a5&&bm.y>D&&bm.y<a3){if(!ar.__contains(ak,bm.name)){j=bm;az=0;s()}}}}ar.nextArtist=bd;function Z(bm,bl){this.length=bm;this.index=bl}function i(bo,bs,bq,br,bl,bv){if(ar.textWidth(bo)>br){var bt=C.get(bo+ar.textWidth(bo));if(bt==null){bt=new Z(0,0);C.put(bo+ar.textWidth(bo),bt)}var bn=bt.index;var bp=bo.length;if(bt.length>=ar.textWidth(bo.charAt(bn))){if(bn<bp-1){bt.index++;bn++;bt.length=0}else{bt.index=bn=0;bt.length=-40}}var bu=ar.textWidth(bo.charAt(bn))-bt.length;bn++;while(bu<br&&bn<bp){bu+=ar.textWidth(bo.charAt(bn));bn++}ar.text(bo.substring(bt.index,bn),bs-bt.length,bq);if(bn==bp){bu+=40;var bm=0;while(bu<br){bu+=ar.textWidth(bo.charAt(bm));bm++}ar.text(bo.substring(0,bm),bs+ar.textWidth(bo.substring(bt.index,bn))-bt.length+40,bq)}ar.noStroke();ar.fill(0);ar.rectMode(ar.CORNERS);ar.rect(bs-ar.textWidth((new ar.Character("W"))),bq+bv,bs,bq);ar.rect(bs+br,bq,bs+br+ar.textWidth((new ar.Character("W"))),bq+bv);ar.fill(bl);bt.length++;C.put(bo+ar.textWidth(bo),bt)}else{ar.text(bo,bs,bq)}}ar.checkText=i;var be=0;var t=1;var a0=0;var ao=0,ap=0,w=0,x=0,N=0,aU=0;var aa=-1;var az=-1;var T=false;var ac=50;var bi=false;var am=0,bc=0,ay=0;var aC=0,aM=0,n=0,a7=0,E=0;function aZ(bn){var bm=ar.__int_cast((bn%60));var bl=ar.__int_cast(((bn%3600)/60));var bo=null;if(bm==0){bo="00"}else{if(bm<10){bo="0"+bm}else{bo=bm}}return(bl+":"+bo)}ar.makeTime=aZ;function V(){if(az<j.topTracks.length-1){az++;s()}else{bd()}}ar.videoEnded=V;function au(){$("#ytplayer").html('<script type="text/javascript">var params = { allowScriptAccess: "always" };var atts = { id: "YouTubeP" };swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3", "ytplayer", "283", "200", "8", null, null, params, atts);<\/script>')}ar.togglePlayer=au;var a4=null;var r=false;var at=1;var bh=2;function aE(){a4=document.getElementById("YouTubeP");r=bh;a4.setVolume(ac)}ar.prepPlayer=aE;function S(){a4.loadVideoById(K.get(curehover).link)}ar.loadEventVideo=S;function s(){if(j.topTracks[az].video_id){a4.loadVideoById(j.topTracks[az].video_id)}else{$("#ytplayer").html("<p>Couldn't find this song on YouTube</p>")}}ar.loadVideo=s;function G(){$.ajax({type:"GET",dataType:"jsonp",url:"http://gdata.youtube.com/feeds/api/videos?q="+ar.__replace(j.topTracks[az].title,/ /g,(new ar.Character("+")))+"+"+ar.__replace(j.name,/ /g,(new ar.Character("+")))+"&v=2&alt=jsonc&max-results=1&format=5",success:function(bm){if(bm.data.items.length>0){var bl=bm.data.items[0].id;$("#ytplayer").html('<script type="text/javascript">var params={allowScriptAccess:"always"};var atts={id:"YouTubeP"};var url="http://www.youtube.com/v/'+bl+'?enablejsapi=1&playerapiid=YouTubeP&version=3&autoplay=1&controls=1";swfobject.embedSWF(url,"ytplayer","350","300","8",null,null,params,atts);<\/script>')}else{$("#ytplayer").html("<p>Couldn't find this song on YouTube</p>")}}})}ar.oldloadVideo=G})
      );
});
</script>
<script type="text/javascript">
	function onYouTubePlayerReady(playerId){	document.getElementById('YouTubeP').addEventListener("onStateChange","onytplayerStateChange");
	Processing.getInstanceById('canvas').prepPlayer();	
	}
	
	function onytplayerStateChange(newState) {
	   if(newState == 0){
		Processing.getInstanceById('canvas').videoEnded();
	   }
	}	
</script>
<script type="text/javascript">
$(window).resize(function(){
	if($(window).width() < 700 || $(window).height() < 870){
		var p = Processing.getInstanceById('canvas');
		p.setUpSize(Math.max($(window).width(),700),Math.max(870,$(window).height()));
		$("body").css("overflow","visible");
	}
	else{
		var p = Processing.getInstanceById('canvas');
		p.setUpSize($(window).width(),$(window).height());
		$("body").css("overflow","hidden");
		$("#parent").css("width",$(window).width()).css("height",$(window).height());
	}
});
</script>
  </head>
  <body bgcolor="Black">
    <div id="parent">
      <canvas id="canvas">
        <font size="10" color="white">Your browser doesn't support HTML5! Please
          and use the latest version of Mozilla Firefox or Google Chrome.</font>
      </canvas>
	<div id="dialogWindow" title="YouTube Player">
		<div id="ytplayer">
			<p>Oops! Seems like you don't have Flash Player 8+ and/or JavaScript enabled!</p>

		</div>
	</div>
      <div id='artist-info'>
        <div id="top">
          <div class='type' data-type='biographies'>Biographies</div>
          <div class='type' data-type='blogs'>Blogs</div>
          <div class='type' data-type='images'>Images</div>
          <div class='type' data-type='news'>News</div>
          <div class='type' data-type='videos'>Videos</div>
          <div class='type' id='close'>Close</div>
          <div class='clear'></div>
        </div>
        <div id="center">
          <div id="biographies"></div>
          <div id="blogs"></div>
          <div id="images"></div>
          <div id="news"></div>
          <div id="videos"></div>
        </div>
        <div id="popup">
          <div id="popup-nav">
            <a id="popup-close" href="#">Close</a>
            <a id="popup-url" href="#">Go to site</a>
          </div>
          <iframe id="popup-content" src="">
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </body>
</html>
