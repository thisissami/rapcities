<html>
  <head>
    <title>RapCities</title>
    <script type="text/javascript" src="processing-1.3.6.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	    <script type="text/javascript" src="soundmanager2.js"></script>
    <script type="text/javascript" src="http://xe-widgets.googlecode.com/svn-history/r10/trunk/widgets/xe_banner/skins/bannerSlider/js/slides.jquery.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
	<link rel="stylesheet" type="text/css" href="jquery-ui-1.8.18.custom.css" />
    <link rel='stylesheet' src="http://slidesjs.com/examples/images-with-captions/css/global.css">
    <style type="text/css">
      body {
        background-color: black;
        color: white;
		margin:0px;overflow:hidden;
      }
      h2 {
        font-size: 16px;
      }
      #canvas {
        /*width: 1158px;
        height: 635px;*/
        position: absolute;
        z-index: 0;
		/*left: 50%;
		margin-left:-479px;*/
		/*margin: auto;*/
      }
      #artist-info {
        position: absolute;
        z-index: -1;
        background-color: black;
        font: 15px Verdana, sans-serif;
		left: 50%;
		margin-left:-479px;
      }
      #top  {
        width: 700px;
        margin: 0 auto;
      }
      #top li {
        display: inline;
      }
      #center {
        float: left;
      }
      #popup {
        z-index: 2;
        float: left;
        display: none;
      }
      #popup a{
        color: white;
      }
      #popup-nav {
        height: 50px;
      }
      #popup-close {
        float: left;
      }
      #popup-url {
        float: right;
      }
      #center div {
        display: none;
      }
      #center div div {
        display: block;
      }
      td.square-td {
        width: 33%;
      }
      div.square {
        height: 166px;
        margin: 10px;
        text-overflow: ellipsis;
        overflow: hidden;
        padding: 12px;
      }
      div.square-hover {
        border: 2px solid white;
        padding: 10px;
      }
      .square a {
        text-decoration: underline;
        color: white;
      }
      .square p {
        font-size: 14px;
      }
      .type {
        float: left;
        width: 100px;
        height: 36px;
        padding-top: 16px;
        text-align: center;
        border: 2px solid white;
      }
      #close {
        font-weight: bold;
      }
      .selected-type {
        background-color: white;
        color: black;
      }
      .hover-type {
        background-color: white;
        color: black;
      }
      .never-hover-square {
        padding: 12px !important;
        border: none !important;
      }
      .square h2 {
        font-size: 16px;
        font-weight: bold;
      }
      .video {
        text-align: center;
      }
      .clear {
        clear: both;
      }
      iframe.popup {
        z-index: 2;
      }
      .video-thumbnail {
        width: 120px;
      }



      /* slides */
      .slides_container {
        width:570px;
        overflow:hidden;
        position:relative;
        display:none;
      }

      .slides_container div.slide {
        width:570px;
        display:block;
      }
    </style>
	<script type="text/javascript">
		$(document).ready(function() {
			$("div#dialogWindow").dialog({
				autoOpen: false,
				resizable: false,
				height: 360,
				width: 385
			});

			function onYouTubePlayerReady(playerId){
				startAutoplay();
			}
		});
	</script>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(ak){var k=(function(){function a9(){var bb=this;function bd(){ak.extendClassChain(bb)}bb.x=0;bb.y=0;bb.hw=0;bb.hh=0;bb.invert=false;bb.pressedHere=false;function bg(){return ak.mouseX>bb.x-bb.hw&&ak.mouseX<bb.x+bb.hw&&ak.mouseY>bb.y-bb.hh&&ak.mouseY<bb.y+bb.hh}ak.addMethod(bb,"pressed",bg);function bh(bj,bk){bb.x=bj;bb.y=bk}ak.addMethod(bb,"newPos",bh);function bf(){}ak.addMethod(bb,"mousePressed",bf);function bc(){}ak.addMethod(bb,"mouseReleased",bc);function be(){}ak.addMethod(bb,"draw",be);function bi(bk,bm,bj,bl){bd();bb.x=bk;bb.y=bm;bb.hw=bj;bb.hh=bl}function ba(){if(arguments.length===4){bi.apply(bb,arguments)}else{bd()}}ba.apply(null,arguments)}return a9})();ak.Button=k;var D=(function(){function a9(){var be=this;function bd(){ak.extendClassChain(be)}be.rapper=null;be.rapcircle=null;be.NYC=null;be.miniNYC=null;be.NYCx=1000;be.NYCy=711;be.xdif=(at-a7)/2;be.ydif=(ar-a6)/2;be.curNYCx=a7+be.xdif;be.curNYCy=a6+be.ydif;be.ox=0;be.oy=0;be.ocx=0;be.ocy=0;be.allX=0;be.allY=0;be.widths=null;be.heights=null;be.ominx=0;be.ominy=0;be.miniMidX=0;be.miniMidY=0;be.midX=0;be.midY=0;be.minix=0;be.miniy=0;be.maxix=0;be.maxiy=0;be.opressed=false;be.miniPressed=false;be.once=false;function bc(){be.$self.drawMap();be.$self.drawArtists();ak.fill(0);ak.noStroke();ak.rectMode(ak.CORNERS);ak.rect(0,0,a7,aR);ak.rect(0,0,ak.width,a6);ak.rect(ak.width,ak.height,0,ar);ak.rect(ak.width,ak.height,at,0);ak.noFill();ak.stroke(255);ak.rect(a7,a6,at,ar);be.$self.drawMini()}ak.addMethod(be,"draw",bc);function ba(){ak.imageMode(ak.CENTER);var bs=0;var bv=0;var bu=0;for(bu=0;bu<8;bu++){bs+=be.widths[bu];if(bs>be.midX){break}}var bt=0;for(bt=0;bt<8;bt++){bv+=be.heights[bt];if(bv>be.midY){break}}be.$self.grimage(bt,bu,a7+aq/2-(be.widths[bu]/2-(bs-be.midX)),a6+ac/2-(be.heights[bt]/2-(bv-be.midY)));if(bt>0){be.$self.grimage(bt-1,bu,a7+aq/2-(be.widths[bu]/2-(bs-be.midX)),a6+ac/2-be.heights[bt]-(be.heights[bt-1]/2-(bv-be.midY))+1)}if(bu>0){be.$self.grimage(bt,bu-1,a7+aq/2-be.widths[bu]-(be.widths[bu-1]/2-(bs-be.midX))+1,a6+ac/2-(be.heights[bt]/2-(bv-be.midY)))}if(bt<7){be.$self.grimage(bt+1,bu,a7+aq/2-(be.widths[bu]/2-(bs-be.midX)),a6+ac/2+be.heights[bt+1]/2+(bv-be.midY)-1)}if(bu<7){be.$self.grimage(bt,bu+1,a7+aq/2+be.widths[bu+1]/2+(bs-be.midX)-1,a6+ac/2-(be.heights[bt]/2-(bv-be.midY)))}if(bt>0&&bu>0){be.$self.grimage(bt-1,bu-1,a7+aq/2-be.widths[bu]-(be.widths[bu-1]/2-(bs-be.midX))+1,a6+ac/2-be.heights[bt]-(be.heights[bt-1]/2-(bv-be.midY))+1)}if(bt>0&&bu<7){be.$self.grimage(bt-1,bu+1,a7+aq/2+be.widths[bu+1]/2+(bs-be.midX)-1,a6+ac/2-be.heights[bt]-(be.heights[bt-1]/2-(bv-be.midY))+1)}if(bt<7&&bu<7){be.$self.grimage(bt+1,bu+1,a7+aq/2+be.widths[bu+1]/2+(bs-be.midX)-1,a6+ac/2+be.heights[bt+1]/2+(bv-be.midY)-1)}if(bt<7&&bu>0){be.$self.grimage(bt+1,bu-1,a7+aq/2-be.widths[bu]-(be.widths[bu-1]/2-(bs-be.midX))+1,a6+ac/2+be.heights[bt+1]/2+(bv-be.midY)-1)}}ak.addMethod(be,"drawMap",ba);function bh(bt,bv,bu,bs){if(ag[bt][bv]){ak.image(ag[bt][bv],bu,bs)}else{if(!Y[bt][bv]){aN(bt,bv)}}}ak.addMethod(be,"grimage",bh);function bo(){ak.imageMode(ak.CORNERS);ak.image(be.miniNYC,ai,t,u,ar);ak.rectMode(ak.CENTER);ak.noFill();ak.strokeWeight(1);ak.stroke(aE[0]);ak.rect(ai+be.miniMidX,t+be.miniMidY,aH,aG)}ak.addMethod(be,"drawMini",bo);function bj(){aq=(at-a7);ac=(ar-a6);aH=ak.map(aq,0,a2,0,284);aG=ak.map(ac,0,aC,0,270);be.midX=a2/2;be.midY=aC/2;be.miniMidX=ak.map(be.midX,0,a2,0,284);be.miniMidY=ak.map(be.midY,0,aC,0,270);be.widths=new Array(1018,1027,1017,1028,1017,1028,1017,1037);be.heights=new Array(950,970,970,969,979,970,970,979);be.allX=9207;be.allY=8707;be.$self.setMins()}ak.addMethod(be,"prep",bj);function bg(){if(ak.mouseX>ai&&ak.mouseY>t&&ak.mouseX<u&&ak.mouseY<ar){be.miniPressed=true;be.miniMidX=ak.min(ak.max(aH/2,ak.mouseX-ai),284-aH/2);be.miniMidY=ak.min(ak.max(aG/2,ak.mouseY-t),270-aG/2);be.midX=ak.map(be.miniMidX,0,284,0,a2);be.midY=ak.map(be.miniMidY,0,270,0,aC);be.$self.setMins()}}ak.addMethod(be,"miniMousePressed",bg);function bi(){if(be.miniPressed){be.miniMidX=ak.min(ak.max(aH/2,ak.mouseX-ai),284-aH/2);be.miniMidY=ak.min(ak.max(aG/2,ak.mouseY-t),270-aG/2);be.midX=ak.map(be.miniMidX,0,284,0,a2);be.midY=ak.map(be.miniMidY,0,270,0,aC);be.$self.setMins()}}ak.addMethod(be,"miniMouseDragged",bi);function bp(){be.miniPressed=false}ak.addMethod(be,"miniMouseReleased",bp);function bl(){ak.shapeMode(ak.CENTER);ay=-1;for(var bt=0;bt<L.size();bt++){var bu=L.get(bt);if(bu.x<aT+10&&bu.x>B-10&&bu.y<aS+15&&bu.y>A-15){var bs=ak.map(bu.x,B,aT,a7,at);var bv=ak.map(bu.y,A,aS,a6,ar);if(ak.mouseX<bs+15&&ak.mouseX>bs-15&&ak.mouseY<bv+15&&ak.mouseY>bv-15){ak.shape(be.rapcircle,bs,bv,30,30);ay=bt}else{ak.shape(be.rapper,bs,bv,20,30)}}}}ak.addMethod(be,"drawArtists",bl);function bk(){be.ox=ak.mouseX;be.oy=ak.mouseY;be.ocx=be.midX;be.ocy=be.midY;be.ominx=B;be.ominy=A;be.opressed=true}ak.addMethod(be,"mousePressed",bk);function bq(){if(be.opressed){be.midX=be.ocx-(ak.mouseX-be.ox);be.midY=be.ocy-(ak.mouseY-be.oy);if(be.midX>a2-aq/2){be.midX=a2-aq/2}if(be.midX<aq/2){be.midX=aq/2}if(be.midY<ac/2){be.midY=ac/2}if(be.midY>aC-ac/2){be.midY=aC-ac/2}be.miniMidX=ak.map(be.midX,0,a2,0,284);be.miniMidY=ak.map(be.midY,0,aC,0,270);be.$self.setMins()}}ak.addMethod(be,"mouseDragged",bq);function bb(){B=ak.map(be.midX-aq/2,0,a2,531.749,531.749+853);aT=ak.map(be.midX+aq/2,0,a2,531.749,531.749+853);A=ak.map(be.midY-ac/2,0,aC,231.083,231.083+810);aS=ak.map(be.midY+ac/2,0,aC,231.083,231.083+810)}ak.addMethod(be,"setMins",bb);function br(){be.opressed=false}ak.addMethod(be,"mouseReleased",br);function bm(){be.opressed=false}ak.addMethod(be,"mouseOut",bm);function bf(){bd();be.NYC=ak.loadImage("NYC.gif");be.miniNYC=ak.loadImage("miniNYC.png");be.ox=be.oy=-1;aU();be.rapper=ak.loadShape("rapper.svg");be.rapcircle=ak.loadShape("bot.svg");be.$self.prep()}function bn(){if(arguments.length===0){bf.apply(be,arguments)}else{bd()}}bn.apply(null,arguments)}return a9})();ak.Map=D;var J=(function(){function a9(){var bd=this;var bg={$upcast:bd};function bf(){k.apply(bg,arguments);if(!("$self" in bg)){ak.extendClassChain(bg)}}bd.play=false;function bb(){return bd.play}ak.addMethod(bd,"paused",bb);function bj(){if(bg.pressed()){bd.invert=true;bd.pressedHere=true}}ak.addMethod(bd,"mousePressed",bj);function bh(){if(bg.pressed()&&bd.pressedHere){bd.invert=true}else{bd.invert=false}}ak.addMethod(bd,"mouseDragged",bh);function be(){if(bd.invert&&bd.pressedHere){if(aw){n.togglePause()}bd.invert=false}bd.pressedHere=false}ak.addMethod(bd,"mouseReleased",be);function ba(){if(aw){if(n!=null&&n.playState==1){if(n.paused){if(!M){bd.play=true}}else{bd.play=false}}else{bd.play=true}}}ak.addMethod(bd,"update",ba);function bi(){if(bd.invert){ak.fill(255);ak.noStroke()}else{ak.noFill();if(bg.pressed()){ak.stroke(255)}else{ak.noStroke()}}ak.rect(bd.x-bd.hw,bd.y-bd.hh,bd.x+bd.hw,bd.y+bd.hh);if(bd.invert){ak.fill(0);ak.stroke(255)}else{ak.fill(255);ak.noStroke()}if(bd.play){ak.triangle(bd.x-bd.hw/3,bd.y-bd.hh/2,bd.x-bd.hw/3,bd.y+bd.hh/2,bd.x+bd.hw/2,bd.y)}else{ak.rect(bd.x-bd.hw/3,bd.y-bd.hh/2,bd.x-1,bd.y+bd.hh/2);ak.rect(bd.x+bd.hw/3,bd.y-bd.hh/2,bd.x+1,bd.y+bd.hh/2)}}ak.addMethod(bd,"draw",bi);function bk(bm,bo,bl,bn){bf(bm,bo,bl,bn);bd.play=true}function bc(){if(arguments.length===4){bk.apply(bd,arguments)}else{bf()}}bc.apply(null,arguments)}ak.extendStaticMembers(a9,k);a9.$base=k;return a9})();ak.Play=J;var Q=(function(){function a9(){var bb=this;var be={$upcast:bb};function bd(){k.apply(be,arguments);if(!("$self" in be)){ak.extendClassChain(be)}}bb.invert=false;bb.pressed=false;function bh(){if(be.pressed()){bb.invert=true;bb.pressedHere=true}}ak.addMethod(bb,"mousePressed",bh);function bf(){if(be.pressed()&&bb.pressedHere){bb.invert=true}else{bb.invert=false}}ak.addMethod(bb,"mouseDragged",bf);function bc(){if(bb.invert&&bb.pressedHere){a0();bb.invert=false}bb.pressedHere=false}ak.addMethod(bb,"mouseReleased",bc);function bg(){if(bb.invert){ak.fill(255);ak.noStroke()}else{ak.noFill();if(be.pressed()){ak.stroke(255)}else{ak.noStroke()}}ak.rect(bb.x-bb.hw,bb.y-bb.hh,bb.x+bb.hw,bb.y+bb.hh);if(bb.invert){ak.fill(0);ak.stroke(255)}else{ak.fill(255);ak.noStroke()}ak.rect(bb.x-3,bb.y-bb.hh/2,bb.x-8,bb.y+bb.hh/2);ak.triangle(bb.x,bb.y-bb.hh/2,bb.x,bb.y+bb.hh/2,bb.x+bb.hw/2,bb.y)}ak.addMethod(bb,"draw",bg);function bi(bk,bm,bj,bl){bd(bk,bm,bj,bl);bb.invert=false}function ba(){if(arguments.length===4){bi.apply(bb,arguments)}else{bd()}}ba.apply(null,arguments)}ak.extendStaticMembers(a9,k);a9.$base=k;return a9})();ak.Forward=Q;var w=(function(){function a9(){var bf=this;function bh(){ak.extendClassChain(bf)}bf.panel=a1;bf.margin=10;bf.slant=2;bf.num=0;bf.mouseMainPaneControl=-1;bf.mouseSort=-1;bf.mouseFilter=0;bf.genreFilter=0;bf.mouseOnTitle=0;bf.mouseGenre=-1;bf.colorIcon=null;bf.sortIcon=null;bf.names=[" Current Info"," Color Mode","Sorting"];bf.currentColor=0;function bi(){if(!j){bf.$self.printNoSong()}else{bf.$self.printTopSongs()}bf.$self.drawControl()}ak.addMethod(bf,"draw",bi);function bj(){if(bf.mouseMainPaneControl>=0){bf.panel=bf.mouseMainPaneControl}else{if(bf.mouseSort>=0){a8=bf.mouseSort;aM()}else{if(bf.mouseFilter){aL=++aL%2;if(!F){aM()}}else{if(bf.genreFilter){F=!F;if(F){a3=d}else{a3=N}if(aw){n.stopSong();aw=false}aM()}else{if(bf.mouseGenre>=0){aP=bf.mouseGenre;if(F){aM()}}}}}}}ak.addMethod(bf,"mousePressed",bj);function bg(){}ak.addMethod(bf,"mouseReleased",bg);function bk(){ak.strokeWeight(2);ak.stroke(255);ak.textSize(15);ak.line(ai,ah,u,ah);ak.line(ai,aK,u,aK);ak.line(ai,ah,ai,t-1);ak.line(u+1,ah,u+1,t-1);ak.rectMode(ak.CORNERS);ak.noFill();ak.rect(ai,ar,u+1,t);for(var bl=0;bl<5;bl++){ak.line(ai+H*(bl+1),ah,ai+H*(bl+1),aK-1)}ak.imageMode(ak.CORNERS);ak.image(r,ai,ah,ai+H,aK);ak.image(s,ai+H*2,ah,ai+H*3,aK);ak.image(aY,ai+H,ah,ai+H*2,aK);ak.image(am,ai+H*3,ah,ai+H*4,aK);ak.image(ab,ai+H*4,ah,ai+H*5,aK);ak.ellipseMode(ak.CENTER_RADIUS);ak.noStroke();bf.mouseMainPaneControl=-1;ak.stroke(255);ak.noFill();if(ak.mouseX>ai&&ak.mouseY>ah&&ak.mouseY<aK&&ak.mouseX<ai+H*5){for(var bl=0;bl<5;bl++){if(ak.mouseX<ai+H*(bl+1)){ak.rect(ai+H*bl+2,ah+1,ai+H*(bl+1)-2,aK-2);ak.textAlign(ak.LEFT,ak.BASELINE);ak.textSize(16);ak.fill(255);curMenu=bl;bf.$self.title(ai,ah-7);bf.mouseMainPaneControl=bl;break}}}else{curMenu=-1}}ak.addMethod(bf,"drawControl",bk);function bc(bl,bm){switch(curMenu){case 0:ak.text("Artist Info",bl,bm);break;case 1:ak.text("Heart Artist",bl,bm);break;case 2:ak.text("Artist's Facebook Page",bl,bm);break;case 3:ak.text("View Current Song Video",bl,bm);break;case 4:ak.text("Tweet About Song",bl,bm);break}}ak.addMethod(bf,"title",bc);function bb(){ak.textAlign(ak.LEFT,ak.TOP);ak.textSize(22);ak.fill(aE[2]);i(j.name,ai+10,aK+10,200,0,22);ak.fill(255);ak.textSize(16);var bm=j.topTracks.length;S=-1;for(var bl=0;bl<bm;bl++){if(bl==ap){ak.fill(aE[2]);i(j.topTracks[bl].title,ai+20,aK+35+bl*22,250,aE[2],30);ak.fill(255)}else{if(ak.mouseX>ai+20&&ak.mouseY<aK+35+(bl+1)*22&&ak.mouseY>aK+35+bl*22){ak.fill(aE[2]);i(j.topTracks[bl].title,ai+20,aK+35+bl*22,250,aE[2],30);S=bl;ak.fill(255)}else{i(j.topTracks[bl].title,ai+20,aK+35+bl*22,250,ak.color(255),30)}}}}ak.addMethod(bf,"printTopSongs",bb);function be(){ak.textAlign(ak.LEFT);ak.fill(255);ak.textSize(16);ak.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",ai+20,aK+35,u-ai-40,aR-aK)}ak.addMethod(bf,"printNoSong",be);function ba(bm,bl){bh();ai=bm;aK=bl;H=57;ah=aK-H;u=P-aA;t=ar-270;bf.num=bf.names.length;ak.textSize(16)}function bd(){if(arguments.length===2){ba.apply(bf,arguments)}else{bh()}}bd.apply(null,arguments)}return a9})();ak.SidePane=w;var o=(function(){function a9(){var bf=this;function bd(){ak.extendClassChain(bf)}bf.play=null;bf.ffwd=null;bf.pressedInSeekBar=false;bf.onVol=false;bf.onVolGen=false;bf.volDragged=false;bf.songPausedToBeginWith=false;bf.stillWithinSeekBar=false;bf.totTime=null;bf.total=0;function bc(){if(aw){ak.rectMode(ak.CORNERS);bf.play.update();bf.play.draw();bf.ffwd.draw();bf.$self.drawSeekBar();bf.$self.drawSongInfo();bf.$self.drawVolume();if(bf.onVolGen){bf.$self.drawVolumeSetter()}ak.rectMode(ak.CENTER);ak.ellipseMode(ak.CENTER_RADIUS)}}ak.addMethod(bf,"draw",bc);function bb(){ak.textAlign(ak.LEFT,ak.TOP);ak.textSize(20);var bv=aE[2];ak.fill(bv);var bw=0,bx=0;if(ak.textWidth(j.topTracks[ap].title+" by "+j.name)<=(ao-50-a7)){bw=bx=P}else{if(ak.textWidth(j.topTracks[ap].title)>(ao-50-a7)/2-16&&ak.textWidth(j.name)>(ao-50-a7)/2-16){bw=bx=(ao-50-a7)/2-16}else{if(ak.textWidth(j.topTracks[ap].title)>ak.textWidth(j.name)){bx=P;bw=ao-50-a7-ak.textWidth(n.artist+" by ")}else{bw=P;bx=ao-50-a7-ak.textWidth(j.topTracks[ap].title+" by ")}}}i(j.topTracks[ap].title,a7,h+37,bw,bv,24);i(j.name,a7+ak.textWidth(" by ")+ak.min(bw,ak.textWidth(j.topTracks[ap].title)),h+37,bx,bv,24);ak.fill(255);ak.text(" by ",a7+ak.min(bw,ak.textWidth(j.topTracks[ap].title)),h+37)}ak.addMethod(bf,"drawSongInfo",bb);function bi(){bf.play.mousePressed();bf.ffwd.mousePressed();bf.$self.checkSeekBar();bf.$self.checkVol()}ak.addMethod(bf,"mousePressed",bi);function br(){bf.play.mouseDragged();bf.ffwd.mouseDragged();bf.$self.dragSeekBar();bf.$self.dragVol()}ak.addMethod(bf,"mouseDragged",br);function bs(){bf.play.mouseReleased();bf.ffwd.mouseReleased();bf.$self.releaseSeekBar();bf.$self.releaseVol()}ak.addMethod(bf,"mouseReleased",bs);function bj(){if(ak.mouseX>ao-10&&ak.mouseX<ao+2&&ak.mouseY>h+44&&ak.mouseY<h+56){return true}return false}ak.addMethod(bf,"onVolume",bj);function bt(){if(ak.mouseX>ao-45&&ak.mouseX<ao+20&&ak.mouseY>h+15&&ak.mouseY<h+85){return true}return false}ak.addMethod(bf,"onVolumeSetter",bt);function ba(){if(bf.$self.onVolume()){bf.onVol=true;ak.stroke(255)}else{ak.noStroke();bf.onVol=false}ak.fill(255);ak.triangle(ao-10,h+50,ao,h+43,ao,h+57);ak.rect(ao-10,h+53,ao-3,h+47);ak.stroke(255);ak.strokeWeight(2);ak.noFill();if(!a4){if(U>80){ak.arc(ao+6,h+50,12,12,-(ak.PI/3),ak.PI/3)}if(U>60){ak.arc(ao+5,h+50,9,9,-(ak.PI/3),ak.PI/3)}if(U>40){ak.arc(ao+4,h+50,6,6,-(ak.PI/3),ak.PI/3)}if(U>20){ak.arc(ao+3,h+50,3,3,-(ak.PI/3),ak.PI/3)}}else{ak.stroke(aE[0]);ak.line(ao-9,h+42,ao+2,h+57)}if(bf.$self.onVolumeSetter()){bf.onVolGen=true}else{if(!bf.volDragged){bf.onVolGen=false}}}ak.addMethod(bf,"drawVolume",ba);function bn(){if(bf.onVol){bf.$self.toggleMute()}else{if(bf.onVolGen&&ak.mouseX>ao-40&&ak.mouseX<ao-20&&ak.mouseY>h+20&&ak.mouseY<h+80){bf.volDragged=true;U=(h+80-ak.mouseY)/0.6;n.setVolume(U)}}}ak.addMethod(bf,"checkVol",bn);function bu(){if(bf.volDragged){if(ak.mouseY>h+80){U=0}else{if(ak.mouseY<h+20){U=100}else{U=(h+80-ak.mouseY)/0.6}}n.setVolume(U)}}ak.addMethod(bf,"dragVol",bu);function bm(){if(bf.volDragged){bf.volDragged=false}}ak.addMethod(bf,"releaseVol",bm);function bh(){ak.stroke(255);ak.strokeWeight(2);ak.fill(0);ak.rect(ao-35,h+20,ao-25,h+80);if(U>0){ak.fill(aE[2]);ak.noStroke();ak.rect(ao-34,h+79,ao-26,h+81-U*0.6)}}ak.addMethod(bf,"drawVolumeSetter",bh);function be(){n.toggleMute();a4=!a4}ak.addMethod(bf,"toggleMute",be);function bo(){if(aw){if(ak.mouseX>aZ&&ak.mouseX<at-10-af&&ak.mouseY>h+40&&ak.mouseY<h+60){M=true;bf.stillWithinSeekBar=true;if(n.paused){bf.songPausedToBeginWith=true}else{bf.songPausedToBeginWith=false}n.pause()}}}ak.addMethod(bf,"checkSeekBar",bo);function bq(){if(aw){if(M){if(ak.mouseX>aZ&&ak.mouseX<at-10-af&&ak.mouseY>h+40&&ak.mouseY<h+60){var bw=0;if(n!=null&&n.readyState==1){bw=n.durationEstimate}else{if(n!=null&&n.readyState==3){bw=n.duration}}var bv=ak.__int_cast(ak.map(ak.mouseX,aZ,at-10-af,0,bw));if(!bf.songPausedToBeginWith){n.resume()}n.setPosition(bv)}M=false;bf.stillWithinSeekBar=false;if(!bf.songPausedToBeginWith){n.resume()}}}}ak.addMethod(bf,"releaseSeekBar",bq);function bk(){if(aw){if(M){if(ak.mouseX>aZ&&ak.mouseX<at-10-af&&ak.mouseY>h+40&&ak.mouseY<h+60){bf.stillWithinSeekBar=true}else{bf.stillWithinSeekBar=false}}}}ak.addMethod(bf,"dragSeekBar",bk);function bl(){ak.stroke(255);ak.strokeWeight(3);if(n!=null&&n.readyState==1){ak.strokeWeight(1);ak.line(aZ,h+50,at-10-af,h+50);ak.strokeWeight(3);var bv=ak.map(n.bytesLoaded,0,n.bytesTotal,aZ,at-10-af);if(bv>=0){ak.line(aZ,h+50,bv,h+50)}}else{ak.line(aZ,h+50,at-10-af,h+50)}if(n!=null&&n.readyState==1||n.readyState==3){var bw=null;if(!M||!bf.stillWithinSeekBar){if(n.readyState==1){bf.total=n.durationEstimate;bf.totTime=aO(bf.total/1000)}else{if(n.readyState==3){bf.total=n.duration;bf.totTime=aO(bf.total/1000)}}bw=aO(n.position/1000);var bv=ak.map(n.position,0,bf.total,aZ,at-10-af);if(bv>=0){ak.line(bv,h+40,bv,h+60)}}else{ak.line(ak.mouseX,h+40,ak.mouseX,h+60);bw=aO(ak.map(ak.mouseX,aZ,at-10-af,0,bf.total)/1000)}ak.fill(255);ak.textSize(15);ak.textAlign(ak.LEFT,ak.CENTER);ak.text(bw+"/"+bf.totTime,at-af,h+50)}ak.strokeWeight(1)}ak.addMethod(bf,"drawSeekBar",bl);function bg(){bd();af=ak.textWidth("0:00/0:00");aZ=at-10-af-P/e*150;bf.play=new J(aZ-100,h+50,20,10);bf.ffwd=new Q(aZ-50,h+50,20,10);ao=aZ-150;ak.textSize(15)}function bp(){if(arguments.length===0){bg.apply(bf,arguments)}else{bd()}}bp.apply(null,arguments)}return a9})();ak.Current=o;var aj=(function(){function a9(){var bf=this;function bh(){ak.extendClassChain(bf)}function be(bn){$("#popup-content").attr("src",bn);$("#popup-url").attr("href",bn);$("#center").hide();$("#popup").show()}function bk(bo){var bn="<table><tr>";$.each(bo,function(bp,bq){bn+="<td class='square-td'><div class='square' data-url='"+bq.url+"'><h2>"+bq.site+"</h2><p>"+bj(bq.text)+"</p></div></td>";if(bp==8){bn+="</tr>";return false}else{if((bp+1)%3==0){bn+="</tr><tr>"}}});$("#biographies").html(bn)}function bj(bn){return bn.substr(0,250)+"..."}function bd(bo){var bn="<table><tr>";$.each(bo,function(bp,bq){bn+="<td class='square-td'><div class='square' data-url='"+bq.url+"'><h2>"+bq.name+"</h2><p>"+bj(bq.summary)+"</p></div></td>";if(bp==8){bn+="</tr>";return false}else{if((bp+1)%3==0){bn+="</tr><tr>"}}});$("#blogs").html(bn)}function bm(bn){}function bl(bo){var bn="<table><tr>";$.each(bo,function(bp,bq){bn+="<td class='square-td'><div class='square' data-url='"+bq.url+"'><h2>"+bq.name+"</h2><p>"+bj(bq.summary)+"</p></div></td>";if(bp==8){bn+="</tr>";return false}else{if((bp+1)%3==0){bn+="</tr><tr>"}}});$("#news").html(bn)}function bi(bo){var bn="<table><tr>";$.each(bo,function(bp,bq){bn+="<td class='square-td'><div class='square video' data-url='"+bq.url+"'><h2>"+bq.title+"</h2><img class='video-thumbnail' src='"+bq.image_url+"'></div></td>";if(bp==8){bn+="</tr>";return false}else{if((bp+1)%3==0){bn+="</tr><tr>"}}});$("#videos").html(bn)}function bc(bn){$("#center").children().css("display","none");$("#"+bn).css("display","block")}bf.canvas=document.getElementById("canvas");bf.selectDiv=document.getElementById("artist-info");bf.selectDivHeight=635;bf.selectDivWidth=1158;bf.selectDivX=9;bf.selectDivY=9;function bg(bn){bf.selectDiv.style.width=bf.selectDivWidth;bf.selectDiv.style.height=bf.selectDivHeight;bf.selectDiv.style.top=bf.selectDivY+"px";bf.selectDiv.style.zIndex=1;$("#center, #popup, #popup-nav, #popup-content").css("width",bf.selectDivWidth+"px");$("#popup-content").css("height",bf.selectDivHeight+"px");$.getJSON("http://rapcities.com/getArtistInfo?id="+bn,function(bo){bk(bo.biographies);bd(bo.blogs);bm(bo.images);bl(bo.news);bi(bo.videos);$(".square").hover(function(){$(this).addClass("square-hover")},function(){$(this).removeClass("square-hover")}).click(function(){be($(this).data("url"))});$("#close").click(function(){$("#artist-info").css("z-index","-1")})});$(".type").click(function(){bc($(this).data("type"));$(".type").removeClass("selected-type");$(this).addClass("selected-type");$("#popup").hide();$("#center").show()}).hover(function(){$(this).addClass("hover-type")},function(){$(this).removeClass("hover-type")});$("#popup-close").click(function(){$("#popup").hide();$("#center").show()})}ak.addMethod(bf,"showArtistInfo",bg);function ba(){bh()}function bb(){if(arguments.length===0){ba.apply(bf,arguments)}else{bh()}}bb.apply(null,arguments)}return a9})();ak.ArtistInfo=aj;var aw=false;var aB=null;var aE=null;var m=null;var K=null;var z=null;var W=null;var l=null;var T=null;var aI=null;var v=0;var au=1;var f=2;var G=0;var d=1;var N=2;var a8=v;var I=false;var a3=N;var aL=0;var n=null;var ag=null,Y=null;var a7=0,a6=0,ar=0,at=0;var av=0;var y=1;var P=0,aR=0,h=0,E=0;var a2=0,aC=0;var V=null;var aA=0,az=0,e=0,aX=0;function aF(){P=ak.max(1300,$(window).width());aR=ak.max(800,$(window).height());if(P==1024||aR==800){$("body").css("overflow","visible")}e=1920;aX=1000;aA=P/e*300;az=aR/aX*300;a7=aA;a6=az;at=P-aA-294;ar=aR-30;h=a6-100;E=a7-10;aC=7757;a2=8189;ad=new ak.ArrayList();V=ak.loadImage("banner.png");ak.size(P,aR);ak.frameRate(30);ak.smooth();ak.rectMode(ak.CORNERS);ak.ellipseMode(ak.CENTER_RADIUS);aw=false;aB=ak.createFont("Arial",13);ak.textFont(aB);an();songs=new ak.ArrayList();z=new ak.HashMap();l=new w(at+10,a6);W=new o();T=new D();ag=new Array(8);Y=new Array(8);for(var ba=0;ba<8;ba++){ag[ba]=new Array(8);Y[ba]=new Array(8);for(var a9=0;a9<8;a9++){Y[ba][a9]=false}}aN(4,4);aI=new aj();s=ak.loadImage("facebook");am=ak.loadImage("youtube");r=ak.loadImage("info");aY=ak.loadImage("heart");ab=ak.loadImage("twitter")}ak.setup=aF;function b(ba,a9){if(ba!=P||a9!=aR){P=ba;aR=a9;aA=P/e*300;az=aR/aX*300;a7=aA;a6=az;at=P-aA-294;ar=aR-30;h=a6-100;E=a7-10;ak.size(P,aR);aq=(at-a7);ac=(ar-a6);ai=at+10;aK=a6;ah=aK-H;u=P-aA;t=ar-270;aH=ak.map(aq,0,a2,0,284);aG=ak.map(ac,0,aC,0,270);T.setMins();aZ=at-10-af-P/e*150;W.play.newPos(aZ-100,h+50);W.ffwd.newPos(aZ-50,h+50);ao=aZ-150}}ak.setUpSize=b;var s=null,am=null,aW=null,r=null,aY=null,X=null,ab=null;function an(){ak.colorMode(ak.RGB);aE=ak.createJavaArray("$p.color",[10]);m=ak.createJavaArray("$p.color",[10]);aE[0]=ak.color(255,0,0);aE[1]=ak.color(255,103,0);aE[2]=ak.color(255,182,0);aE[3]=ak.color(231,255,0);aE[4]=ak.color(0,255,18);aE[5]=ak.color(0,255,212);aE[6]=ak.color(0,104,155);aE[7]=ak.color(149,0,255);aE[8]=ak.color(248,0,255);aE[9]=ak.color(255,3,141);m[0]=ak.color(0,153,153);m[1]=ak.color(100,168,209);m[2]=ak.color(133,133,232);m[3]=ak.color(230,113,255);m[4]=ak.color(255,128,157);m[5]=ak.color(255,176,128);m[6]=ak.color(255,195,100);m[7]=ak.color(249,243,140);m[8]=ak.color(222,244,130);m[9]=ak.color(204,255,123)}ak.setUpColors=an;function ax(){T.draw();ak.imageMode(ak.CORNER);ak.image(V,0,0,P,aR);W.draw();l.draw();if(ay>-1){a5(ay)}}ak.draw=ax;var L=new ak.ArrayList();var j=null;function aU(){L.clear();var a9="http://rapcities.com/getArtists";if(a8){a9+="&sort="+a8}if(F){a9+="&genre="+aP}$.getJSON(a9,function(bb){if(bb!=null){var bc=bb.length;for(var ba=0;ba<bc;ba++){bb[ba].X=ak.map(bb[ba].x,725.056,935.131,1,2000);bb[ba].Y=ak.map(bb[ba].y,701.865,850.945,1,1422);L.add(bb[ba])}}})}ak.setUpArtists=aU;var B=0,A=0,aT=0,aS=0;var aq=0,ac=0,aH=0,aG=0;var ay=-1;function aN(ba,a9){var bb=null;if((ba==0)||(ba==1&&a9<1)){bb="0";bb+=String(ba*8+a9+1)+".grid"}else{bb=String(ba*8+a9+1)+".grid"}Y[ba][a9]=true;ag[ba][a9]=ak.loadImage(bb)}ak.loadMapPiece=aN;function a5(ba){var a9=L.get(ba).name;ak.textSize(18);var bb=ak.textWidth(a9);ak.stroke(aE[2]);ak.fill(0);ak.rectMode(ak.CORNERS);ak.rect(ak.mouseX,ak.mouseY-33,ak.mouseX+bb+12,ak.mouseY-7,10);ak.fill(aE[2]);ak.textAlign(ak.LEFT,ak.TOP);ak.text(a9,ak.mouseX+6,ak.mouseY-30)}ak.drawHoverInfo=a5;function x(){if(ay>=0){j=L.get(ay);aQ(j.topTracks[0].id);ap=0}else{if(curMenu>=0){switch(curMenu){case 0:aI.showArtistInfo(j.echoID);return;case 1:case 4:case 2:ak.link(j.facebook,"_new");return;case 3:al();p();n.pause();return}}else{if(S>=0){ap=S;aQ(j.topTracks[S].id)}}}}ak.mouseClicked=x;function aQ(a9){$.getJSON("http://rapcities.com/getTrack?id="+a9,function(ba){if(aw){ae()}aV(ba.url)})}ak.getSong=aQ;function aV(a9){n=soundManager.createSound({id:a9,url:a9,autoLoad:true,autoPlay:true,volume:U,onfinish:function(){aa()}});aw=true;if(a4){n.mute()}}ak.startSong=aV;function ae(){aw=false;n.stop();n.unload();n.destruct()}ak.stopSong=ae;function aJ(){if(ak.mouseY<h+145-70){W.mousePressed()}else{if(ak.mouseX>at){if(ak.mouseY<t){l.mousePressed()}else{T.miniMousePressed()}}else{if(ak.mouseX>a7&&ak.mouseY>a6&&ak.mouseY<ar){T.mousePressed()}}}}ak.mousePressed=aJ;function aD(){W.mouseDragged();T.mouseDragged();T.miniMouseDragged()}ak.mouseDragged=aD;function C(){T.mouseOut()}ak.mouseOut=C;function a(){W.mouseReleased();T.mouseReleased();T.miniMouseReleased()}ak.mouseReleased=a;var g=-1;var Z=1;var c=0;var O=true;function aM(){for(var a9=songs.size()-1;a9>-1;a9--){if(a9==S&&aw){songs.get(a9).stopSong()}songs.remove(a9)}S=-1;n=null}ak.resetSongs=aM;function aa(){ae();if(ap<j.topTracks.length-1){ap++;aQ(j.topTracks[ap].id)}else{a0()}}ak.createNext=aa;var ad=null;function a0(){var bb=false;for(var a9=0;a9<ad.size();a9++){if(ad.get(a9)==j.name){bb=true;break}}if(!bb){ad.add(j.name)}for(var a9=0;a9<L.size();a9++){var ba=L.get(a9);if(ba.x>B&&ba.x<aT&&ba.y>A&&ba.y<aS){if(!ak.__contains(ad,ba.name)){j=ba;aQ(j.topTracks[0].id);ap=0}}}}ak.nextArtist=a0;function R(ba,a9){this.length=ba;this.index=a9}function i(bc,bg,be,bf,a9,bj){if(ak.textWidth(bc)>bf){var bh=z.get(bc+ak.textWidth(bc));if(bh==null){bh=new R(0,0);z.put(bc+ak.textWidth(bc),bh)}var bb=bh.index;var bd=bc.length;if(bh.length>=ak.textWidth(bc.charAt(bb))){if(bb<bd-1){bh.index++;bb++;bh.length=0}else{bh.index=bb=0;bh.length=-40}}var bi=ak.textWidth(bc.charAt(bb))-bh.length;bb++;while(bi<bf&&bb<bd){bi+=ak.textWidth(bc.charAt(bb));bb++}ak.text(bc.substring(bh.index,bb),bg-bh.length,be);if(bb==bd){bi+=40;var ba=0;while(bi<bf){bi+=ak.textWidth(bc.charAt(ba));ba++}ak.text(bc.substring(0,ba),bg+ak.textWidth(bc.substring(bh.index,bb))-bh.length+40,be)}ak.noStroke();ak.fill(0);ak.rectMode(ak.CORNERS);ak.rect(bg-ak.textWidth((new ak.Character("W"))),be+bj,bg,be);ak.rect(bg+bf,be,bg+bf+ak.textWidth((new ak.Character("W"))),be+bj);ak.fill(a9);bh.length++;z.put(bc+ak.textWidth(bc),bh)}else{ak.text(bc,bg,be)}}ak.checkText=i;var a1=0;var q=1;var F=false;var aP=0;var ah=0,ai=0,t=0,u=0,H=0,aK=0;var S=-1;var ap=-1;var M=false;var U=50;var a4=false;var af=0,aZ=0,ao=0;function aO(bb){var ba=ak.__int_cast((bb%60));var a9=ak.__int_cast(((bb%3600)/60));var bc=null;if(ba==0){bc="00"}else{if(ba<10){bc="0"+ba}else{bc=ba}}return(a9+":"+bc)}ak.makeTime=aO;function al(){if($("div#dialogWindow").dialog("isOpen")){$("div#dialogWindow").dialog("close")}else{$("div#dialogWindow").dialog("open")}}ak.togglePlayer=al;function p(){$.ajax({type:"GET",dataType:"jsonp",url:"http://gdata.youtube.com/feeds/api/videos?q="+ak.__replace(j.topTracks[ap].title,/ /g,(new ak.Character("+")))+"+"+ak.__replace(j.name,/ /g,(new ak.Character("+")))+"&v=2&alt=jsonc&max-results=1&format=5",success:function(ba){if(ba.data.items.length>0){var a9=ba.data.items[0].id;$("#ytplayer").html('<script type="text/javascript">var params={allowScriptAccess:"always"};var atts={id:"ytplayer"};var url="http://www.youtube.com/v/'+a9+'?enablejsapi=1&playerapiid=ytplayer&version=3&autoplay=1&controls=1";swfobject.embedSWF(url,"ytplayer","350","300","8",null,null,params,atts);<\/script>')}else{$("#ytplayer").html("<p>Couldn't find this song on YouTube</p>")}}})}ak.loadVideo=p})        
      );
});
</script>
<script type="text/javascript">
$(window).resize(function(){
	if($(window).width() < 1300 || $(window).height() < 800){
		var p = Processing.getInstanceById('canvas');
		p.setUpSize(Math.max($(window).width(),1300),Math.max(800,$(window).height()));
		$("body").css("overflow","visible");
	}
	else{
		var p = Processing.getInstanceById('canvas');
		p.setUpSize($(window).width(),$(window).height());
		$("body").css("overflow","hidden");
	}
});
</script>
  </head>
  <body bgcolor="Black">
    <div id="parent">
      <canvas id="canvas">
        <font size="10" color="white">Your browser doesn't support HTML5! Please
          and use the latest version of Mozilla Firefox or Google Chrome.</font>
      </canvas>
	<div id="dialogWindow" title="YouTube Player">
		<div id="ytplayer">
			<p>Oops! Seems like you don't have Flash Player 8+ and/or JavaScript enabled!</p>

		</div>
	</div>
      <div id='artist-info'>
        <div id="top">
          <div class='type' data-type='biographies'>Biographies</div>
          <div class='type' data-type='blogs'>Blogs</div>
          <div class='type' data-type='images'>Images</div>
          <div class='type' data-type='news'>News</div>
          <div class='type' data-type='videos'>Videos</div>
          <div class='type' id='close'>Close</div>
          <div class='clear'></div>
        </div>
        <div id="center">
          <div id="biographies"></div>
          <div id="blogs"></div>
          <div id="images"></div>
          <div id="news"></div>
          <div id="videos"></div>
        </div>
        <div id="popup">
          <div id="popup-nav">
            <a id="popup-close" href="#">Close</a>
            <a id="popup-url" href="#">Go to site</a>
          </div>
          <iframe id="popup-content" src="">
        </div>
        <div class="clear"></div>
      </div>
    </div>
  </body>
</html>
