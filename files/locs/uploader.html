<html>
  <head>
    <title>Rapcities Uploader</title>

    <script type="text/javascript" src="processing.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<style type="text/css">
	#dialogWindow{
		z-index:1;
		position:absolute;
		right:18px;
		top:390px;
	}
	#YouTubeP{
		z-index:1;
	}
	</style>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(av){var k=(function(){function bt(){var bv=this;function bx(){av.extendClassChain(bv)}bv.x=0;bv.y=0;bv.hw=0;bv.hh=0;bv.invert=false;bv.pressedHere=false;function bA(){return av.mouseX>bv.x-bv.hw&&av.mouseX<bv.x+bv.hw&&av.mouseY>bv.y-bv.hh&&av.mouseY<bv.y+bv.hh}av.addMethod(bv,"pressed",bA);function bB(bD,bE){bv.x=bD;bv.y=bE}av.addMethod(bv,"newPos",bB);function bz(){}av.addMethod(bv,"mousePressed",bz);function bw(){}av.addMethod(bv,"mouseReleased",bw);function by(){}av.addMethod(bv,"draw",by);function bC(bE,bG,bD,bF){bx();bv.x=bE;bv.y=bG;bv.hw=bD;bv.hh=bF}function bu(){if(arguments.length===4){bC.apply(bv,arguments)}else{bx()}}bu.apply(null,arguments)}return bt})();av.Button=k;var H=(function(){function bt(){var bA=this;function bz(){av.extendClassChain(bA)}bA.NYC=null;bA.miniNYC=null;bA.NYCx=1000;bA.NYCy=711;bA.ox=0;bA.oy=0;bA.ocx=0;bA.ocy=0;bA.allX=0;bA.allY=0;bA.widths=null;bA.heights=null;bA.ominx=0;bA.ominy=0;bA.minix=0;bA.miniy=0;bA.maxix=0;bA.maxiy=0;bA.opressed=false;bA.miniPressed=false;bA.once=false;function bx(){bA.$self.drawMap();bA.$self.drawLocations();bA.$self.drawCurrent();av.fill(0);av.noStroke();av.rectMode(av.CORNERS);bA.$self.drawMini()}av.addMethod(bA,"draw",bx);function bv(){av.imageMode(av.CENTER);var bP=0;var bS=0;var bR=0;for(bR=0;bR<8;bR++){bP+=bA.widths[bR];if(bP>ba){break}}var bQ=0;for(bQ=0;bQ<8;bQ++){bS+=bA.heights[bQ];if(bS>a6){break}}bA.$self.grimage(bQ,bR,0+aC/2-(bA.widths[bR]/2-(bP-ba)),0+al/2-(bA.heights[bQ]/2-(bS-a6)));if(bQ>0){bA.$self.grimage(bQ-1,bR,0+aC/2-(bA.widths[bR]/2-(bP-ba)),0+al/2-bA.heights[bQ]-(bA.heights[bQ-1]/2-(bS-a6))+1)}if(bR>0){bA.$self.grimage(bQ,bR-1,0+aC/2-bA.widths[bR]-(bA.widths[bR-1]/2-(bP-ba))+1,0+al/2-(bA.heights[bQ]/2-(bS-a6)))}if(bQ<7){bA.$self.grimage(bQ+1,bR,0+aC/2-(bA.widths[bR]/2-(bP-ba)),0+al/2+bA.heights[bQ+1]/2+(bS-a6)-1)}if(bR<7){bA.$self.grimage(bQ,bR+1,0+aC/2+bA.widths[bR+1]/2+(bP-ba)-1,0+al/2-(bA.heights[bQ]/2-(bS-a6)))}if(bQ>0&&bR>0){bA.$self.grimage(bQ-1,bR-1,0+aC/2-bA.widths[bR]-(bA.widths[bR-1]/2-(bP-ba))+1,0+al/2-bA.heights[bQ]-(bA.heights[bQ-1]/2-(bS-a6))+1)}if(bQ>0&&bR<7){bA.$self.grimage(bQ-1,bR+1,0+aC/2+bA.widths[bR+1]/2+(bP-ba)-1,0+al/2-bA.heights[bQ]-(bA.heights[bQ-1]/2-(bS-a6))+1)}if(bQ<7&&bR<7){bA.$self.grimage(bQ+1,bR+1,0+aC/2+bA.widths[bR+1]/2+(bP-ba)-1,0+al/2+bA.heights[bQ+1]/2+(bS-a6)-1)}if(bQ<7&&bR>0){bA.$self.grimage(bQ+1,bR-1,0+aC/2-bA.widths[bR]-(bA.widths[bR-1]/2-(bP-ba))+1,0+al/2+bA.heights[bQ+1]/2+(bS-a6)-1)}}av.addMethod(bA,"drawMap",bv);function bD(bQ,bS,bR,bP){if(ar[bQ][bS]){av.image(ar[bQ][bS],bR,bP)}else{if(!ah[bQ][bS]){a2(bQ,bS);av.rectMode(av.CENTER);av.fill(150);av.noStroke();av.rect(bR,bP,1000,1000)}}}av.addMethod(bA,"grimage",bD);function bK(){av.imageMode(av.CORNERS);av.image(bA.miniNYC,au,v,w,ay);av.rectMode(av.CENTER);av.noFill();av.strokeWeight(1);av.stroke(J[0]);av.rect(au+ap,v+ao,aT,aS);av.ellipseMode(av.CENTER);for(var bP=0;bP<aZ.size();bP++){var bQ=aZ.get(bP);av.fill(aQ[bQ.type]);av.stroke(aQ[bQ.type]);if(bQ==bn){av.ellipse(av.map(bQ.x,531.749,531.749+853,au,w),av.map(bQ.y,231.083,231.083+810,v,ay),5,5)}else{av.ellipse(av.map(bQ.x,531.749,531.749+853,au,w),av.map(bQ.y,231.083,231.083+810,v,ay),3,3)}}}av.addMethod(bA,"drawMini",bK);function bF(){aC=V;al=a8;aT=av.map(aC,0,bk,0,284);aS=av.map(al,0,aN,0,270);ba=2600;a6=4100;ap=av.map(ba,0,bk,0,284);ao=av.map(a6,0,aN,0,270);bA.widths=new Array(1018,1027,1017,1028,1017,1028,1017,1037);bA.heights=new Array(950,970,970,969,979,970,970,979);bA.allX=9207;bA.allY=8707;bA.$self.setMins()}av.addMethod(bA,"prep",bF);function bC(){if(av.mouseX>au&&av.mouseY>v&&av.mouseX<w&&av.mouseY<ay){bA.miniPressed=true;ap=av.min(av.max(aT/2,av.mouseX-au),284-aT/2);ao=av.min(av.max(aS/2,av.mouseY-v),270-aS/2);bA.$self.miniToMaxi()}}av.addMethod(bA,"miniMousePressed",bC);function bE(){if(bA.miniPressed){ap=av.min(av.max(aT/2,av.mouseX-au),284-aT/2);ao=av.min(av.max(aS/2,av.mouseY-v),270-aS/2);bA.$self.miniToMaxi()}}av.addMethod(bA,"miniMouseDragged",bE);function bu(){ba=av.map(ap,0,284,0,bk);a6=av.map(ao,0,270,0,aN);bA.$self.setMins()}av.addMethod(bA,"miniToMaxi",bu);function bL(){bA.miniPressed=false}av.addMethod(bA,"miniMouseReleased",bL);function bM(){if(av.key==av.CODED){switch(av.keyCode){case (av.UP):ao=av.max(ao-1,aS/2);bA.$self.miniToMaxi();break;case (av.DOWN):ao=av.min(ao+1,270-aS/2);bA.$self.miniToMaxi();break;case (av.LEFT):ap=av.max(ap-1,aT/2);bA.$self.miniToMaxi();break;case (av.RIGHT):ap=av.min(ap+1,284-aT/2);bA.$self.miniToMaxi();break}}}av.addMethod(bA,"keyPressed",bM);function bG(){bA.ox=av.mouseX;bA.oy=av.mouseY;bA.ocx=ba;bA.ocy=a6;bA.ominx=F;bA.ominy=D;bA.opressed=true}av.addMethod(bA,"mousePressed",bG);function bN(){if(bA.opressed){ba=bA.ocx-(av.mouseX-bA.ox);a6=bA.ocy-(av.mouseY-bA.oy);if(ba>bk-aC/2){ba=bk-aC/2}if(ba<aC/2){ba=aC/2}if(a6<al/2){a6=al/2}if(a6>aN-al/2){a6=aN-al/2}ap=av.map(ba,0,bk,0,284);ao=av.map(a6,0,aN,0,270);bA.$self.setMins()}}av.addMethod(bA,"mouseDragged",bN);function bw(){F=av.map(ba-aC/2,0,bk,531.749,531.749+853);bc=av.map(ba+aC/2,0,bk,531.749,531.749+853);D=av.map(a6-al/2,0,aN,231.083,231.083+810);a9=av.map(a6+al/2,0,aN,231.083,231.083+810)}av.addMethod(bA,"setMins",bw);function bO(){bA.opressed=false}av.addMethod(bA,"mouseReleased",bO);function bH(){bA.opressed=false}av.addMethod(bA,"mouseOut",bH);function by(){av.imageMode(av.CENTER);ad=-1;for(var bQ=0;bQ<aZ.size();bQ++){var bS=aZ.get(bQ);if(bS.x<bc+10&&bS.x>F-10&&bS.y<a9+15&&bS.y>D-15&&a7.get(bS.type).width>0){var bP=av.map(bS.x,F,bc,0,V);var bT=av.map(bS.y,D,a9,0,a8);if(av.mouseX<bP+15&&av.mouseX>bP-15&&av.mouseY<bT+15&&av.mouseY>bT-15&&(av.mouseX<au||av.mouseX>w||av.mouseY<at||av.mouseY>ay)){av.image(a7.get(bS.type),bP,bT);ad=bQ}else{if(bn&&bS._id==bn._id){av.image(a7.get(bS.type),bP,bT);av.textSize(18);var bR=av.textWidth(bS.title);av.stroke(aQ[bS.type]);av.fill(0);av.rectMode(av.CENTER);av.rect(bP,bT-40,bR+12,26,10);av.fill(aQ[bS.type]);av.textAlign(av.LEFT,av.TOP);av.text(bS.title,bP-bR/2,bT-50)}else{av.image(a7.get(bS.type),bP,bT)}}}}}av.addMethod(bA,"drawLocations",by);function bI(){if(A&&q.width>0){br=true;if(!i){a0=av.map(av.mouseX,0,av.width,F,bc);aY=av.map(av.mouseY,0,av.height,D,a9);av.image(q,av.map(a0,F,bc,0,V),av.map(aY,D,a9,0,a8))}else{av.image(q,av.map(a0,F,bc,0,V),av.map(aY,D,a9,0,a8))}}}av.addMethod(bA,"drawCurrent",bI);function bB(){bz();bA.NYC=av.loadImage("http://rapcities.com/NYC.gif");bA.miniNYC=av.loadImage("http://rapcities.com/miniNYC.png");bA.ox=bA.oy=-1;bA.$self.prep()}function bJ(){if(arguments.length===0){bB.apply(bA,arguments)}else{bz()}}bJ.apply(null,arguments)}return bt})();av.Map=H;var O=(function(){function bt(){var bx=this;var bA={$upcast:bx};function bz(){k.apply(bA,arguments);if(!("$self" in bA)){av.extendClassChain(bA)}}bx.play=false;function bv(){return bx.play}av.addMethod(bx,"paused",bv);function bD(){if(bA.pressed()){bx.invert=true;bx.pressedHere=true}}av.addMethod(bx,"mousePressed",bD);function bB(){if(bA.pressed()&&bx.pressedHere){bx.invert=true}else{bx.invert=false}}av.addMethod(bx,"mouseDragged",bB);function by(){if(bx.invert&&bx.pressedHere){if(aH&&p==aw){song.togglePause()}else{if(p==bm){if(bb.getPlayerState()==2){bb.playVideo()}else{bb.pauseVideo()}}}bx.invert=false}bx.pressedHere=false}av.addMethod(bx,"mouseReleased",by);function bu(){if(p==aw&&aH){if(song!=null&&song.playState==1){if(song.paused){if(!R){bx.play=true}}else{bx.play=false}}else{bx.play=true}}else{if(p==bm){if(bb.getPlayerState()==2||bb.getPlayerState()==-1){if(!R){bx.play=true}}else{bx.play=false}}}}av.addMethod(bx,"update",bu);function bC(){if(bx.invert){av.fill(255);av.noStroke()}else{av.noFill();if(bA.pressed()){av.stroke(255)}else{av.noStroke()}}av.rect(bx.x-bx.hw,bx.y-bx.hh,bx.x+bx.hw,bx.y+bx.hh);if(bx.invert){av.fill(0);av.noStroke()}else{av.fill(255);av.noStroke()}if(bx.play){av.triangle(bx.x-bx.hw/2,bx.y-bx.hh/2,bx.x-bx.hw/2,bx.y+bx.hh/2,bx.x+bx.hw/2,bx.y)}else{av.rect(bx.x-bx.hw/2,bx.y-bx.hh/2,bx.x-1,bx.y+bx.hh/2);av.rect(bx.x+bx.hw/2,bx.y-bx.hh/2,bx.x+1,bx.y+bx.hh/2)}}av.addMethod(bx,"draw",bC);function bE(bG,bI,bF,bH){bz(bG,bI,bF,bH);bx.play=true}function bw(){if(arguments.length===4){bE.apply(bx,arguments)}else{bz()}}bw.apply(null,arguments)}av.extendStaticMembers(bt,k);bt.$base=k;return bt})();av.Play=O;var W=(function(){function bt(){var bv=this;var by={$upcast:bv};function bx(){k.apply(by,arguments);if(!("$self" in by)){av.extendClassChain(by)}}bv.invert=false;bv.pressed=false;function bB(){if(by.pressed()){bv.invert=true;bv.pressedHere=true}}av.addMethod(bv,"mousePressed",bB);function bz(){if(by.pressed()&&bv.pressedHere){bv.invert=true}else{bv.invert=false}}av.addMethod(bv,"mouseDragged",bz);function bw(){if(bv.invert&&bv.pressedHere){bp();bv.invert=false}bv.pressedHere=false}av.addMethod(bv,"mouseReleased",bw);function bA(){if(bv.invert){av.fill(255);av.noStroke()}else{if(by.pressed()){av.textSize(14);var bD=av.textWidth("Next Location");av.fill(0);av.stroke(255);av.rect(bv.x-bD/2-3,bv.y+15,bv.x+bD/2+3,bv.y+35);av.textAlign(av.CENTER,av.TOP);av.fill(255);av.text("Next Location",bv.x,bv.y+17);av.noFill()}else{av.noStroke();av.noFill()}}av.rect(bv.x-bv.hw,bv.y-bv.hh,bv.x+bv.hw,bv.y+bv.hh);if(bv.invert){av.fill(0);av.noStroke()}else{av.fill(255);av.noStroke()}av.rect(bv.x-3,bv.y-bv.hh/2,bv.x-6,bv.y+bv.hh/2);av.triangle(bv.x,bv.y-bv.hh/2,bv.x,bv.y+bv.hh/2,bv.x+bv.hw/2+1,bv.y)}av.addMethod(bv,"draw",bA);function bC(bE,bG,bD,bF){bx(bE,bG,bD,bF);bv.invert=false}function bu(){if(arguments.length===4){bC.apply(bv,arguments)}else{bx()}}bu.apply(null,arguments)}av.extendStaticMembers(bt,k);bt.$base=k;return bt})();av.Forward=W;var y=(function(){function bt(){var bw=this;function bz(){av.extendClassChain(bw)}bw.panel=bj;bw.margin=10;bw.slant=2;bw.num=0;bw.mouseMainPaneControl=-1;bw.mouseSort=-1;bw.mouseFilter=0;bw.genreFilter=0;bw.mouseOnTitle=0;bw.mouseGenre=-1;bw.colorIcon=null;bw.sortIcon=null;bw.names=[" Current Info"," Color Mode","Sorting"];bw.currentColor=0;function bB(){bw.$self.drawControl();if(!bn){bw.$self.printNoSong()}else{bw.$self.printLocation()}}av.addMethod(bw,"draw",bB);function bC(){}av.addMethod(bw,"mousePressed",bC);function by(){}av.addMethod(bw,"mouseReleased",by);function bD(){av.fill(0);av.strokeWeight(2);av.stroke(255);av.rectMode(av.CORNERS);av.rect(au,aV,w+1,v);av.textSize(15);av.rectMode(av.CORNERS);av.noFill();av.rect(au,ay,w+1,v)}av.addMethod(bw,"drawControl",bD);function bA(){av.textAlign(av.LEFT,av.TOP);av.textSize(22);av.fill(aQ[bn.type]);j(bn.title,au+10,aV+10,200,0,22);av.fill(255);av.textSize(16);curVid=-1;if(bn.list){var bF=bn.list.length;for(var bE=0;bE<bF;bE++){if(bE==P){av.fill(aQ[bn.type]);j(bn.list[bE].title,au+20,aV+35+bE*22,248,aQ[bn.type],30);av.fill(255)}else{if(av.mouseX>au+20&&av.mouseY<aV+35+(bE+1)*22&&av.mouseY>aV+35+bE*22){av.fill(aQ[bn.type]);j(bn.list[bE].title,au+20,aV+35+bE*22,248,aQ[bn.type],30);curVid=bE;av.fill(255)}else{j(bn.list[bE].title,au+20,aV+35+bE*22,248,av.color(255),30)}}}}else{av.text(bn.info,au+20,aV+35,248,w-au+20)}}av.addMethod(bw,"printLocation",bA);function bx(){av.textAlign(av.LEFT);av.fill(255);av.textSize(16);av.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",au+20,aV+35,w-au-40,a8-aV)}av.addMethod(bw,"printNoSong",bx);function bu(bF,bE){bz();au=bF;at=bE;M=57;aV=at+M;w=V-aK;v=at+555;ay=v+270;bw.num=bw.names.length;av.textSize(16)}function bv(){if(arguments.length===2){bu.apply(bw,arguments)}else{bz()}}bv.apply(null,arguments)}return bt})();av.SidePane=y;var o=(function(){function bt(){var by=this;function bw(){av.extendClassChain(by)}by.play=null;by.ffwd=null;by.pressedInSeekBar=false;by.onVol=false;by.onVolGen=false;by.volDragged=false;by.songPausedToBeginWith=false;by.stillWithinSeekBar=false;by.totTime=null;by.total=0;function bv(){if(p==bm||(p==aw&&aH)){av.rectMode(av.CORNERS);by.play.update();by.play.draw();by.ffwd.draw();by.$self.drawSeekBar();by.$self.drawVolume();if(by.onVolGen){by.$self.drawVolumeSetter()}av.rectMode(av.CENTER);av.ellipseMode(av.CENTER_RADIUS)}}av.addMethod(by,"draw",bv);function bB(){by.play.mousePressed();by.ffwd.mousePressed();by.$self.checkSeekBar();by.$self.checkVol()}av.addMethod(by,"mousePressed",bB);function bK(){by.play.mouseDragged();by.ffwd.mouseDragged();by.$self.dragSeekBar();by.$self.dragVol()}av.addMethod(by,"mouseDragged",bK);function bL(){by.play.mouseReleased();by.ffwd.mouseReleased();by.$self.releaseSeekBar();by.$self.releaseVol()}av.addMethod(by,"mouseReleased",bL);function bC(){if(av.mouseX>aB-10&&av.mouseX<aB+2&&av.mouseY>E-6&&av.mouseY<E+6){return true}return false}av.addMethod(by,"onVolume",bC);function bM(){if(av.mouseX>aB-volS-10&&av.mouseX<aB+20&&av.mouseY>E-volY&&av.mouseY<E+volY){return true}return false}av.addMethod(by,"onVolumeSetter",bM);function bu(){if(by.$self.onVolume()){by.onVol=true;av.stroke(255)}else{av.noStroke();by.onVol=false}av.fill(255);av.triangle(aB-10,E,aB,E-7,aB,E+7);av.rect(aB-10,E+3,aB-3,E-3);av.stroke(255);av.strokeWeight(2);av.noFill();av.ellipseMode(av.RADIUS);if(!bo){if(ac>80){av.arc(aB+6,E,12,12,-(av.PI/3),av.PI/3)}if(ac>60){av.arc(aB+5,E,9,9,-(av.PI/3),av.PI/3)}if(ac>40){av.arc(aB+4,E,6,6,-(av.PI/3),av.PI/3)}if(ac>20){av.arc(aB+3,E,3,3,-(av.PI/3),av.PI/3)}}else{av.stroke(J[0]);av.line(aB-9,E-8,aB+2,E+7)}if(by.$self.onVolumeSetter()){by.onVolGen=true}else{if(!by.volDragged){by.onVolGen=false}}}av.addMethod(by,"drawVolume",bu);function bG(){if(by.onVol){by.$self.toggleMute()}else{if(by.onVolGen&&av.mouseX>aB-volS-5&&av.mouseX<aB-volS+5&&av.mouseY>E-volY&&av.mouseY<E+volY){by.volDragged=true;ac=(E+volY-av.mouseY)/volD;if(p==aw){song.setVolume(ac)}else{if(p==bm){bb.setVolume(ac)}}}}}av.addMethod(by,"checkVol",bG);function bN(){if(by.volDragged){if(av.mouseY>E+volY){ac=0}else{if(av.mouseY<E-volY){ac=100}else{ac=(E+volY-av.mouseY)/volD}}if(p==aw){song.setVolume(ac)}else{if(p==bm){bb.setVolume(ac)}}}}av.addMethod(by,"dragVol",bN);function bF(){if(by.volDragged){by.volDragged=false}}av.addMethod(by,"releaseVol",bF);function bA(){av.stroke(255);av.strokeWeight(2);av.fill(0);av.rect(aB-volS-5,E-volY,aB-volS+5,E+volY);if(ac>0){av.fill(J[2]);av.noStroke();av.rect(aB-volS-4,E+volY-1,aB-volS+4,E+volY+1-ac*volD)}}av.addMethod(by,"drawVolumeSetter",bA);function bx(){if(p==aw&&aH){song.toggleMute()}else{if(p==bm){if(bb.isMuted()){bb.unMute()}else{bb.mute()}}}bo=!bo}av.addMethod(by,"toggleMute",bx);function bH(){if((p==aw&&aH)||p==bm){if(av.mouseX>bi&&av.mouseX<seekRight&&av.mouseY>E-10&&av.mouseY<E+10){R=true;by.stillWithinSeekBar=true;if((p==aw&&song.paused)||(p==bm&&bb.getPlayerState()==2)){by.songPausedToBeginWith=true}else{by.songPausedToBeginWith=false}if(p==aw){song.pause()}else{bb.pauseVideo()}}}}av.addMethod(by,"checkSeekBar",bH);function bJ(){if(p==bm||(p==aw&&aH)){if(R){if(av.mouseX>bi&&av.mouseX<seekRight&&av.mouseY>E-10&&av.mouseY<E+10){var bP=0;if(p==aw){if(song!=null&&song.readyState==1){bP=song.durationEstimate}else{if(song!=null&&song.readyState==3){bP=song.duration}}var bO=av.__int_cast(av.map(av.mouseX,bi,seekRight,0,bP));if(!by.songPausedToBeginWith){song.resume()}song.setPosition(bO)}else{var bO=av.__int_cast(av.map(av.mouseX,bi,seekRight,0,bb.getDuration()));bb.seekTo(bO,true);if(!by.songPausedToBeginWith){bb.playVideo()}}}R=false;by.stillWithinSeekBar=false;if(!by.songPausedToBeginWith){if(p==aw){song.resume()}else{bb.playVideo()}}}}}av.addMethod(by,"releaseSeekBar",bJ);function bD(){if(p==bm||(p==aw&&aH)){if(R){if(av.mouseX>bi&&av.mouseX<seekRight&&av.mouseY>E-10&&av.mouseY<E+10){by.stillWithinSeekBar=true}else{by.stillWithinSeekBar=false}}}}av.addMethod(by,"dragSeekBar",bD);function bE(){av.stroke(255);av.strokeWeight(3);if(p==bm&&bb.getPlayerState()==-1){av.fill(255);av.textSize(19);av.textAlign(av.LEFT,av.CENTER);av.text("-:--/-:--",aE-28-aq,E)}if((p==aw&&song!=null&&song.readyState==1)||p==bm&&bb.getPlayerState()==3){av.strokeWeight(1);av.line(bi,E,seekRight,E);av.strokeWeight(3);var bO=0;if(p==aw){bO=av.map(song.bytesLoaded,0,song.bytesTotal,bi,seekRight)}else{bO=av.map(bb.getVideoBytesLoaded(),0,bb.getVideoBytesTotal(),bi,seekRight)}if(bO>=0){av.line(bi,E,bO,E)}}else{av.line(bi,E,seekRight,E)}if((p==aw&&song!=null&&(song.readyState==1||song.readyState==3))||(p==bm&&bb.getPlayerState()>0)){var bP=null;if(!R||!by.stillWithinSeekBar){var bO=0;if(p==aw){if(song.readyState==1){by.total=song.durationEstimate;by.totTime=a3(by.total/1000)}else{if(song.readyState==3){by.total=song.duration;by.totTime=a3(by.total/1000)}}bP=a3(song.position/1000);bO=av.map(song.position,0,by.total,bi,seekRight)}else{if(p==bm){by.total=bb.getDuration();by.totTime=a3(by.total);bP=a3(bb.getCurrentTime());bO=av.map(bb.getCurrentTime(),0,by.total,bi,seekRight)}}if(bO>=0){av.line(bO,E-10,bO,E+10)}}else{av.line(av.mouseX,E-10,av.mouseX,E+10);var bQ=av.map(av.mouseX,bi,seekRight,0,by.total);if(p==aw){bQ/=1000}bP=a3(bQ)}av.fill(255);av.textSize(15);av.textAlign(av.LEFT,av.CENTER);av.text(bP+"/"+by.totTime,aE-30-aq,E)}av.strokeWeight(1)}av.addMethod(by,"drawSeekBar",bE);function bz(){bw();aO=au;aE=w;n=v-230;bd=v;aq=av.textWidth("0:00/0:00");bi=au+95;E=v-18;by.play=new O(au+72,E,10,10);by.ffwd=new W(w-20,E,10,10);aB=au+40;volY=15;volD=0.3;volS=20;seekRight=w-40-aq;av.textSize(15)}function bI(){if(arguments.length===0){bz.apply(by,arguments)}else{bw()}}bI.apply(null,arguments)}return bt})();av.Current=o;var aH=false;var aL=null;var J=null;var m=null;var Q=null;var C=null;var ae=null;var l=null;var Z=null;var x=0;var aD=1;var f=2;var L=0;var d=1;var S=2;var bs=x;var N=false;var bl=S;var aW=0;var ar=null,ah=null;var aF=0;var B=1;var V=0,a8=0,h=0,I=0;var bk=0,aN=0;var aK=0,aJ=0,e=0,bg=0;var ay=0;function aR(){V=av.max(700,$(window).width());a8=av.max(870,$(window).height());aM();var bv=av.__split(window.location.pathname,(new av.Character("/")));if(bv.length>0&&bv[0]!="songid"){if(bv.length<3){sponsor=bv[1]}else{sponsor=bv[3]}}logo=av.loadImage("http://rapcities.com/logo");$("#parent").css("width",V).css("height",a8);if(V==700||a8==870){$("body").css("overflow","visible")}e=1920;bg=1000;aK=20;aJ=30;h=30;I=0;aN=7757;bk=8189;ax();am=new av.ArrayList();av.size(V,a8);av.frameRate(30);av.smooth();av.rectMode(av.CORNERS);av.ellipseMode(av.CENTER_RADIUS);aH=false;aL=av.createFont("Arial",13);av.textFont(aL);aA();songs=new av.ArrayList();C=new av.HashMap();l=new y(V-aK-284,aJ);ae=new o();Z=new H();ar=new Array(8);ah=new Array(8);for(var bu=0;bu<8;bu++){ar[bu]=new Array(8);ah[bu]=new Array(8);for(var bt=0;bt<8;bt++){ah[bu][bt]=false}}u=av.loadImage("http://rapcities.com/facebook");az=av.loadImage("http://rapcities.com/youtube");t=av.loadImage("http://rapcities.com/info");bh=av.loadImage("http://rapcities.com/heart");ak=av.loadImage("http://rapcities.com/twitter")}av.setup=aR;function b(bu,bt){if(bu!=V||bt!=a8){V=bu;a8=bt;$("#parent").css("width",bu).css("height",bt);h=30;I=0;av.size(V,a8);aC=V;al=a8;au=V-aK-284;w=V-aK;aT=av.map(aC,0,bk,0,284);aS=av.map(al,0,aN,0,270);Z.setMins();aB=au+40;ae.play.newPos(au+72,E);ae.ffwd.newPos(w-20,E);bi=au+95;aB=au+40;seekRight=w-40-aq;aO=au;aE=w}}av.setUpSize=b;var u=null,az=null,bf=null,t=null,bh=null,ag=null,ak=null;function aA(){av.colorMode(av.RGB);J=av.createJavaArray("$p.color",[10]);m=av.createJavaArray("$p.color",[10]);J[0]=av.color(255,0,0);J[1]=av.color(255,103,0);J[2]=av.color(255,182,0);J[3]=av.color(231,255,0);J[4]=av.color(0,255,18);J[5]=av.color(0,255,212);J[6]=av.color(0,104,155);J[7]=av.color(149,0,255);J[8]=av.color(248,0,255);J[9]=av.color(255,3,141);m[0]=av.color(0,153,153);m[1]=av.color(100,168,209);m[2]=av.color(133,133,232);m[3]=av.color(230,113,255);m[4]=av.color(255,128,157);m[5]=av.color(255,176,128);m[6]=av.color(255,195,100);m[7]=av.color(249,243,140);m[8]=av.color(222,244,130);m[9]=av.color(204,255,123)}av.setUpColors=aA;function aI(){Z.draw();av.imageMode(av.CORNER);av.image(logo,0,0);l.draw();ae.draw();if(ad>-1){bq(ad)}}av.draw=aI;var a7=new av.HashMap();var ab=[];var aQ=[];var aZ=new av.ArrayList();function aM(){$.getJSON("http://rapcities.com/loc/browse?hasLoc=8",function(bu){if(bu&&bu.locs){for(var bt=0;bt<bu.locs.length;bt++){aZ.add(bu.locs[bt])}}});$.getJSON("http://rapcities.com/loc/getTypes",function(bu){if(bu&&bu.types){for(var bt=0;bt<bu.types.length;bt++){a7.put(bu.types[bt]._id,av.requestImage("http://rapcities.com/loc/getTypeIcon?_id="+bu.types[bt]._id));aQ[bu.types[bt]._id]=av.color(bu.types[bt].r,bu.types[bt].g,bu.types[bt].b);ab[bu.types[bt]._id]=bu.types[bt].mediaType}}})}av.setUpLocations=aM;var F=0,D=0,bc=0,a9=0;var aC=0,al=0,aT=0,aS=0;var ad=-1;function a2(bu,bt){var bv=null;if((bu==0)||(bu==1&&bt<1)){bv="0";bv+=String(bu*8+bt+1)+".large.grid"}else{bv=String(bu*8+bt+1)+".large.grid"}ah[bu][bt]=true;ar[bu][bt]=av.loadImage("http://rapcities.com/"+bv)}av.loadMapPiece=a2;function K(){Z.keyPressed()}av.keyPressed=K;var ap=0,ao=0,ba=0,a6=0;var q=null;var A=false;var br=false;var af=null;var i=false;var a0=null,aY=null;var bn=null;function z(){if(ad>=0){bn=aZ.get(ad);console.log(bn);P=0;r()}else{if(curVid>=0){P=curVid;r()}else{if(av.mouseX<au||av.mouseX>w||av.mouseY<at||av.mouseY>ay&&av.mouseButton=="LEFT"){if(av.mouseButton==av.LEFT){if(br){if(i){$.ajax({url:"http://rapcities.com/loc/editLocation",data:{_id:af,x:a0+"",y:aY+""},success:function(bt){if(bt){if(bt.success){var bu="Operation Successful";if(bt.message){bu+=(new av.Character("\n"))+bt.message}alert(bu)}else{alert("There seems to be an error:\n\n"+bt.message)}}}})}else{i=true}}else{af=document.input._id.value;if(af&&af.length>6){q=av.requestImage("http://rapcities.com/loc/getTypeIconID?_id="+af);A=true}}}else{q=null;br=false;i=false;A=false}}}}}av.mouseClicked=z;function bq(bt){var bv=aZ.get(bt);av.textSize(18);var bu=av.textWidth(bv.title);av.stroke(aQ[bv.type]);av.fill(0);av.rectMode(av.CORNERS);av.rect(av.mouseX,av.mouseY-33,av.mouseX+bu+12,av.mouseY-7,10);av.fill(aQ[bv.type]);av.textAlign(av.LEFT,av.TOP);av.text(bv.title,av.mouseX+6,av.mouseY-30)}av.drawHoverInfo=bq;function a5(bt){$.getJSON("http://rapcities.com/getTrack?id="+bt,function(bu){if(aH){an()}be(bu.url)})}av.getSong=a5;function be(bt){song=soundManager.createSound({id:bt,url:bt,autoLoad:true,autoPlay:true,volume:ac,onfinish:function(){aj()}});aH=true;if(bo){song.mute()}}av.startSong=be;function an(){aH=false;song.stop();song.unload();song.destruct()}av.stopSong=an;function aU(){if(av.mouseY<bd&&av.mouseY>n&&av.mouseX<aE&&av.mouseX>aO){ae.mousePressed()}else{if(av.mouseX>au&&av.mouseX<w&&av.mouseY>at&&av.mouseY<ay){if(av.mouseY<v){l.mousePressed()}else{Z.miniMousePressed()}}else{Z.mousePressed()}}}av.mousePressed=aU;function aP(){ae.mouseDragged();Z.mouseDragged();Z.miniMouseDragged()}av.mouseDragged=aP;function G(){Z.mouseOut();ae.mouseReleased()}av.mouseOut=G;function a(){ae.mouseReleased();Z.mouseReleased();Z.miniMouseReleased()}av.mouseReleased=a;var g=-1;var ai=1;var c=0;var U=true;function aX(){for(var bt=songs.size()-1;bt>-1;bt--){if(bt==Y&&aH){songs.get(bt).stopSong()}songs.remove(bt)}Y=-1;song=null}av.resetSongs=aX;function aj(){stopVideo();if(P<bn.list.length-1){P++;r()}else{nextVideo()}}av.createNext=aj;var am=null;function bp(){var bv=false;for(var bt=0;bt<am.size();bt++){if(am.get(bt)==bn._id){bv=true;break}}if(!bv){am.add(bn._id)}for(var bt=0;bt<aZ.size();bt++){var bu=aZ.get(bt);if(bu.x>F&&bu.x<bc&&bu.y>D&&bu.y<a9&&!av.__contains(am,bu._id)){bn=bu;P=0;r()}}}av.nextLocation=bp;function X(bu,bt){this.length=bu;this.index=bt}function j(bw,bA,by,bz,bt,bD){if(av.textWidth(bw)>bz){var bB=C.get(bw+av.textWidth(bw));if(bB==null){bB=new X(0,0);C.put(bw+av.textWidth(bw),bB)}var bv=bB.index;var bx=bw.length;if(bB.length>=av.textWidth(bw.charAt(bv))){if(bv<bx-1){bB.index++;bv++;bB.length=0}else{bB.index=bv=0;bB.length=-40}}var bC=av.textWidth(bw.charAt(bv))-bB.length;bv++;while(bC<bz&&bv<bx){bC+=av.textWidth(bw.charAt(bv));bv++}av.text(bw.substring(bB.index,bv),bA-bB.length,by);if(bv==bx){bC+=40;var bu=0;while(bC<bz){bC+=av.textWidth(bw.charAt(bu));bu++}av.text(bw.substring(0,bu),bA+av.textWidth(bw.substring(bB.index,bv))-bB.length+40,by)}av.noStroke();av.fill(0);av.rectMode(av.CORNERS);av.rect(bA-av.textWidth((new av.Character("W"))),by+bD,bA,by);av.rect(bA+bz,by,bA+bz+av.textWidth((new av.Character("W"))),by+bD);av.fill(bt);bB.length++;C.put(bw+av.textWidth(bw),bB)}else{av.text(bw,bA,by)}}av.checkText=j;var bj=0;var s=1;var a4=0;var at=0,au=0,v=0,w=0,M=0,aV=0;var Y=-1;var P=-1;var R=false;var ac=50;var bo=false;var aq=0,bi=0,aB=0;var aE=0,aO=0,n=0,bd=0,E=0;function a3(bv){var bu=av.__int_cast((bv%60));var bt=av.__int_cast(((bv%3600)/60));var bw=null;if(bu==0){bw="00"}else{if(bu<10){bw="0"+bu}else{bw=bu}}return(bt+":"+bw)}av.makeTime=a3;function T(){if(bn.list&&P<bn.list.length-1){P++;r()}else{nextArtist()}}av.videoEnded=T;function ax(){$("#ytplayer").html('<script type="text/javascript">var params = { allowScriptAccess: "always" };var atts = { id: "YouTubeP" };swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3", "ytplayer", "283", "200", "8", null, null, params, atts);<\/script>')}av.togglePlayer=ax;var bb=null;var p=false;var aw=1;var bm=2;function aG(){bb=document.getElementById("YouTubeP");p=bm;bb.setVolume(ac)}av.prepPlayer=aG;function r(){if(bn.list&&bn.list.length>0){bb.loadVideoById(bn.list[P].ytid)}else{if(bn.ytid){bb.loadVideoById(bn.ytid)}}}av.loadVideo=r;function a1(bw,bu){var bx=null;if(bx==bn._id){bx=false}else{bx=true}for(var bv=0;bv<aZ.size();bv++){if(bw==aZ.get(bv)._id){bn=aZ.get(bv);ba=av.map(bn.x,531.749,531.749+853,0,bk);a6=av.map(bn.y,231.083,231.083+810,0,aN);ap=av.map(ba,0,bk,0,284);ao=av.map(a6,0,aN,0,270);Z.setMins();if(bu&&bn.list){for(var bt=0;bt<bn.list.length;bt++){if(bn.list[bt].RID==bu){P=bt;r()}}}else{P=0;r()}}}}av.playVideo=a1;function aa(){$.getJSON("http://rapcities.com/getBio?id="+artist.RID,function(bt){if(bt!=null){$("div#biolog").html("<b>"+artist.name+"</b><br /><p>"+bt.text+'<br /><br />Source: <a href="'+bt.url+'">Wikipedia</a></p>');$("div#biolog",window.parent.document).scrollTop(0)}});if(!$("div#biolog").dialog("isOpen")){$("div#biolog").dialog("open")}}av.prepareBio=aa})     
)});
</script>
	<script type="text/javascript">
		function onYouTubePlayerReady(playerId){	document.getElementById('YouTubeP').addEventListener("onStateChange","onytplayerStateChange");
		Processing.getInstanceById('canvas').prepPlayer();	
		}
		
		function onytplayerStateChange(newState) {
		   if(newState == 0){
			Processing.getInstanceById('canvas').videoEnded();
		   }
		}	
	</script>
  </head>
  <body bgcolor="Black">
    <div align=center>   
<form name="input"><font size="5" color="white">Location ID: <input type="text" name="_id" size="20"/> </font></form>
     <canvas id="canvas" >
      <font size="10" color="white">Your browser doesn't support HTML5! Please 
      and use the latest version of Mozilla Firefox or Google Chrome.</font>
    </canvas>
	<div id="dialogWindow">
		<div id="ytplayer">
			<p>Loading Site <br /> <br /> If it takes forever, you probably don't have Flash Player 8+ and/or JavaScript enabled.</p>

		</div>
	</div>
    </div>
  </body>
</html>
