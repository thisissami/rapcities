<html>
  <head>
    <title>Rapcities Uploader</title>

    <script type="text/javascript" src="processing.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script>
	<style type="text/css">
	#dialogWindow{
		z-index:1;
		position:absolute;
		right:18px;
		top:390px;
	}
	#YouTubeP{
		z-index:1;
	}
	</style>
	<script type="text/javascript">
      $(document).ready(function(){
        var cvs = document.getElementById("canvas");
        var p = new Processing(cvs, 
(function(aw){var l=(function(){function bu(){var bw=this;function by(){aw.extendClassChain(bw)}bw.x=0;bw.y=0;bw.hw=0;bw.hh=0;bw.invert=false;bw.pressedHere=false;function bB(){return aw.mouseX>bw.x-bw.hw&&aw.mouseX<bw.x+bw.hw&&aw.mouseY>bw.y-bw.hh&&aw.mouseY<bw.y+bw.hh}aw.addMethod(bw,"pressed",bB);function bC(bE,bF){bw.x=bE;bw.y=bF}aw.addMethod(bw,"newPos",bC);function bA(){}aw.addMethod(bw,"mousePressed",bA);function bx(){}aw.addMethod(bw,"mouseReleased",bx);function bz(){}aw.addMethod(bw,"draw",bz);function bD(bF,bH,bE,bG){by();bw.x=bF;bw.y=bH;bw.hw=bE;bw.hh=bG}function bv(){if(arguments.length===4){bD.apply(bw,arguments)}else{by()}}bv.apply(null,arguments)}return bu})();aw.Button=l;var I=(function(){function bu(){var bB=this;function bA(){aw.extendClassChain(bB)}bB.NYC=null;bB.miniNYC=null;bB.NYCx=1000;bB.NYCy=711;bB.ox=0;bB.oy=0;bB.ocx=0;bB.ocy=0;bB.allX=0;bB.allY=0;bB.widths=null;bB.heights=null;bB.ominx=0;bB.ominy=0;bB.minix=0;bB.miniy=0;bB.maxix=0;bB.maxiy=0;bB.opressed=false;bB.miniPressed=false;bB.once=false;function by(){bB.$self.drawMap();bB.$self.drawLocations();bB.$self.drawCurrent();aw.fill(0);aw.noStroke();aw.rectMode(aw.CORNERS);bB.$self.drawMini()}aw.addMethod(bB,"draw",by);function bw(){aw.imageMode(aw.CENTER);var bQ=0;var bT=0;var bS=0;for(bS=0;bS<8;bS++){bQ+=bB.widths[bS];if(bQ>bb){break}}var bR=0;for(bR=0;bR<8;bR++){bT+=bB.heights[bR];if(bT>a7){break}}bB.$self.grimage(bR,bS,0+aD/2-(bB.widths[bS]/2-(bQ-bb)),0+am/2-(bB.heights[bR]/2-(bT-a7)));if(bR>0){bB.$self.grimage(bR-1,bS,0+aD/2-(bB.widths[bS]/2-(bQ-bb)),0+am/2-bB.heights[bR]-(bB.heights[bR-1]/2-(bT-a7))+1)}if(bS>0){bB.$self.grimage(bR,bS-1,0+aD/2-bB.widths[bS]-(bB.widths[bS-1]/2-(bQ-bb))+1,0+am/2-(bB.heights[bR]/2-(bT-a7)))}if(bR<7){bB.$self.grimage(bR+1,bS,0+aD/2-(bB.widths[bS]/2-(bQ-bb)),0+am/2+bB.heights[bR+1]/2+(bT-a7)-1)}if(bS<7){bB.$self.grimage(bR,bS+1,0+aD/2+bB.widths[bS+1]/2+(bQ-bb)-1,0+am/2-(bB.heights[bR]/2-(bT-a7)))}if(bR>0&&bS>0){bB.$self.grimage(bR-1,bS-1,0+aD/2-bB.widths[bS]-(bB.widths[bS-1]/2-(bQ-bb))+1,0+am/2-bB.heights[bR]-(bB.heights[bR-1]/2-(bT-a7))+1)}if(bR>0&&bS<7){bB.$self.grimage(bR-1,bS+1,0+aD/2+bB.widths[bS+1]/2+(bQ-bb)-1,0+am/2-bB.heights[bR]-(bB.heights[bR-1]/2-(bT-a7))+1)}if(bR<7&&bS<7){bB.$self.grimage(bR+1,bS+1,0+aD/2+bB.widths[bS+1]/2+(bQ-bb)-1,0+am/2+bB.heights[bR+1]/2+(bT-a7)-1)}if(bR<7&&bS>0){bB.$self.grimage(bR+1,bS-1,0+aD/2-bB.widths[bS]-(bB.widths[bS-1]/2-(bQ-bb))+1,0+am/2+bB.heights[bR+1]/2+(bT-a7)-1)}}aw.addMethod(bB,"drawMap",bw);function bE(bR,bT,bS,bQ){if(at[bR][bT]){aw.image(at[bR][bT],bS,bQ)}else{if(!ai[bR][bT]){a3(bR,bT);aw.rectMode(aw.CENTER);aw.fill(150);aw.noStroke();aw.rect(bS,bQ,1000,1000)}}}aw.addMethod(bB,"grimage",bE);function bL(){aw.imageMode(aw.CORNERS);aw.image(bB.miniNYC,av,w,x,az);aw.rectMode(aw.CENTER);aw.noFill();aw.strokeWeight(1);aw.stroke(K[0]);aw.rect(av+aq,w+ap,aU,aT);aw.ellipseMode(aw.CENTER);for(var bQ=0;bQ<a0.size();bQ++){var bR=a0.get(bQ);aw.fill(aR[bR.type]);aw.stroke(aR[bR.type]);if(bR==bo){aw.ellipse(aw.map(bR.x,531.749,531.749+853,av,x),aw.map(bR.y,231.083,231.083+810,w,az),5,5)}else{aw.ellipse(aw.map(bR.x,531.749,531.749+853,av,x),aw.map(bR.y,231.083,231.083+810,w,az),3,3)}}}aw.addMethod(bB,"drawMini",bL);function bG(){aD=W;am=a9;aU=aw.map(aD,0,bl,0,284);aT=aw.map(am,0,aO,0,270);bb=2600;a7=4100;aq=aw.map(bb,0,bl,0,284);ap=aw.map(a7,0,aO,0,270);bB.widths=new Array(1000,1000,1000,1000,1000,1000,1000,1000);bB.heights=new Array(950,950,950,950,950,950,950,950);bB.allX=1000*8;bB.allY=950*8;bB.$self.setMins()}aw.addMethod(bB,"prep",bG);function bD(){if(aw.mouseX>av&&aw.mouseY>w&&aw.mouseX<x&&aw.mouseY<az){bB.miniPressed=true;aq=aw.min(aw.max(aU/2,aw.mouseX-av),284-aU/2);ap=aw.min(aw.max(aT/2,aw.mouseY-w),270-aT/2);bB.$self.miniToMaxi()}}aw.addMethod(bB,"miniMousePressed",bD);function bF(){if(bB.miniPressed){aq=aw.min(aw.max(aU/2,aw.mouseX-av),284-aU/2);ap=aw.min(aw.max(aT/2,aw.mouseY-w),270-aT/2);bB.$self.miniToMaxi()}}aw.addMethod(bB,"miniMouseDragged",bF);function bv(){bb=aw.map(aq,0,284,0,bl);a7=aw.map(ap,0,270,0,aO);bB.$self.setMins()}aw.addMethod(bB,"miniToMaxi",bv);function bM(){bB.miniPressed=false}aw.addMethod(bB,"miniMouseReleased",bM);function bN(){if(aw.key==aw.CODED){switch(aw.keyCode){case (aw.UP):ap=aw.max(ap-1,aT/2);bB.$self.miniToMaxi();break;case (aw.DOWN):ap=aw.min(ap+1,270-aT/2);bB.$self.miniToMaxi();break;case (aw.LEFT):aq=aw.max(aq-1,aU/2);bB.$self.miniToMaxi();break;case (aw.RIGHT):aq=aw.min(aq+1,284-aU/2);bB.$self.miniToMaxi();break}}}aw.addMethod(bB,"keyPressed",bN);function bH(){bB.ox=aw.mouseX;bB.oy=aw.mouseY;bB.ocx=bb;bB.ocy=a7;bB.ominx=G;bB.ominy=E;bB.opressed=true}aw.addMethod(bB,"mousePressed",bH);function bO(){if(bB.opressed){bb=bB.ocx-(aw.mouseX-bB.ox);a7=bB.ocy-(aw.mouseY-bB.oy);if(bb>bl-aD/2){bb=bl-aD/2}if(bb<aD/2){bb=aD/2}if(a7<am/2){a7=am/2}if(a7>aO-am/2){a7=aO-am/2}aq=aw.map(bb,0,bl,0,284);ap=aw.map(a7,0,aO,0,270);bB.$self.setMins()}}aw.addMethod(bB,"mouseDragged",bO);function bx(){G=aw.map(bb-aD/2,0,bl,531.749,531.749+853);bd=aw.map(bb+aD/2,0,bl,531.749,531.749+853);E=aw.map(a7-am/2,0,aO,231.083,231.083+810);ba=aw.map(a7+am/2,0,aO,231.083,231.083+810)}aw.addMethod(bB,"setMins",bx);function bP(){bB.opressed=false}aw.addMethod(bB,"mouseReleased",bP);function bI(){bB.opressed=false}aw.addMethod(bB,"mouseOut",bI);function bz(){aw.imageMode(aw.CENTER);ae=-1;for(var bR=0;bR<a0.size();bR++){var bT=a0.get(bR);if(bT.x<bd+10&&bT.x>G-10&&bT.y<ba+15&&bT.y>E-15&&a8.get(bT.type).width>0){var bQ=aw.map(bT.x,G,bd,0,W);var bU=aw.map(bT.y,E,ba,0,a9);if(aw.mouseX<bQ+15&&aw.mouseX>bQ-15&&aw.mouseY<bU+15&&aw.mouseY>bU-15&&(aw.mouseX<av||aw.mouseX>x||aw.mouseY<au||aw.mouseY>az)){aw.image(a8.get(bT.type),bQ,bU);ae=bR}else{if(bo&&bT._id==bo._id){aw.image(a8.get(bT.type),bQ,bU);aw.textSize(18);var bS=aw.textWidth(bT.title);aw.stroke(aR[bT.type]);aw.fill(0);aw.rectMode(aw.CENTER);aw.rect(bQ,bU-40,bS+12,26,10);aw.fill(aR[bT.type]);aw.textAlign(aw.LEFT,aw.TOP);aw.text(bT.title,bQ-bS/2,bU-50)}else{aw.image(a8.get(bT.type),bQ,bU)}}}}}aw.addMethod(bB,"drawLocations",bz);function bJ(){if(B&&r.width>0){bs=true;if(!i){a1=aw.map(aw.mouseX,0,aw.width,G,bd);aZ=aw.map(aw.mouseY,0,aw.height,E,ba);aw.image(r,aw.map(a1,G,bd,0,W),aw.map(aZ,E,ba,0,a9))}else{aw.image(r,aw.map(a1,G,bd,0,W),aw.map(aZ,E,ba,0,a9))}}}aw.addMethod(bB,"drawCurrent",bJ);function bC(){bA();bB.NYC=aw.loadImage("http://localhost:8888/NYC.gif");bB.miniNYC=aw.loadImage("http://localhost:8888/miniNYC.png");bB.ox=bB.oy=-1;bB.$self.prep()}function bK(){if(arguments.length===0){bC.apply(bB,arguments)}else{bA()}}bK.apply(null,arguments)}return bu})();aw.Map=I;var P=(function(){function bu(){var by=this;var bB={$upcast:by};function bA(){l.apply(bB,arguments);if(!("$self" in bB)){aw.extendClassChain(bB)}}by.play=false;function bw(){return by.play}aw.addMethod(by,"paused",bw);function bE(){if(bB.pressed()){by.invert=true;by.pressedHere=true}}aw.addMethod(by,"mousePressed",bE);function bC(){if(bB.pressed()&&by.pressedHere){by.invert=true}else{by.invert=false}}aw.addMethod(by,"mouseDragged",bC);function bz(){if(by.invert&&by.pressedHere){if(aI&&q==ax){song.togglePause()}else{if(q==bn){if(bc.getPlayerState()==2){bc.playVideo()}else{bc.pauseVideo()}}}by.invert=false}by.pressedHere=false}aw.addMethod(by,"mouseReleased",bz);function bv(){if(q==ax&&aI){if(song!=null&&song.playState==1){if(song.paused){if(!S){by.play=true}}else{by.play=false}}else{by.play=true}}else{if(q==bn){if(bc.getPlayerState()==2||bc.getPlayerState()==-1){if(!S){by.play=true}}else{by.play=false}}}}aw.addMethod(by,"update",bv);function bD(){if(by.invert){aw.fill(255);aw.noStroke()}else{aw.noFill();if(bB.pressed()){aw.stroke(255)}else{aw.noStroke()}}aw.rect(by.x-by.hw,by.y-by.hh,by.x+by.hw,by.y+by.hh);if(by.invert){aw.fill(0);aw.noStroke()}else{aw.fill(255);aw.noStroke()}if(by.play){aw.triangle(by.x-by.hw/2,by.y-by.hh/2,by.x-by.hw/2,by.y+by.hh/2,by.x+by.hw/2,by.y)}else{aw.rect(by.x-by.hw/2,by.y-by.hh/2,by.x-1,by.y+by.hh/2);aw.rect(by.x+by.hw/2,by.y-by.hh/2,by.x+1,by.y+by.hh/2)}}aw.addMethod(by,"draw",bD);function bF(bH,bJ,bG,bI){bA(bH,bJ,bG,bI);by.play=true}function bx(){if(arguments.length===4){bF.apply(by,arguments)}else{bA()}}bx.apply(null,arguments)}aw.extendStaticMembers(bu,l);bu.$base=l;return bu})();aw.Play=P;var X=(function(){function bu(){var bw=this;var bz={$upcast:bw};function by(){l.apply(bz,arguments);if(!("$self" in bz)){aw.extendClassChain(bz)}}bw.invert=false;bw.pressed=false;function bC(){if(bz.pressed()){bw.invert=true;bw.pressedHere=true}}aw.addMethod(bw,"mousePressed",bC);function bA(){if(bz.pressed()&&bw.pressedHere){bw.invert=true}else{bw.invert=false}}aw.addMethod(bw,"mouseDragged",bA);function bx(){if(bw.invert&&bw.pressedHere){bq();bw.invert=false}bw.pressedHere=false}aw.addMethod(bw,"mouseReleased",bx);function bB(){if(bw.invert){aw.fill(255);aw.noStroke()}else{if(bz.pressed()){aw.textSize(14);var bE=aw.textWidth("Next Location");aw.fill(0);aw.stroke(255);aw.rect(bw.x-bE/2-3,bw.y+15,bw.x+bE/2+3,bw.y+35);aw.textAlign(aw.CENTER,aw.TOP);aw.fill(255);aw.text("Next Location",bw.x,bw.y+17);aw.noFill()}else{aw.noStroke();aw.noFill()}}aw.rect(bw.x-bw.hw,bw.y-bw.hh,bw.x+bw.hw,bw.y+bw.hh);if(bw.invert){aw.fill(0);aw.noStroke()}else{aw.fill(255);aw.noStroke()}aw.rect(bw.x-3,bw.y-bw.hh/2,bw.x-6,bw.y+bw.hh/2);aw.triangle(bw.x,bw.y-bw.hh/2,bw.x,bw.y+bw.hh/2,bw.x+bw.hw/2+1,bw.y)}aw.addMethod(bw,"draw",bB);function bD(bF,bH,bE,bG){by(bF,bH,bE,bG);bw.invert=false}function bv(){if(arguments.length===4){bD.apply(bw,arguments)}else{by()}}bv.apply(null,arguments)}aw.extendStaticMembers(bu,l);bu.$base=l;return bu})();aw.Forward=X;var z=(function(){function bu(){var bx=this;function bA(){aw.extendClassChain(bx)}bx.panel=bk;bx.margin=10;bx.slant=2;bx.num=0;bx.mouseMainPaneControl=-1;bx.mouseSort=-1;bx.mouseFilter=0;bx.genreFilter=0;bx.mouseOnTitle=0;bx.mouseGenre=-1;bx.colorIcon=null;bx.sortIcon=null;bx.names=[" Current Info"," Color Mode","Sorting"];bx.currentColor=0;function bC(){bx.$self.drawControl();if(!bo){bx.$self.printNoSong()}else{bx.$self.printLocation()}}aw.addMethod(bx,"draw",bC);function bD(){}aw.addMethod(bx,"mousePressed",bD);function bz(){}aw.addMethod(bx,"mouseReleased",bz);function bE(){aw.fill(0);aw.strokeWeight(2);aw.stroke(255);aw.rectMode(aw.CORNERS);aw.rect(av,aW,x+1,w);aw.textSize(15);aw.rectMode(aw.CORNERS);aw.noFill();aw.rect(av,az,x+1,w)}aw.addMethod(bx,"drawControl",bE);function bB(){aw.textAlign(aw.LEFT,aw.TOP);aw.textSize(22);aw.fill(aR[bo.type]);j(bo.title,av+10,aW+10,200,0,22);aw.fill(255);aw.textSize(16);k=-1;if(bo.list){var bG=bo.list.length;for(var bF=0;bF<bG;bF++){if(bF==Q){aw.fill(aR[bo.type]);j(bo.list[bF].title,av+20,aW+35+bF*22,248,aR[bo.type],30);aw.fill(255)}else{if(aw.mouseX>av+20&&aw.mouseY<aW+35+(bF+1)*22&&aw.mouseY>aW+35+bF*22){aw.fill(aR[bo.type]);j(bo.list[bF].title,av+20,aW+35+bF*22,248,aR[bo.type],30);k=bF;aw.fill(255)}else{j(bo.list[bF].title,av+20,aW+35+bF*22,248,aw.color(255),30)}}}}else{aw.text(bo.info,av+20,aW+35,248,x-av+20)}}aw.addMethod(bx,"printLocation",bB);function by(){aw.textAlign(aw.LEFT);aw.fill(255);aw.textSize(16);aw.text("Welcome to RapCities! Here you can explore how the sound of Hip-Hop and Rap changes from neighborhood to neighborhood in New York City!\n\nIf you find an artist you want to check out, just click on their icon, and you'll get to sample some of their most popular tunes.\n\n",av+20,aW+35,x-av-40,a9-aW)}aw.addMethod(bx,"printNoSong",by);function bv(bG,bF){bA();av=bG;au=bF;N=57;aW=au+N;x=W-aL;w=au+555;az=w+270;bx.num=bx.names.length;aw.textSize(16)}function bw(){if(arguments.length===2){bv.apply(bx,arguments)}else{bA()}}bw.apply(null,arguments)}return bu})();aw.SidePane=z;var p=(function(){function bu(){var bz=this;function bx(){aw.extendClassChain(bz)}bz.play=null;bz.ffwd=null;bz.pressedInSeekBar=false;bz.onVol=false;bz.onVolGen=false;bz.volDragged=false;bz.songPausedToBeginWith=false;bz.stillWithinSeekBar=false;bz.totTime=null;bz.total=0;function bw(){if(q==bn||(q==ax&&aI)){aw.rectMode(aw.CORNERS);bz.play.update();bz.play.draw();bz.ffwd.draw();bz.$self.drawSeekBar();bz.$self.drawVolume();if(bz.onVolGen){bz.$self.drawVolumeSetter()}aw.rectMode(aw.CENTER);aw.ellipseMode(aw.CENTER_RADIUS)}}aw.addMethod(bz,"draw",bw);function bC(){bz.play.mousePressed();bz.ffwd.mousePressed();bz.$self.checkSeekBar();bz.$self.checkVol()}aw.addMethod(bz,"mousePressed",bC);function bL(){bz.play.mouseDragged();bz.ffwd.mouseDragged();bz.$self.dragSeekBar();bz.$self.dragVol()}aw.addMethod(bz,"mouseDragged",bL);function bM(){bz.play.mouseReleased();bz.ffwd.mouseReleased();bz.$self.releaseSeekBar();bz.$self.releaseVol()}aw.addMethod(bz,"mouseReleased",bM);function bD(){if(aw.mouseX>aC-10&&aw.mouseX<aC+2&&aw.mouseY>F-6&&aw.mouseY<F+6){return true}return false}aw.addMethod(bz,"onVolume",bD);function bN(){if(aw.mouseX>aC-volS-10&&aw.mouseX<aC+20&&aw.mouseY>F-volY&&aw.mouseY<F+volY){return true}return false}aw.addMethod(bz,"onVolumeSetter",bN);function bv(){if(bz.$self.onVolume()){bz.onVol=true;aw.stroke(255)}else{aw.noStroke();bz.onVol=false}aw.fill(255);aw.triangle(aC-10,F,aC,F-7,aC,F+7);aw.rect(aC-10,F+3,aC-3,F-3);aw.stroke(255);aw.strokeWeight(2);aw.noFill();aw.ellipseMode(aw.RADIUS);if(!bp){if(ad>80){aw.arc(aC+6,F,12,12,-(aw.PI/3),aw.PI/3)}if(ad>60){aw.arc(aC+5,F,9,9,-(aw.PI/3),aw.PI/3)}if(ad>40){aw.arc(aC+4,F,6,6,-(aw.PI/3),aw.PI/3)}if(ad>20){aw.arc(aC+3,F,3,3,-(aw.PI/3),aw.PI/3)}}else{aw.stroke(K[0]);aw.line(aC-9,F-8,aC+2,F+7)}if(bz.$self.onVolumeSetter()){bz.onVolGen=true}else{if(!bz.volDragged){bz.onVolGen=false}}}aw.addMethod(bz,"drawVolume",bv);function bH(){if(bz.onVol){bz.$self.toggleMute()}else{if(bz.onVolGen&&aw.mouseX>aC-volS-5&&aw.mouseX<aC-volS+5&&aw.mouseY>F-volY&&aw.mouseY<F+volY){bz.volDragged=true;ad=(F+volY-aw.mouseY)/volD;if(q==ax){song.setVolume(ad)}else{if(q==bn){bc.setVolume(ad)}}}}}aw.addMethod(bz,"checkVol",bH);function bO(){if(bz.volDragged){if(aw.mouseY>F+volY){ad=0}else{if(aw.mouseY<F-volY){ad=100}else{ad=(F+volY-aw.mouseY)/volD}}if(q==ax){song.setVolume(ad)}else{if(q==bn){bc.setVolume(ad)}}}}aw.addMethod(bz,"dragVol",bO);function bG(){if(bz.volDragged){bz.volDragged=false}}aw.addMethod(bz,"releaseVol",bG);function bB(){aw.stroke(255);aw.strokeWeight(2);aw.fill(0);aw.rect(aC-volS-5,F-volY,aC-volS+5,F+volY);if(ad>0){aw.fill(K[2]);aw.noStroke();aw.rect(aC-volS-4,F+volY-1,aC-volS+4,F+volY+1-ad*volD)}}aw.addMethod(bz,"drawVolumeSetter",bB);function by(){if(q==ax&&aI){song.toggleMute()}else{if(q==bn){if(bc.isMuted()){bc.unMute()}else{bc.mute()}}}bp=!bp}aw.addMethod(bz,"toggleMute",by);function bI(){if((q==ax&&aI)||q==bn){if(aw.mouseX>bj&&aw.mouseX<seekRight&&aw.mouseY>F-10&&aw.mouseY<F+10){S=true;bz.stillWithinSeekBar=true;if((q==ax&&song.paused)||(q==bn&&bc.getPlayerState()==2)){bz.songPausedToBeginWith=true}else{bz.songPausedToBeginWith=false}if(q==ax){song.pause()}else{bc.pauseVideo()}}}}aw.addMethod(bz,"checkSeekBar",bI);function bK(){if(q==bn||(q==ax&&aI)){if(S){if(aw.mouseX>bj&&aw.mouseX<seekRight&&aw.mouseY>F-10&&aw.mouseY<F+10){var bQ=0;if(q==ax){if(song!=null&&song.readyState==1){bQ=song.durationEstimate}else{if(song!=null&&song.readyState==3){bQ=song.duration}}var bP=aw.__int_cast(aw.map(aw.mouseX,bj,seekRight,0,bQ));if(!bz.songPausedToBeginWith){song.resume()}song.setPosition(bP)}else{var bP=aw.__int_cast(aw.map(aw.mouseX,bj,seekRight,0,bc.getDuration()));bc.seekTo(bP,true);if(!bz.songPausedToBeginWith){bc.playVideo()}}}S=false;bz.stillWithinSeekBar=false;if(!bz.songPausedToBeginWith){if(q==ax){song.resume()}else{bc.playVideo()}}}}}aw.addMethod(bz,"releaseSeekBar",bK);function bE(){if(q==bn||(q==ax&&aI)){if(S){if(aw.mouseX>bj&&aw.mouseX<seekRight&&aw.mouseY>F-10&&aw.mouseY<F+10){bz.stillWithinSeekBar=true}else{bz.stillWithinSeekBar=false}}}}aw.addMethod(bz,"dragSeekBar",bE);function bF(){aw.stroke(255);aw.strokeWeight(3);if(q==bn&&bc.getPlayerState()==-1){aw.fill(255);aw.textSize(19);aw.textAlign(aw.LEFT,aw.CENTER);aw.text("-:--/-:--",aF-28-ar,F)}if((q==ax&&song!=null&&song.readyState==1)||q==bn&&bc.getPlayerState()==3){aw.strokeWeight(1);aw.line(bj,F,seekRight,F);aw.strokeWeight(3);var bP=0;if(q==ax){bP=aw.map(song.bytesLoaded,0,song.bytesTotal,bj,seekRight)}else{bP=aw.map(bc.getVideoBytesLoaded(),0,bc.getVideoBytesTotal(),bj,seekRight)}if(bP>=0){aw.line(bj,F,bP,F)}}else{aw.line(bj,F,seekRight,F)}if((q==ax&&song!=null&&(song.readyState==1||song.readyState==3))||(q==bn&&bc.getPlayerState()>0)){var bQ=null;if(!S||!bz.stillWithinSeekBar){var bP=0;if(q==ax){if(song.readyState==1){bz.total=song.durationEstimate;bz.totTime=a4(bz.total/1000)}else{if(song.readyState==3){bz.total=song.duration;bz.totTime=a4(bz.total/1000)}}bQ=a4(song.position/1000);bP=aw.map(song.position,0,bz.total,bj,seekRight)}else{if(q==bn){bz.total=bc.getDuration();bz.totTime=a4(bz.total);bQ=a4(bc.getCurrentTime());bP=aw.map(bc.getCurrentTime(),0,bz.total,bj,seekRight)}}if(bP>=0){aw.line(bP,F-10,bP,F+10)}}else{aw.line(aw.mouseX,F-10,aw.mouseX,F+10);var bR=aw.map(aw.mouseX,bj,seekRight,0,bz.total);if(q==ax){bR/=1000}bQ=a4(bR)}aw.fill(255);aw.textSize(15);aw.textAlign(aw.LEFT,aw.CENTER);aw.text(bQ+"/"+bz.totTime,aF-30-ar,F)}aw.strokeWeight(1)}aw.addMethod(bz,"drawSeekBar",bF);function bA(){bx();aP=av;aF=x;o=w-230;be=w;ar=aw.textWidth("0:00/0:00");bj=av+95;F=w-18;bz.play=new P(av+72,F,10,10);bz.ffwd=new X(x-20,F,10,10);aC=av+40;volY=15;volD=0.3;volS=20;seekRight=x-40-ar;aw.textSize(15)}function bJ(){if(arguments.length===0){bA.apply(bz,arguments)}else{bx()}}bJ.apply(null,arguments)}return bu})();aw.Current=p;var aI=false;var aM=null;var K=null;var n=null;var R=null;var D=null;var af=null;var m=null;var aa=null;var y=0;var aE=1;var f=2;var M=0;var d=1;var T=2;var bt=y;var O=false;var bm=T;var aX=0;var at=null,ai=null;var aG=0;var C=1;var W=0,a9=0,h=0,J=0;var bl=0,aO=0;var aL=0,aK=0,e=0,bh=0;var az=0;function aS(){W=aw.max(700,$(window).width());a9=aw.max(870,$(window).height());aN();var bw=aw.__split(window.location.pathname,(new aw.Character("/")));if(bw.length>0&&bw[0]!="songid"){if(bw.length<3){sponsor=bw[1]}else{sponsor=bw[3]}}logo=aw.loadImage("http://localhost:8888/logo");$("#parent").css("width",W).css("height",a9);if(W==700||a9==870){$("body").css("overflow","visible")}e=1920;bh=1000;aL=20;aK=30;h=30;J=0;aO=8*950;bl=8*1000;ay();an=new aw.ArrayList();aw.size(W,a9);aw.frameRate(30);aw.smooth();aw.rectMode(aw.CORNERS);aw.ellipseMode(aw.CENTER_RADIUS);aI=false;aM=aw.createFont("Arial",13);aw.textFont(aM);aB();songs=new aw.ArrayList();D=new aw.HashMap();m=new z(W-aL-284,aK);af=new p();aa=new I();at=new Array(8);ai=new Array(8);for(var bv=0;bv<8;bv++){at[bv]=new Array(8);ai[bv]=new Array(8);for(var bu=0;bu<8;bu++){ai[bv][bu]=false}}v=aw.loadImage("http://localhost:8888/facebook");aA=aw.loadImage("http://localhost:8888/youtube");u=aw.loadImage("http://localhost:8888/info");bi=aw.loadImage("http://localhost:8888/heart");al=aw.loadImage("http://localhost:8888/twitter")}aw.setup=aS;function b(bv,bu){if(bv!=W||bu!=a9){W=bv;a9=bu;$("#parent").css("width",bv).css("height",bu);h=30;J=0;aw.size(W,a9);aD=W;am=a9;av=W-aL-284;x=W-aL;aU=aw.map(aD,0,bl,0,284);aT=aw.map(am,0,aO,0,270);aa.setMins();aC=av+40;af.play.newPos(av+72,F);af.ffwd.newPos(x-20,F);bj=av+95;aC=av+40;seekRight=x-40-ar;aP=av;aF=x}}aw.setUpSize=b;var v=null,aA=null,bg=null,u=null,bi=null,ah=null,al=null;function aB(){aw.colorMode(aw.RGB);K=aw.createJavaArray("$p.color",[10]);n=aw.createJavaArray("$p.color",[10]);K[0]=aw.color(255,0,0);K[1]=aw.color(255,103,0);K[2]=aw.color(255,182,0);K[3]=aw.color(231,255,0);K[4]=aw.color(0,255,18);K[5]=aw.color(0,255,212);K[6]=aw.color(0,104,155);K[7]=aw.color(149,0,255);K[8]=aw.color(248,0,255);K[9]=aw.color(255,3,141);n[0]=aw.color(0,153,153);n[1]=aw.color(100,168,209);n[2]=aw.color(133,133,232);n[3]=aw.color(230,113,255);n[4]=aw.color(255,128,157);n[5]=aw.color(255,176,128);n[6]=aw.color(255,195,100);n[7]=aw.color(249,243,140);n[8]=aw.color(222,244,130);n[9]=aw.color(204,255,123)}aw.setUpColors=aB;function aJ(){aa.draw();aw.imageMode(aw.CORNER);aw.image(logo,0,0);m.draw();af.draw();if(ae>-1){br(ae)}}aw.draw=aJ;var a8=new aw.HashMap();var ac=[];var aR=[];var a0=new aw.ArrayList();function aN(){$.getJSON("http://localhost:8888/loc/browse?hasLoc=8",function(bv){if(bv&&bv.locs){for(var bu=0;bu<bv.locs.length;bu++){a0.add(bv.locs[bu])}}});$.getJSON("http://localhost:8888/loc/getTypes",function(bv){if(bv&&bv.types){for(var bu=0;bu<bv.types.length;bu++){a8.put(bv.types[bu]._id,aw.requestImage("http://localhost:8888/loc/getTypeIcon?_id="+bv.types[bu]._id));aR[bv.types[bu]._id]=aw.color(bv.types[bu].r,bv.types[bu].g,bv.types[bu].b);ac[bv.types[bu]._id]=bv.types[bu].mediaType}}})}aw.setUpLocations=aN;var G=0,E=0,bd=0,ba=0;var aD=0,am=0,aU=0,aT=0;var ae=-1;function a3(bv,bu){var bw=null;if((bv==0)||(bv==1&&bu<1)){bw="0";bw+=String(bv*8+bu+1)+".large.grid"}else{bw=String(bv*8+bu+1)+".large.grid"}ai[bv][bu]=true;at[bv][bu]=aw.loadImage("http://localhost:8888/"+bw)}aw.loadMapPiece=a3;function L(){aa.keyPressed()}aw.keyPressed=L;var aq=0,ap=0,bb=0,a7=0;var r=null;var B=false;var bs=false;var ag=null;var i=false;var a1=null,aZ=null;var bo=null;var k=-1;var ae=-1;function A(){if(ae>=0){bo=a0.get(ae);console.log(bo);$("#curid").html(bo._id);Q=0;s()}else{if(k>=0){Q=k;s()}else{if(aw.mouseX<av||aw.mouseX>x||aw.mouseY<au||aw.mouseY>az){if(aw.mouseButton==aw.LEFT){if(bs){if(i){$.ajax({url:"http://localhost:8888/loc/editLocation",data:{_id:ag,x:a1+"",y:aZ+""},success:function(bu){if(bu){if(bu.success&&bu.object){var bw=false;for(var bv=0;bv<a0.size();bv++){if(a0.get(bv)._id==ag){a0.remove(bv);a0.add(bu.object);bw=true;break}}if(!bw){a0.add(bu.object)}var bx="Operation Successful";if(bu.message){bx+=(new aw.Character("\n"))+bu.message}r=null;bs=false;i=false;B=false;alert(bx)}else{alert("There seems to be an error:\n\n"+bu.message)}}}})}else{i=true}}else{ag=document.input._id.value;if(ag&&ag.length>6){r=aw.requestImage("http://localhost:8888/loc/getTypeIconID?_id="+ag);B=true}}}else{r=null;bs=false;i=false;B=false}}}}}aw.mouseClicked=A;function br(bu){var bw=a0.get(bu);aw.textSize(18);var bv=aw.textWidth(bw.title);aw.stroke(aR[bw.type]);aw.fill(0);aw.rectMode(aw.CORNERS);aw.rect(aw.mouseX,aw.mouseY-33,aw.mouseX+bv+12,aw.mouseY-7,10);aw.fill(aR[bw.type]);aw.textAlign(aw.LEFT,aw.TOP);aw.text(bw.title,aw.mouseX+6,aw.mouseY-30)}aw.drawHoverInfo=br;function a6(bu){$.getJSON("http://localhost:8888/getTrack?id="+bu,function(bv){if(aI){ao()}bf(bv.url)})}aw.getSong=a6;function bf(bu){song=soundManager.createSound({id:bu,url:bu,autoLoad:true,autoPlay:true,volume:ad,onfinish:function(){ak()}});aI=true;if(bp){song.mute()}}aw.startSong=bf;function ao(){aI=false;song.stop();song.unload();song.destruct()}aw.stopSong=ao;function aV(){if(aw.mouseY<be&&aw.mouseY>o&&aw.mouseX<aF&&aw.mouseX>aP){af.mousePressed()}else{if(aw.mouseX>av&&aw.mouseX<x&&aw.mouseY>au&&aw.mouseY<az){if(aw.mouseY<w){m.mousePressed()}else{aa.miniMousePressed()}}else{aa.mousePressed()}}}aw.mousePressed=aV;function aQ(){af.mouseDragged();aa.mouseDragged();aa.miniMouseDragged()}aw.mouseDragged=aQ;function H(){aa.mouseOut();af.mouseReleased()}aw.mouseOut=H;function a(){af.mouseReleased();aa.mouseReleased();aa.miniMouseReleased()}aw.mouseReleased=a;var g=-1;var aj=1;var c=0;var V=true;function aY(){for(var bu=songs.size()-1;bu>-1;bu--){if(bu==Z&&aI){songs.get(bu).stopSong()}songs.remove(bu)}Z=-1;song=null}aw.resetSongs=aY;function ak(){stopVideo();if(Q<bo.list.length-1){Q++;s()}else{bq()}}aw.createNext=ak;var an=null;function bq(){var bw=false;for(var bu=0;bu<an.size();bu++){if(an.get(bu)==bo._id){bw=true;break}}if(!bw){an.add(bo._id)}for(var bu=0;bu<a0.size();bu++){var bv=a0.get(bu);if(bv.x>G&&bv.x<bd&&bv.y>E&&bv.y<ba&&!aw.__contains(an,bv._id)){bo=bv;Q=0;s()}}}aw.nextLocation=bq;function Y(bv,bu){this.length=bv;this.index=bu}function j(bx,bB,bz,bA,bu,bE){if(aw.textWidth(bx)>bA){var bC=D.get(bx+aw.textWidth(bx));if(bC==null){bC=new Y(0,0);D.put(bx+aw.textWidth(bx),bC)}var bw=bC.index;var by=bx.length;if(bC.length>=aw.textWidth(bx.charAt(bw))){if(bw<by-1){bC.index++;bw++;bC.length=0}else{bC.index=bw=0;bC.length=-40}}var bD=aw.textWidth(bx.charAt(bw))-bC.length;bw++;while(bD<bA&&bw<by){bD+=aw.textWidth(bx.charAt(bw));bw++}aw.text(bx.substring(bC.index,bw),bB-bC.length,bz);if(bw==by){bD+=40;var bv=0;while(bD<bA){bD+=aw.textWidth(bx.charAt(bv));bv++}aw.text(bx.substring(0,bv),bB+aw.textWidth(bx.substring(bC.index,bw))-bC.length+40,bz)}aw.noStroke();aw.fill(0);aw.rectMode(aw.CORNERS);aw.rect(bB-aw.textWidth((new aw.Character("W"))),bz+bE,bB,bz);aw.rect(bB+bA,bz,bB+bA+aw.textWidth((new aw.Character("W"))),bz+bE);aw.fill(bu);bC.length++;D.put(bx+aw.textWidth(bx),bC)}else{aw.text(bx,bB,bz)}}aw.checkText=j;var bk=0;var t=1;var a5=0;var au=0,av=0,w=0,x=0,N=0,aW=0;var Z=-1;var Q=-1;var S=false;var ad=50;var bp=false;var ar=0,bj=0,aC=0;var aF=0,aP=0,o=0,be=0,F=0;function a4(bw){var bv=aw.__int_cast((bw%60));var bu=aw.__int_cast(((bw%3600)/60));var bx=null;if(bv==0){bx="00"}else{if(bv<10){bx="0"+bv}else{bx=bv}}return(bu+":"+bx)}aw.makeTime=a4;function U(){if(bo.list&&Q<bo.list.length-1){Q++;s()}else{bq()}}aw.videoEnded=U;function ay(){$("#ytplayer").html('<script type="text/javascript">var params = { allowScriptAccess: "always" };var atts = { id: "YouTubeP" };swfobject.embedSWF("http://www.youtube.com/apiplayer?enablejsapi=1&version=3", "ytplayer", "283", "200", "8", null, null, params, atts);<\/script>')}aw.togglePlayer=ay;var bc=null;var q=false;var ax=1;var bn=2;function aH(){bc=document.getElementById("YouTubeP");q=bn;bc.setVolume(ad)}aw.prepPlayer=aH;function s(){if(bo.list&&bo.list.length>0){bc.loadVideoById(bo.list[Q].ytid)}else{if(bo.ytid){bc.loadVideoById(bo.ytid)}}}aw.loadVideo=s;function a2(bx,bv){var by=null;if(bx==bo._id){by=false}else{by=true}for(var bw=0;bw<a0.size();bw++){if(bx==a0.get(bw)._id){bo=a0.get(bw);bb=aw.map(bo.x,531.749,531.749+853,0,bl);a7=aw.map(bo.y,231.083,231.083+810,0,aO);aq=aw.map(bb,0,bl,0,284);ap=aw.map(a7,0,aO,0,270);aa.setMins();if(bv&&bo.list){for(var bu=0;bu<bo.list.length;bu++){if(bo.list[bu].RID==bv){Q=bu;s()}}}else{Q=0;s()}}}}aw.playVideo=a2;function ab(){$.getJSON("http://localhost:8888/getBio?id="+artist.RID,function(bu){if(bu!=null){$("div#biolog").html("<b>"+artist.name+"</b><br /><p>"+bu.text+'<br /><br />Source: <a href="'+bu.url+'">Wikipedia</a></p>');$("div#biolog",window.parent.document).scrollTop(0)}});if(!$("div#biolog").dialog("isOpen")){$("div#biolog").dialog("open")}}aw.prepareBio=ab})    
)});
</script>
	<script type="text/javascript">
		function onYouTubePlayerReady(playerId){	document.getElementById('YouTubeP').addEventListener("onStateChange","onytplayerStateChange");
		Processing.getInstanceById('canvas').prepPlayer();	
		}
		
		function onytplayerStateChange(newState) {
		   if(newState == 0){
			Processing.getInstanceById('canvas').videoEnded();
		   }
		}	
	</script>
  </head>
  <body bgcolor="Black">
    <div align=center>   
<form name="input"><font size="5" color="white">Location ID: <input type="text" name="_id" size="20"/> Cur Selected ID: <span id="curid"></span></font> </form>
     <canvas id="canvas" ><!--data-processing-sources="http://localhost:8888/upl0d.pde"-->
      <font size="10" color="white">Your browser doesn't support HTML5! Please 
      and use the latest version of Mozilla Firefox or Google Chrome.</font>
    </canvas>
	<div id="dialogWindow">
		<div id="ytplayer">
			<p>Loading Site <br /> <br /> If it takes forever, you probably don't have Flash Player 8+ and/or JavaScript enabled.</p>

		</div>
	</div>
    </div>
  </body>
</html>
